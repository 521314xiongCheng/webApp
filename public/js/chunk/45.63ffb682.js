(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"./app/web/page/app/view/calculate/index.vue":function(t,e,a){"use strict";a.r(e);a("./node_modules/vant/es/number-keyboard/style/index.js");var o=a("./node_modules/vant/es/number-keyboard/index.js"),n=(a("./node_modules/vant/es/sticky/style/index.js"),a("./node_modules/vant/es/sticky/index.js")),i=(a("./node_modules/vant/es/col/style/index.js"),a("./node_modules/vant/es/col/index.js")),s=(a("./node_modules/vant/es/row/style/index.js"),a("./node_modules/vant/es/row/index.js")),c=(a("./node_modules/vant/es/field/style/index.js"),a("./node_modules/vant/es/field/index.js")),r=(a("./node_modules/vant/es/dialog/style/index.js"),a("./node_modules/vant/es/dialog/index.js")),l=(a("./node_modules/vant/es/tabbar-item/style/index.js"),a("./node_modules/vant/es/tabbar-item/index.js")),d=(a("./node_modules/vant/es/tabbar/style/index.js"),a("./node_modules/vant/es/tabbar/index.js")),u=(a("./node_modules/vant/es/button/style/index.js"),a("./node_modules/vant/es/button/index.js")),v=(a("./node_modules/vant/es/nav-bar/style/index.js"),a("./node_modules/vant/es/nav-bar/index.js")),m=(a("./node_modules/vant/es/toast/style/index.js"),a("./node_modules/vant/es/toast/index.js")),p=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),_=a.n(p),b=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=a.n(b),R=a("./node_modules/@babel/runtime/regenerator/index.js"),C=a.n(R),f=a("./app/web/page/app/utils/index.js"),x={data:function(){return{pro:"0",show:!1,zIndex:100,levelCode:97,targetContactId:"",isIos:Object(f.l)(),isIphoneX:Object(f.m)(),bcOrderRoutineRetailTotal:"",rcOrderRoutineRetailTotal:"",calcIntro:{rcOrderRetailAmt:0,retailPerDescribe:"",bcRetailPer:0,rcRetailPer:0,bcOrderRetailAmt:0,productionAmount:0,unitProductionAmount:0},calcData:h()({productionAmount:0,achieveProductionAmount:0,achieveUnitProductionAmount:0,unitProductionAmount:0},"achieveUnitProductionAmount",0),keyWordName:"",from:"",pageName:"ButtonTab",accountType:""}},created:function(){var t=this.$route.query,e=t.accountType,a=t.from;this.from=a,this.accountType=e,"operation"===e?this.pageName="StaffPersonalProfilePage":"profile"===this.from?this.pageName="PersonalProfilePage":this.pageName="ButtonTab",this.initData()},mounted:function(){var t=this;this.$jsBridge.onFronted((function(e){t.initData()}))},methods:{goNumber:function(t){var e;"rcOrderRoutineRetailTotal"===t&&(e="profile"===this.from?"PersonalCalculatorRCOrderClick":"CalculatorRCOrderClick"),"bcOrderRoutineRetailTotal"===t&&(e="profile"===this.from?"PersonalCalculatorIntouchOrderClick":"CalculatorIntouchOrderClick"),this.$track({context:this.pageName,behavior:e,item_type:this.pageName,item_id:e,attributes:{isEmployee:"operation"===this.accountType}}),this.show=!0,this.keyWordName=t},onInput:function(t){console.log(this.keyWordName),"bcOrderRoutineRetailTotal"==this.keyWordName?(this.bcOrderRoutineRetailTotal+=t,console.log("bcOrderRoutineRetailTotal",this.bcOrderRoutineRetailTotal)):(this.rcOrderRoutineRetailTotal+=t,console.log("rcOrderRoutineRetailTotal",this.rcOrderRoutineRetailTotal))},onDelete:function(){"bcOrderRoutineRetailTotal"==this.keyWordName?(this.bcOrderRoutineRetailTotal=this.bcOrderRoutineRetailTotal.slice(0,this.bcOrderRoutineRetailTotal.length-1),console.log("bcOrderRoutineRetailTotal",this.bcOrderRoutineRetailTotal)):(console.log("rcOrderRoutineRetailTotal",this.rcOrderRoutineRetailTotal),this.rcOrderRoutineRetailTotal=this.rcOrderRoutineRetailTotal.slice(0,this.rcOrderRoutineRetailTotal.length-1))},clear:function(){var t="CalculatorClearButtonClick";"profile"===this.from&&(t="PersonalCalculatorClearButtonClick"),this.$track({context:this.pageName,behavior:t,item_type:this.pageName,item_id:t,attributes:{isEmployee:"operation"===this.accountType}}),this.bcOrderRoutineRetailTotal="",this.rcOrderRoutineRetailTotal="",this.calcData.achieveProductionAmount=0,this.calcData.achieveUnitProductionAmount=0},loadData:function(){var t=this;return _()(C.a.mark((function e(){var a,o,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$ctx.baseApiList.calc,console.log("api",a),o={},e.next=5,t.$request.get("".concat(a,"/initProdCalc/").concat(t.targetContactId),{params:o});case 5:if(!(n=e.sent).data){e.next=13;break}console.log("data",n.data),t.calcIntro=n.data.data,t.calcIntro.bcRetailPer=100*t.calcIntro.bcRetailPer,t.calcIntro.rcRetailPer=100*t.calcIntro.rcRetailPer,e.next=14;break;case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e)})))()},goCalc:function(){var t=this;return _()(C.a.mark((function e(){var a,o,n,i,s,c,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="CalculateButtonClick","profile"===t.from&&(a="PersonalCalculateButtonClick"),t.$track({context:t.pageName,behavior:a,item_type:t.pageName,item_id:a,attributes:{isEmployee:"operation"===t.accountType}}),""!=(o=t.rcOrderRoutineRetailTotal+t.bcOrderRoutineRetailTotal)){e.next=9;break}return Object(m.a)("请至少输入一项金额"),e.abrupt("return");case 9:if(0!=o[0]){e.next=12;break}return Object(m.a)("请输入大于0的金额"),e.abrupt("return");case 12:return n=t.$ctx.baseApiList.calc,console.log("api",n),i={routineRetailTotal:Number(t.bcOrderRoutineRetailTotal)},s={routineRetailTotal:Number(t.rcOrderRoutineRetailTotal)},c={bcOrder:i,rcOrder:s,contactId:Number(t.targetContactId)},e.next=19,t.$request.post("".concat(n,"/newProdCalc"),c);case 19:if(r=e.sent,console.log(c),!r.data){e.next=28;break}console.log(r.data,"res"),t.calcData.achieveProductionAmount=r.data.data.achieveProductionAmount,t.calcData.achieveUnitProductionAmount=r.data.data.achieveUnitProductionAmount,console.log("this.calca",t.calcIntro),e.next=29;break;case 28:return e.abrupt("return");case 29:console.log("this.calcData",t.calcData);case 30:case"end":return e.stop()}}),e)})))()},initData:function(){var t=this;return _()(C.a.mark((function e(){var a,o,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.$route.query,o=a.targetContactId,n=a.levelCode,t.targetContactId=o,t.levelCode=Number(n),t.loadData();case 4:case"end":return e.stop()}}),e)})))()},back:function(){Object(f.b)()}},components:{NavBar:v.a,"van-button":u.a,"van-tabbar":d.a,"van-tabbar-item":l.a,"van-dialog":r.a.Component,"van-field":c.a,"van-row":s.a,"van-col":i.a,"van-sticky":n.a,"van-number-keyboard":o.a}},g=(a("./app/web/page/app/view/calculate/index.vue?vue&type=style&index=0&id=3012b262&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),y=Object(g.a)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coach-home",class:{isAndroid:!t.isIos}},[o("van-sticky",[o("NavBar",{attrs:{"left-text":"返回",title:"绩效计算器",border:!1,"safe-area-inset-top":!0},on:{"click-left":t.back},scopedSlots:t._u([{key:"left",fn:function(){return[o("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0}])})],1),t._v(" "),o("div",{staticClass:"coach-home-content"},[o("div",{staticClass:"income"},[o("div",{staticClass:"income-item income-real"},[o("div",{staticClass:"income-item-num"},[o("span",[t._v("¥"+t._s(t._f("formatMoney")(this.calcIntro.rcOrderRetailAmt))+" ")])]),t._v(" "),o("div",{staticClass:"income-item-desc"},[t._v("顾客订单")])]),t._v(" "),o("div",{staticClass:"income-item income-real"},[o("div",{staticClass:"income-item-num"},[o("span",[t._v(t._s(this.calcIntro.rcRetailPer)+"%")])]),t._v(" "),o("div",{staticClass:"income-item-desc"},[t._v("折扣")])]),t._v(" "),o("div",{staticClass:"line"}),t._v(" "),o("div",{staticClass:"income-item income-target"},[o("div",{staticClass:"income-item-num"},[o("span",[t._v("¥"+t._s(t._f("formatMoney")(this.calcIntro.bcOrderRetailAmt)))])]),t._v(" "),o("div",{staticClass:"income-item-desc"},[t._v("顾问订单")])]),t._v(" "),o("div",{staticClass:"income-item income-target"},[o("div",{staticClass:"income-item-num"},[o("span",[t._v(t._s(this.calcIntro.bcRetailPer)+"%")])]),t._v(" "),o("div",{staticClass:"income-item-desc"},[t._v("折扣")])])]),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"content-bg"},[o("img",{attrs:{src:a("./app/web/page/app/images/index/icon_hot.png"),alt:""}}),t._v(" "),o("span",{staticClass:"content-bg-text"},[t._v(t._s(this.calcIntro.retailPerDescribe))])])]),t._v(" "),o("div",{staticClass:"content"},[t._m(0),t._v(" "),o("div",{staticClass:"content-intro"},[o("p",{staticClass:"content-intro-title"},[t._v("从玫琳凯之窗下单")]),t._v(" "),o("div",{staticClass:"numKey",on:{click:function(e){return t.goNumber("bcOrderRoutineRetailTotal")}}},[o("span",[t._v(" "+t._s(t.bcOrderRoutineRetailTotal))]),t._v(" "),""==this.bcOrderRoutineRetailTotal?o("span",[t._v("请输入实付金额")]):t._e()])]),t._v(" "),o("div",{staticClass:"content-intro content-intro-sec"},[o("p",{staticClass:"content-intro-title"},[t._v("从玫琳凯中国官方商城下单")]),t._v(" "),o("div",{staticClass:"numKey",on:{click:function(e){return t.goNumber("rcOrderRoutineRetailTotal")}}},[o("span",[t._v(" "+t._s(t.rcOrderRoutineRetailTotal))]),t._v(" "),""==this.rcOrderRoutineRetailTotal?o("span",[t._v("请输入实付金额")]):t._e()])]),t._v(" "),o("div",{staticClass:"content-mes"},[t._v("\n          注意：输入的订单金额为订单折扣前的支付金额（促销折扣后金额，不含兑换的产品点数、优惠券、运费等）。\n        ")]),t._v(" "),o("div",{staticClass:"content-btn"},[o("div",{staticClass:"content-btn-clear",on:{click:t.clear}},[t._v("清空")]),t._v(" "),o("div",{staticClass:"content-btn-save",on:{click:function(e){return t.goCalc()}}},[t._v("计算绩效")])])]),t._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"content-calc"},[o("p",{staticClass:"content-title"},[t._v("计算结果")]),t._v(" "),o("div",{staticClass:"content-outcome"},[o("div",{staticClass:"content-outcome-text"},[t._v("当前个人绩效")]),t._v(" "),o("div",{staticClass:"content-outcome-num"},[t._v("\n              "+t._s(this.calcIntro.productionAmount)+"\n            ")])]),t._v(" "),o("div",{staticClass:"content-outcome"},[o("div",{staticClass:"content-outcome-text"},[t._v("订购后个人绩效")]),t._v(" "),o("div",{staticClass:"content-outcome-num"},[t._v("\n              "+t._s(this.calcData.achieveProductionAmount)+"\n            ")])]),t._v(" "),this.levelCode>=60?o("div",{staticClass:"content-outcome"},[o("div",{staticClass:"content-outcome-text"},[t._v("当前沙龙绩效")]),t._v(" "),o("div",{staticClass:"content-outcome-num"},[t._v("\n              "+t._s(this.calcIntro.unitProductionAmount)+"\n            ")])]):t._e(),t._v(" "),this.levelCode>=60?o("div",{staticClass:"content-outcome"},[o("div",{staticClass:"content-outcome-text"},[t._v("订购后沙龙绩效")]),t._v(" "),o("div",{staticClass:"content-outcome-num"},[t._v("\n              "+t._s(this.calcData.achieveUnitProductionAmount)+"\n            ")])]):t._e()])])]),t._v(" "),o("van-number-keyboard",{attrs:{show:t.show,theme:"custom","close-button-text":"完成","hide-on-click-outside":!0,"z-index":t.zIndex},on:{blur:function(e){t.show=!1,t.fullscreen=!1},input:t.onInput,delete:t.onDelete},model:{value:t.pro,callback:function(e){t.pro=e},expression:"pro"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-calc"},[e("p",{staticClass:"content-title"},[this._v("—本月在线订购—")])])}],!1,null,"3012b262",null);e.default=y.exports},"./app/web/page/app/view/calculate/index.vue?vue&type=style&index=0&id=3012b262&lang=less&scoped=true&":function(t,e,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/calculate/index.vue?vue&type=style&index=0&id=3012b262&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/calculate/index.vue?vue&type=style&index=0&id=3012b262&lang=less&scoped=true&":function(t,e,a){}}]);