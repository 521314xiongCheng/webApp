(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./app/web/page/app/images/addNote.png":function(e,t,a){e.exports=a.p+"img/addNote.747f4c48.png"},"./app/web/page/app/images/chose.png":function(e,t,a){e.exports=a.p+"img/chose.10e31fc4.png"},"./app/web/page/app/images/index/icon_search.png":function(e,t,a){e.exports=a.p+"img/icon_search.16d4819f.png"},"./app/web/page/app/images/loading_back.gif":function(e,t,a){e.exports=a.p+"img/loading_back.ec7da429.gif"},"./app/web/page/app/images/un-chose.png":function(e,t,a){e.exports=a.p+"img/un-chose.0d24ccb7.png"},"./app/web/page/app/view/note/index.vue":function(e,t,a){"use strict";a.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("img",{staticClass:"loadchange",attrs:{src:a("./app/web/page/app/images/loading_back.gif"),alt:""}})])}],s=(a("./node_modules/vant/es/button/style/index.js"),a("./node_modules/vant/es/button/index.js")),o=(a("./node_modules/vant/es/sticky/style/index.js"),a("./node_modules/vant/es/sticky/index.js")),i=(a("./node_modules/vant/es/popup/style/index.js"),a("./node_modules/vant/es/popup/index.js")),l=(a("./node_modules/vant/es/swipe-cell/style/index.js"),a("./node_modules/vant/es/swipe-cell/index.js")),c=(a("./node_modules/vant/es/cell/style/index.js"),a("./node_modules/vant/es/cell/index.js")),d=(a("./node_modules/vant/es/list/style/index.js"),a("./node_modules/vant/es/list/index.js")),r=(a("./node_modules/vant/es/nav-bar/style/index.js"),a("./node_modules/vant/es/nav-bar/index.js")),u=(a("./node_modules/vant/es/dialog/style/index.js"),a("./node_modules/vant/es/dialog/index.js")),p=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),g=a.n(p),f=a("./node_modules/@babel/runtime/regenerator/index.js"),v=a.n(f),b=a("./app/web/page/app/utils/index.js"),m={mixins:[a("./app/web/page/app/mixin/horizontalScreen.js").a],data:function(){return{isIos:Object(b.l)(),notecheck:!1,finished:!1,loading:!0,loadChange:!1,notechecklist:[],tabActive:0,name:"",listLoading:" ",loadingText:" ",finishedText:"",listShow:!0,noteList:[],filter:{pageSize:20,pageNo:1,labelType:1,followContactId:""},tabdate:[{noteDate:"",labelType:"今天"},{noteDate:"",labelType:"将来"},{noteDate:"",labelType:"过去"}]}},created:function(){this.name=this.$route.query.name+"的教练笔记"},mounted:function(){var e=this;this.$jsBridge.onFronted((function(){e.onFronted()})),this.loadDate()},methods:{goNoteinfo:function(e){var t="".concat(window.location.origin,"/addNote"),a={opaque:!1,name:this.$route.query.name,levelCode:this.$route.query.levelCode,followed:this.$route.query.followed};e?(a.noteId=e.noteId,a.targetContactId=this.$route.query.targetContactId):(a.targetContactId=this.$route.query.targetContactId,a.fullscreen=!0),this.$go(t,a)},back:function(){Object(b.b)()},goSearch:function(){var e="".concat(window.location.origin,"/note_search"),t={targetContactId:this.$route.query.targetContactId,followed:this.$route.query.followed};this.$go(e,t)},onFronted:function(){var e=this;return g()(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.filter.pageNo=1,e.noteList=[],e.loadDate();case 3:case"end":return t.stop()}}),t)})))()},goNewNote:function(e,t){var a=this;return g()(v.a.mark((function n(){var s,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.noteList[t].isFinished=!a.noteList[t].isFinished,a.loadChange=!0,s=e.noteId,o=a.$ctx.baseApi,n.next=6,a.$request.put("".concat(o,"/notes/").concat(s,"?updateType=2&followContactId=").concat(a.$route.query.targetContactId,"&contactId=").concat(a.$route.query.followed));case 6:n.sent,a.noteList=[],a.filter.pageNo=1,a.listShow=!1,a.loading=!0,a.loadData();case 12:case"end":return n.stop()}}),n)})))()},tabChange:function(e){this.tabActive=e,this.filter.labelType=e+1,this.filter.pageNo=1,this.noteList=[],this.finishedText="",this.loadData()},goDelete:function(e){var t=this;return g()(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:u.a.confirm({title:"",message:"确认删除该条记录吗",className:"test",allowHtml:!0}).then((function(){t.Deletenote(e)})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},Deletenote:function(e){var t=this;return g()(v.a.mark((function a(){var n,s,o,i,l;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.$ctx.baseApi,s={followContactId:t.$route.query.targetContactId,contactId:t.$route.query.followed},a.next=4,t.$request.delete("".concat(n,"/notes/").concat(e),{params:s});case 4:return a.sent,t.filter.pageNo=1,t.noteList=t.noteList.filter((function(t){return t.noteId!=e})),t.noteList.length>0?(t.finishedText="没有更多了",t.listShow=!0):(t.finishedText="",t.listShow=!1),a.next=10,t.$request.get("".concat(n,"/notes/label"),{params:s});case 10:for(l in o=a.sent,i=o.data)i[l]&&(i[l]=i[l].replace(/-/g,"/"));t.tabdate[1].noteDate=i.futureDate,t.tabdate[2].noteDate=i.pastDate;case 15:case"end":return a.stop()}}),a)})))()},loadData:function(){var e=this;return g()(v.a.mark((function t(){var a,n,s,o,i,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,(n=e.filter).contactId=e.$route.query.followed,n.followContactId=e.$route.query.targetContactId,t.next=6,e.$request.get("".concat(a,"/notes"),{params:n});case 6:for(l in s=t.sent,(o=s.data).hasNextPage?e.finished=!1:e.finished=!0,i=o.notes,e.noteList=e.noteList.concat(i),e.noteList.length>0?(e.finishedText="没有更多了",e.listShow=!0):(e.finishedText="",e.listShow=!1),e.noteList)e.noteList[l].noteDate=e.noteList[l].noteDate.replace(/-/g,"/").substring(e.noteList[l].noteDate.length-5);e.filter.pageNo=e.filter.pageNo+1,e.loading=!1,e.loadChange=!1;case 16:case"end":return t.stop()}}),t)})))()},loadDate:function(){var e=this;return g()(v.a.mark((function t(){var a,n,s,o,i,l,c,d,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,n={followContactId:e.$route.query.targetContactId,contactId:e.$route.query.followed},t.next=4,e.$request.get("".concat(a,"/notes/label"),{params:n});case 4:for(i in s=t.sent,o=s.data)o[i]&&(o[i]=o[i].replace(/-/g,"/"));o.futureDate&&o.todayDate?(e.tabActive=0,e.filter.labelType=1):null==o.todayDate&&o.futureDate?(e.tabActive=1,e.filter.labelType=2):(e.tabActive=0,e.filter.labelType=1),l=new Date,c=l.getFullYear(),d=l.getMonth()+1>=10?l.getMonth()+1:"0"+(l.getMonth()+1),r=l.getDate()>=10?l.getDate():"0"+l.getDate(),e.tabdate[0].noteDate="".concat(c,"/").concat(d,"/").concat(r),e.tabdate[1].noteDate=o.futureDate,e.tabdate[2].noteDate=o.pastDate,e.loadData();case 16:case"end":return t.stop()}}),t)})))()}},components:{NavBar:r.a,List:d.a,"van-cell":c.a,"van-swipe-cell":l.a,"van-popup":i.a,"van-sticky":o.a,"van-button":s.a}},h=(a("./app/web/page/app/view/note/index.vue?vue&type=style&index=0&id=29c2cca0&lang=less&scoped=true&"),a("./app/web/page/app/view/note/index.vue?vue&type=style&index=1&lang=css&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),x=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"coach-home",class:{isfullscreen:e.isFullScreen,isAndroid:!e.isIos}},[n("div",{staticClass:"coach-home-content"},[n("van-sticky",[n("NavBar",{attrs:{"left-text":"返回",title:e.name,border:!1,"safe-area-inset-top":!0},on:{"click-left":e.back},scopedSlots:e._u([{key:"left",fn:function(){return[n("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0},{key:"right",fn:function(){return[n("img",{staticClass:"icon-search",attrs:{src:a("./app/web/page/app/images/index/icon_search.png"),alt:""},on:{click:function(t){return e.goSearch()}}})]},proxy:!0}])})],1),e._v(" "),n("div",{staticClass:"tabbar-container"},[n("div",{staticClass:"tabbar"},e._l(this.tabdate,(function(t,a){return n("div",{key:a,staticClass:"tabbar-box",class:{tabbaractive:e.tabActive==a,tabActiveLast:2==a},on:{click:function(t){return e.tabChange(a)}}},[n("div",{staticClass:"tabbar-box-label"},[e._v(e._s(t.labelType))]),e._v(" "),n("div",{staticClass:"tabbar-box-notedate"},[e._v(e._s(t.noteDate))])])})),0)]),e._v(" "),e.listShow?n("List",{attrs:{finished:e.finished,"finished-text":e.finishedText},on:{load:e.loadData},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("div",{staticClass:"list"},e._l(this.noteList,(function(t,s){return n("van-swipe-cell",{key:s,staticClass:"list-content-info",scopedSlots:e._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(a){return e.goDelete(t.noteId)}}})]},proxy:!0}],null,!0)},[[n("div",{staticClass:"list-content-m",on:{click:function(a){return a.stopPropagation(),e.goNoteinfo(t)}}},[n("div",{on:{click:function(a){return a.stopPropagation(),e.goNewNote(t,s)}}},[t.isFinished?n("span",[n("img",{attrs:{src:a("./app/web/page/app/images/chose.png"),alt:""}})]):n("span",[n("img",{attrs:{src:a("./app/web/page/app/images/un-chose.png"),alt:""}})])]),e._v(" "),n("div",{staticClass:"list-content-m-mes",class:{"list-content-m-meslong":1==t.labelType}},[e._v("\n                "+e._s(t.noteContent)+"\n              ")]),e._v(" "),"1"!=t.labelType?n("div",{staticClass:"list-content-m-date"},[e._v("\n                "+e._s(t.noteDate)+"\n              ")]):e._e()])]],2)})),1)]):e._e(),e._v(" "),e.listShow?e._e():n("div",{staticClass:"nodate"},[e._v("你尚未添加任何内容")]),e._v(" "),n("div",{staticClass:"addNote",on:{click:function(t){return e.goNoteinfo()}}},[n("img",{attrs:{src:a("./app/web/page/app/images/addNote.png"),alt:""}})]),e._v(" "),this.loadChange?n("div",{staticClass:"loading"},[e._m(0)]):e._e()],1)])}),n,!1,null,"29c2cca0",null);t.default=x.exports},"./app/web/page/app/view/note/index.vue?vue&type=style&index=0&id=29c2cca0&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/note/index.vue?vue&type=style&index=0&id=29c2cca0&lang=less&scoped=true&")},"./app/web/page/app/view/note/index.vue?vue&type=style&index=1&lang=css&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/note/index.vue?vue&type=style&index=1&lang=css&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/note/index.vue?vue&type=style&index=0&id=29c2cca0&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/note/index.vue?vue&type=style&index=1&lang=css&":function(e,t,a){}}]);