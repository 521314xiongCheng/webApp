(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./app/web/page/app/components/commonTable.vue":function(e,t,a){"use strict";var n={name:"table-list",props:{tableData:Object,border:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1},setClassName:Function},data:function(){return{loadingText:"拼命加载中"}},mounted:function(){},methods:{sortChange:function(e){this.$emit("sortChange",e)},headerClick:function(e,t){this.$emit("headerClick",e,t)},rowClickchange:function(e){this.$emit("rowClickchange",e)},cellClick:function(e,t,a,n){this.$emit("cellClick",{row:e,column:t,event:a,cell:n})}}},s=(a("./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-table"},[a("el-table",{ref:"commonTable",attrs:{data:e.tableData.data,stripe:!0,"element-loading-text":e.loadingText,"show-header":e.tableData.showHeader,height:e.tableData.height,"header-cell-class-name":"common-table-header","cell-class-name":e.setClassName,border:e.border},on:{"sort-change":e.sortChange,"header-click":e.headerClick,"row-click":e.rowClickchange,"cell-click":e.cellClick}},[e._t("between"),e._v(" "),e._l(e.tableData.header,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,fixed:t.fixed,"min-width":t.minWidth,"max-width":t.maxWidth,sortable:t.sortable,"sort-orders":["descending","ascending",null],align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(t.formatter?t.formatter(n.row,n.$index):n.row[t.prop]))])]}}],null,!0)})})),e._v(" "),e._t("default")],2)],1)}),[],!1,null,"797892fe",null);t.a=i.exports},"./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&")},"./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue":function(e,t,a){"use strict";a("./node_modules/vant/es/dropdown-item/style/index.js");var n=a("./node_modules/vant/es/dropdown-item/index.js"),s=(a("./node_modules/vant/es/dropdown-menu/style/index.js"),a("./node_modules/vant/es/dropdown-menu/index.js")),i=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=a.n(i),r=a("./node_modules/element-ui/src/utils/clickoutside.js"),l=a("./app/web/page/app/utils/index.js"),c={name:"filterActionSheet",data:function(){return{filterResult:{},filterCopy:{},isOpen:!1,filterText:"筛选"}},props:{filterConfig:{type:Array,default:function(){return[]}},filter:{type:Object,default:function(){return{accountType:""}}},total:{type:Number,default:0},pageName:{type:String,default:"UnitDetailsPage"},filterClickEventName:{type:String,default:"UnitDetailsFilterClick"},tagEventName:{type:String,default:"UnitDetailsFilterTagClick"},resetEventName:{type:String,default:"UnitDetailsFilterResetClick"},confirmEventName:{type:String,default:"UnitDetailsFilterConfirmClick"}},mounted:function(){var e=this.$route.query.accountType;this.accountType=e},methods:{setFilterText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"筛选";this.filterText=e},opened:function(){var e=this;this.$track({context:this.pageName,behavior:this.filterClickEventName,item_type:this.pageName,item_id:this.filterClickEventName,attributes:{isEmployee:"operation"===this.accountType}}),this.$emit("filterActionIsOpen",!0),this.isOpen=!0,document.querySelector(".van-overlay").addEventListener("click",(function(){e.clickOverlay()}))},close:function(){this.$emit("filterActionIsOpen",!1)},initFilterConfig:function(){var e=this;this.filterConfig.forEach((function(t){var a=t.prop,n=t.multiple,s=void 0===n||n,i=t.options;e.filterResult[a]=s?e.filter[a]?e.filter[a]:[]:e.filter[a]?e.filter[a]:null,i.forEach((function(t){s?e.filter[a]&&Object(l.p)(t.value,e.filter[a])?(e.$set(t,"selected",!0),e.filterText="已筛选"):e.$set(t,"selected",!1):t.value===e.filter[a]?(e.$set(t,"selected",!0),e.filterText="已筛选"):e.$set(t,"selected",!1)}))})),this.filterCopy=Object(l.d)(this.filterResult)},selectItem:function(e,t){var a,n=this,s=t.prop,i=t.multiple,r=void 0===i||i;this.$track({context:this.pageName,behavior:this.tagEventName,item_type:this.pageName,item_id:this.tagEventName,attributes:(a={},o()(a,s,e.value),o()(a,"isEmployee","operation"===this.accountType),a)}),r?this.filterResult[s].includes(e.value)?(this.filterResult[s].splice(this.filterResult[s].findIndex((function(t){return t===e.value})),1),this.$set(e,"selected",!1)):(this.filterResult[s].push(e.value),this.$set(e,"selected",!0)):this.filterResult[s]===e.value?(this.filterResult[s]=null,this.$set(e,"selected",!1)):(this.filterResult[s]=e.value,this.filterConfig.forEach((function(e){e.prop===s&&e.options.forEach((function(e){n.$set(e,"selected",!1)}))})),this.$set(e,"selected",!0))},clickOverlay:function(){var e=this;this.isOpen&&(this.filterConfig.forEach((function(t){var a=t.prop,n=t.multiple,s=void 0===n||n;t.options.forEach((function(t){e.$set(t,"selected",!1),s?e.filterCopy[a].findIndex((function(e){return e===t.value}))>-1&&e.$set(t,"selected",!0):e.filterCopy[a]===t.value&&e.$set(t,"selected",!0)}))})),this.filterResult=Object(l.d)(this.filterCopy))},filterReset:function(){var e=this;this.$track({context:this.pageName,behavior:this.resetEventName,item_type:this.pageName,item_id:this.resetEventName,attributes:{isEmployee:"operation"===this.accountType}}),console.log("filterConfig",this.filterConfig),this.filterConfig.forEach((function(t){var a=t.prop,n=t.multiple,s=void 0===n||n,i=t.options;e.filterResult[a]=s?[]:null,i.forEach((function(t){e.$set(t,"selected",!1)}))}))},filterConfirm:function(){var e=this;this.$track({context:this.pageName,behavior:this.confirmEventName,item_type:this.pageName,item_id:this.confirmEventName,attributes:{isEmployee:"operation"===this.accountType}});var t=!1;Object.keys(this.filterResult).forEach((function(a){Array.isArray(e.filterResult[a])?e.filterResult[a].length&&(t=!0):null!==e.filterResult[a]&&(t=!0)})),this.filterText=t?"已筛选":"筛选",this.filterCopy=Object(l.d)(this.filterResult),this.$refs.dropdownMenu.toggle(),this.$emit("filterConfirm",this.filterResult)}},components:{"van-dropdown-menu":s.a,"van-dropdown-item":n.a},directives:{Clickoutside:r.a}},p=(a("./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue?vue&type=style&index=0&id=6d8bb1f7&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),u=Object(p.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-dropdown-menu",[a("van-dropdown-item",{directives:[{name:"Clickoutside",rawName:"v-Clickoutside",value:e.clickOverlay,expression:"clickOverlay"}],ref:"dropdownMenu",on:{opened:e.opened,close:e.close},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"title"},[a("span",[e._v("\n          "+e._s(e.filterText)+"\n        ")]),e._v(" "),a("span",{staticClass:"num"},[e._v("("+e._s(e.total)+")")])])]},proxy:!0}])},[e._v(" "),a("div",{staticClass:"filter-content"},[a("div",{staticClass:"filter-type"},e._l(e.filterConfig,(function(t){return a("div",{key:t.prop},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.options&&t.options.length,expression:"filter.options && filter.options.length"}],staticClass:"filter-type-cell"},[a("div",{staticClass:"filter-type-title"},[e._v(e._s(t.label))]),e._v(" "),a("div",[t.showSubTitle?a("div",{staticClass:"filter-type-subtitle"},[e._v("\n                "+e._s(t.subTitle)+"：\n              ")]):e._e(),e._v(" "),a("div",{staticClass:"filter-type-content"},e._l(t.options,(function(n){return a("span",{key:n.value,class:{is_active:n.selected},on:{click:function(a){return e.selectItem(n,t)}}},[e._v("\n                  "+e._s(n.name)+"\n                ")])})),0)])])])})),0),e._v(" "),a("div",{staticClass:"filter-button"},[a("span",{staticClass:"filter-button-reset",on:{click:e.filterReset}},[e._v("重置")]),e._v(" "),a("span",{staticClass:"filter-button-confirm",on:{click:e.filterConfirm}},[e._v("确认")])])])])],1)}),[],!1,null,"6d8bb1f7",null);t.a=u.exports},"./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue?vue&type=style&index=0&id=6d8bb1f7&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue?vue&type=style&index=0&id=6d8bb1f7&lang=less&scoped=true&")},"./app/web/page/app/images/crown.png":function(e,t,a){e.exports=a.p+"img/crown.25c5a039.png"},"./app/web/page/app/images/icon_q.png":function(e,t,a){e.exports=a.p+"img/icon_q.62693319.png"},"./app/web/page/app/images/index/icon_search.png":function(e,t,a){e.exports=a.p+"img/icon_search.16d4819f.png"},"./app/web/page/app/images/nodata1.png":function(e,t,a){e.exports=a.p+"img/nodata1.75567d78.png"},"./app/web/page/app/images/portraitscreen.png":function(e,t,a){e.exports=a.p+"img/portraitscreen.562c5e20.png"},"./app/web/page/app/images/refresh-icon.gif":function(e,t,a){e.exports=a.p+"img/refresh-icon.4584a5b2.gif"},"./app/web/page/app/images/screen.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAjCAYAAAAJ+yOQAAAAAXNSR0IArs4c6QAAAptJREFUWEftmEuIjmEUx39/19xKShTJWBgLIpeVIkNTFhi3hVi5lWRsFBsbOxaSZMNsZ6EYciulrC1QRNiMFQahjLv+Ol/PN73zNpd3yPd+as7m6/ue85z3953nPOec94j/QJRltL0cWAdMBUb8If8X4D7QLqm7asP2TGAJ8BV4BTyS9KvIM3ogbZ8CDhbZVFCnE2iW9Dz0bbcAHZm9H4CLwAlJzwayWYG0fRQ4VvDhQ1F7CiyU9M32UmA/MAFoBOan0wrPHpZ0uj/Dsj0e6EqbQ+8ecBP4MRSajG4DsAMYmX7bK+lc3pbtOcAhYDcwGjgj6UBfzwzIZcDdtBjxNEPS+z8ErGyzfRbYl2xEbG7vz57tpnTsk4E9ks7ndQNyJXAnLXRKCk/8ldiO2I4YD7ksaeNABm2vAG4Dn4DZkj5m9esCMnm/DdgJHJF0vK4gbS8ApgCLgZPA47jxCfK6pLele9J2c4QEMC4XEteALZEZSodMR70GuAJEpgm5BGyT9D2+1AVkAl0FXE03fZekn1XP1g1kAp0IdEtyaRfH9qjIw3GCGYheQJFmgTeSImdXpGaetD0WeADMK5CEo1S2A63RpNQSMmr1wwKAWZUOSZtqCRm1/AKwIVPXizA31gyyCE26PGOAJ0A0ICHr6w4ygUbTvChBtgxDJk8M2gXlQ8H2sCcrThlqPznsyf7SSimeTDX3FjA3B/YCWC0pyliPlAUZ3clLID6z8hmYJeld6ZDpMkwDpucguyQFfC8pxZNFS1pV719Alvre3ZcD+krmNZtgpEHE2lzTm+eMaUYrMCktNNVyFhQxHdkgmt+iEheyoZZTtZiMxIStOiMaDDTS2mZJN2o2n0wZYisw2HGH6mugrTo27AU52F8ra/03X6TueCK+7EgAAAAASUVORK5CYII="},"./app/web/page/app/images/select.png":function(e,t,a){e.exports=a.p+"img/select.65b9fd04.png"},"./app/web/page/app/view/operation/areadiq/areadiq.vue":function(e,t,a){"use strict";a.r(t);a("./node_modules/vant/es/popup/style/index.js");var n=a("./node_modules/vant/es/popup/index.js"),s=(a("./node_modules/vant/es/pull-refresh/style/index.js"),a("./node_modules/vant/es/pull-refresh/index.js")),i=(a("./node_modules/vant/es/sticky/style/index.js"),a("./node_modules/vant/es/sticky/index.js")),o=(a("./node_modules/vant/es/action-sheet/style/index.js"),a("./node_modules/vant/es/action-sheet/index.js")),r=(a("./node_modules/vant/es/icon/style/index.js"),a("./node_modules/vant/es/icon/index.js")),l=(a("./node_modules/vant/es/field/style/index.js"),a("./node_modules/vant/es/field/index.js")),c=(a("./node_modules/vant/es/tabbar-item/style/index.js"),a("./node_modules/vant/es/tabbar-item/index.js")),p=(a("./node_modules/vant/es/tabbar/style/index.js"),a("./node_modules/vant/es/tabbar/index.js")),u=(a("./node_modules/vant/es/button/style/index.js"),a("./node_modules/vant/es/button/index.js")),d=(a("./node_modules/vant/es/tabs/style/index.js"),a("./node_modules/vant/es/tabs/index.js")),m=(a("./node_modules/vant/es/tab/style/index.js"),a("./node_modules/vant/es/tab/index.js")),f=(a("./node_modules/vant/es/nav-bar/style/index.js"),a("./node_modules/vant/es/nav-bar/index.js")),h=(a("./node_modules/vant/es/list/style/index.js"),a("./node_modules/vant/es/list/index.js")),v=a("./node_modules/@babel/runtime/helpers/extends.js"),g=a.n(v),b=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),_=a.n(b),x=a("./node_modules/@babel/runtime/regenerator/index.js"),y=a.n(x),C=a("./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue"),w=a("./app/web/page/app/components/commonTable.vue"),T=a("./app/web/page/app/utils/index.js"),A={mixins:[a("./app/web/page/app/mixin/horizontalScreen.js").a],data:function(){var e=this;return{currentTabName:"assess",showTable:!0,popupRule:!1,isSelf:!1,currentData:{},isFullScreen:!1,isEmployee:!0,tableName:"area-diq",showActions:!1,levelCode:97,isIos:Object(T.l)(),contactId:"",loading:!0,finished:!1,tableData:{data:[],header:[]},applyHeader:[{label:"累计零售\n绩效",width:80,prop:"totalProductionAmt",formatter:function(e){return Object(T.f)(e.totalProductionAmt)}},{label:"零售绩效\n达成4800",width:80,prop:"productionAmtReachedStatus",formatter:function(e){return e.productionAmtReachedStatus?"已达成":"未达成"}},{label:"培养A状态\n顾问数",width:80,prop:"trainAContactNum",formatter:function(e){return"".concat(e.trainAContactNum,"/10")}},{label:"DIQ网上申请\n和自测",width:90,prop:"onlineSelfExamStatus",formatter:function(e){switch(e.onlineSelfExamStatus){case 0:return"未自测";case 1:return"已通过";case 2:return"未通过"}}},{label:"是否有行为\n规范处理",width:90,prop:"citationStatus"},{label:"督导姓名",prop:"directorName"}],assessHeader:[{label:"DIQ考核\n月份",prop:"assessMonthNo",formatter:function(t){return e.assessMonthNoMap(t.assessMonthNo)}},{label:"累计零售\n绩效",prop:"productionAmt",formatter:function(e){return Object(T.f)(e.productionAmt)}},{label:"零售绩效\n达成4800",prop:"isProductionReach",formatter:function(e){return e.isProductionReach?"已达成":"未达成"}},{label:"累计DIQ\n沙龙绩效",prop:"diqProductionAmt",formatter:function(e){return Object(T.f)(e.diqProductionAmt)}},{label:"DIQ沙龙绩效\n达成45000",prop:"isDiqProductionReach",minWidth:"90px",formatter:function(e){return e.isDiqProductionReach?"已达成":"未达成"}},{label:"DIQ沙龙成员\nA成员",prop:"activeConsultantCount",minWidth:"90px"},{label:"DIQ沙龙成员\n达成20A",prop:"isActiveConsultantCountReach",minWidth:"90px",formatter:function(e){return e.isActiveConsultantCountReach?"已达成":"未达成"}},{label:"每月A状态",prop:"isActiveEveryMonth",formatter:function(t){var a=Number(e.$route.query.monthKey.substr(4,6));return t.isActiveEveryMonth?"已达成":"".concat(a,"月未达成")}},{label:"是否有行为\n规范处理",prop:"citationDate",formatter:function(e){return e.citationDate?e.citationDate:"-"}},{label:"督导姓名",prop:"directorName"}],filterParams:{},filterText:"筛选",filterSheet:!1,total:0,filter:{pageSize:20,pageNo:1,sortEnum:null,orderEnum:null},filterConfig:[],applyFilterConfig:[{prop:"productionAmtReachedStatus",label:"累计零售绩效",multiple:!1,options:[{name:"已达成",value:1},{name:"未达成",value:0}]},{prop:"trainAContactStatus",label:"直接培养A状态",multiple:!1,options:[{name:"已达成",value:1},{name:"未达成",value:0}]},{prop:"onlineSelfExamStatus",label:"网上申请与自测",multiple:!1,options:[{name:"已通过",value:1},{name:"未通过",value:2},{name:"未自测",value:0}]},{prop:"citationStatus",label:"是否行为规范处理",multiple:!1,options:[{name:"是",value:1},{name:"否",value:0}]}],assessFilterConfig:[{prop:"assessMonthNo",label:"考核月份",options:[{name:"第一月",value:"0"},{name:"第二月",value:"1"},{name:"第三月",value:"2"},{name:"第四月",value:"3"}]},{prop:"isProductionReach",label:"零售绩效",multiple:!1,options:[{name:"已达成",value:!0},{name:"未达成",value:!1}]},{prop:"isDiqProductionReach",label:"DIQ沙龙绩效",multiple:!1,options:[{name:"已达成",value:!0},{name:"未达成",value:!1}]},{prop:"isActiveConsultantCountReach",label:"DIQ沙龙成员达成20A",multiple:!1,options:[{name:"已达成",value:!0},{name:"未达成",value:!1}]},{prop:"isActiveEveryMonth",label:"每月A状态",multiple:!1,options:[{name:"已达成",value:!0},{name:"未达成",value:!1}]},{prop:"isCitation",label:"是否行为规范处理",multiple:!1,options:[{name:"是",value:!0},{name:"否",value:!1}]},{prop:"diqDebuteCountDTO",label:"生日周年",multiple:!0,options:[{name:"生日周年",value:1},{name:"美容顾问周年",value:2}]},{prop:"isOrder",label:"是否下单",multiple:!1,options:[{name:"已下单",value:!0},{name:"未下单",value:!1}]}],refreshing:!1,refreshDisable:!1,navBarClientHeight:0,pageName:"StaffDIQDetailsPage",landscapeEventName:"DIQDetailsLandscapeClick"}},created:function(){var e=this;return _()(y.a.mark((function t(){var a,n,s,i,o,r,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.$route.query,n=a.levelCode,s=a.targetContactId,i=a.isSelf,o=a.isOrder,r=a.isNewBc,l=a.tabType,void 0!==o&&(e.filter.isOrder=JSON.parse(o)),void 0!==r&&(e.filter.isNewBc=JSON.parse(r)),e.levelCode=Number(n),e.isSelf=JSON.parse(i),e.targetContactId=s,e.currentTabName=l||"apply",console.log(e.currentTabName),e.filterConfig=e["".concat(e.currentTabName,"FilterConfig")],console.log(e.filterConfig),e.tableData.header=e["".concat(e.currentTabName,"Header")],e.loadData(),"assess"===e.currentTabName?e.getFilterConditions():e.$nextTick((function(){e.$refs.filterAction.initFilterConfig()})),setTimeout((function(){e.$refs.tabs.resize()}),80);case 14:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.$jsBridge.onFronted((function(){e.onFronted()})),this.fixedHeader()},methods:{fixedHeader:function(){var e=this,t=document.querySelector(".van-nav-bar"),a=document.querySelector(".unit-home-content-wrap"),n=document.querySelector(".el-table__header-wrapper"),s=document.querySelector(".el-table__body-wrapper"),i=document.querySelector(".common-table");window.addEventListener("scroll",(function(o){if(e.navBarClientHeight=t.clientHeight,!(i.clientHeight+a.clientHeight+t.clientHeight<=screen.height)){var r=document.querySelector(".el-table__fixed-header-wrapper"),l=document.querySelector(".el-table__fixed-body-wrapper"),c=document.documentElement.scrollTop||document.body.scrollTop;e.isFullScreen||(c>0?(r.style.cssText="position: fixed;top: ".concat(t.clientHeight+a.clientHeight-1,"px;width: 130px;z-index: 4;overflow: hidden;"),l.style.cssText="top: ".concat(n.clientHeight+a.clientHeight-1,"px"),a.style.cssText="position: fixed;top: ".concat(t.clientHeight,"px;right: 0;z-index: 5;width: 100%;"),n.style.cssText="position: fixed;top: ".concat(t.clientHeight+a.clientHeight-1,"px;z-index: 3;"),s.style.cssText="padding-top: ".concat(n.clientHeight+a.clientHeight-1,"px")):(r.style.cssText="position: absolute;top: 0",l.style.cssText="padding-top:0;top: ".concat(r.clientHeight,"px;"),a.style.cssText="position: unset;",n.style.cssText="position: unset;",s.style.cssText="padding-top: 0;"))}}))},initTableFixed:function(){var e=document.querySelector(".unit-home-content-wrap"),t=document.querySelector(".el-table__header-wrapper"),a=document.querySelector(".el-table__body-wrapper"),n=document.querySelector(".el-table__fixed-header-wrapper"),s=document.querySelector(".el-table__fixed-body-wrapper");console.log("tableFixedHeaderWrap:".concat(n,",tableFixedBodyWrap:").concat(s)),e.style.cssText="position: unset;",t&&(t.style.cssText="position: unset;"),a&&(a.style.cssText="padding-top: 0;"),n&&(n.style.cssText="position: absolute;top: 0"),s&&(s.style.cssText="padding-top:0;top: ".concat(n.clientHeight,"px;")),window.scrollTo(0,0)},handleTabClick:function(e){var t=this;this.initTableFixed(),this.currentTabName=e,this.filterConfig=this["".concat(e,"FilterConfig")],this.tableData.header=this["".concat(e,"Header")],this.filter={pageSize:50,pageNo:1,sortEnum:null,orderEnum:null,offSpringLineNumbers:[]},"assess"===e?this.getFilterConditions():this.$nextTick((function(){t.$refs.filterAction.initFilterConfig()})),this.$refs.filterAction.setFilterText("筛选"),this.filter.pageNo=1,this.tableData.data=[],this.loadData()},filterActionIsOpen:function(e){this.refreshDisable=e},onFronted:function(){var e=this;return _()(y.a.mark((function t(){var a,n,s,i,o,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(T.d)(e.filterParams)).pageNo=1,a.pageSize=e.tableData.data.length||20,n=e.$ctx.baseApi,s="".concat(n,"/reports/employee/area-diq"),"apply"===e.currentTabName&&(s="".concat(n,"/reports/employee/diq/applyperiod")),t.next=8,e.$request.get(s,{params:a});case 8:i=t.sent,o=i.data,r=o.members||o.pageList,e.tableData.data.forEach((function(e,t,a){r.forEach((function(n,s){e.contactId===n.contactId&&a.splice(t,1,n)}))}));case 12:case"end":return t.stop()}}),t)})))()},toSearch:function(){this.$track({context:"StaffDIQDetailsPage",behavior:"DIQDetailsProfileSearchIconClick",item_type:"StaffDIQDetailsPage",item_id:"DIQDetailsProfileSearchIconClick"});var e="".concat(window.location.origin,"/operation_areadiq_search"),t={targetContactId:this.$route.query.targetContactId,monthKey:this.$route.query.monthKey,accountType:"operation",currentTabName:this.currentTabName};this.$go(e,t)},handleClickAvatar:function(e){this.isFullScreen?this.$toast("请返回竖屏下操作～"):(this.currentData=e,this.goProflie())},sortMap:function(e){return{totalProductionAmt:"TOTAL_PRODUCTION_AMT",productionAmtReachedStatus:"PRODUCTION_AMT_REACHED_STATUS",trainAContactNum:"TRAIN_A_CONTACT_NUM",onlineSelfExamStatus:"ONLINE_SELF_EXAM_STATUS",citationStatus:"CITATION_STATUS",offSpringLineNumber:"OFF_SPRING_LINE_NUMBER"}[e]},sortChange:function(e){e.column;var t=e.prop,a=e.order;a?("descending"===a?a="desc":"ascending"===a&&(a="asc"),this.filter.sortEnum=this.sortMap(t),this.filter.orderEnum=a.toLocaleUpperCase()):(this.filter.sortEnum=null,this.filter.orderEnum=null),this.tableData.data=[],this.filter.pageNo=1,this.loadData()},loadData:function(){var e=this;return _()(y.a.mark((function t(){var a,n,s,i,o,r,l,c,p,u,d,m,f,h,v,g,b,_,x,C,w,A,S,N,D;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,a=e.filter,n=a.pageNo,s=a.pageSize,i=a.isActiveConsultantCountReach,o=a.assessMonthNo,r=a.isProductionReach,l=a.isActiveEveryMonth,c=a.isCitation,p=a.isDiqProductionReach,u=a.offSpringLineNumbers,d=a.isOrder,m=a.diqDebuteCountDTO,f=a.onlineSelfExamStatus,h=a.citationStatus,v=a.productionAmtReachedStatus,g=a.trainAContactStatus,b=a.sortEnum,_=a.orderEnum,(x={isActiveConsultantCountReach:i,pageNo:n,pageSize:s,isProductionReach:r,isActiveEveryMonth:l,isCitation:c,isDiqProductionReach:p,isOrder:d,onlineSelfExamStatus:f,citationStatus:h,productionAmtReachedStatus:v,trainAContactStatus:g,sortEnum:b,orderEnum:_}).debuteCount=m,C=e.$ctx.baseApi,o&&o.length&&(x.assessMonthNo=o.join(",")),u&&u.length&&(x.offSpringLineNumbers=u.join(",")),m&&m.length&&(x.debuteCount=m.join(",")),w="".concat(C,"/reports/employee/area-diq"),"apply"===e.currentTabName&&(w="".concat(C,"/reports/employee/diq/applyperiod")),t.next=12,e.$request.get(w,{params:x});case 12:A=t.sent,e.filterParams=Object(T.d)(x),e.total=A.data.total||A.data.totalCount,S=A.data.members||A.data.pageList,A.data.hasNextPage?e.finished=!1:e.finished=!0,N=new Map,D=e.tableData.data.concat(S),e.tableData.data=D.filter((function(e){return!N.has(e.contactId)&&N.set(e.contactId,1)})),e.tableData.data&&e.tableData.data.length?e.showTable=!0:e.showTable=!1,e.loading=!1,e.refreshing=!1,e.filter.pageNo=e.filter.pageNo+1;case 24:case"end":return t.stop()}}),t)})))()},assessMonthNoMap:function(e){switch(e){case 0:return"第一月";case 1:return"第二月";case 2:return"第三月";case 3:return"第四月";case 4:return"第五月";case 5:return"第六月";case 6:return"第七月";case 7:return"第八月";case 8:return"第九月";case 9:return"第十月"}},getFilterConditions:function(){var e=this;return _()(y.a.mark((function t(){var a,n,s,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,t.next=3,e.$request.get("".concat(a,"/reports/employee/area-diq/filter-conditions"));case 3:n=t.sent,s=n.data,i=s.offSpringLineNumbers,o=s.diqDebuteCountDTO,e.filterConfig.forEach((function(e){"offSpringLineNumbers"===e.prop&&i&&(e.options=i.map((function(e){return{name:"".concat(e.offSpringLineNumber,"(").concat(e.dirCount,")"),value:e.offSpringLineNumber}}))),"diqDebuteCountDTO"===e.prop&&o&&(o.birthDebuteCount>0&&(e.options[0].name="生日周年(".concat(o.birthDebuteCount,")")),o.teamDebuteCount>0&&(e.options[1].name="美容顾问周年(".concat(o.teamDebuteCount,")")),o.dirDebuteCount>0&&e.options.push({name:"督导周年(".concat(o.dirDebuteCount,")"),value:3}),o.nsdDebuteCount>0&&e.options.push({name:"首席周年(".concat(o.nsdDebuteCount,")"),value:4}))})),console.log(e.filterConfig,"2"),e.$nextTick((function(){e.$refs.filterAction.initFilterConfig()}));case 9:case"end":return t.stop()}}),t)})))()},addZero:function(e){return e<10?"0".concat(e):e},back:function(){Object(T.b)()},setTargetIncome:function(){var e=this;return _()(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isSelf?e.$refs.setTarget.setTargetIncome():e.baseData.setTargetIncomeAmt||e.share();case 1:case"end":return t.stop()}}),t)})))()},filterConfirm:function(e){this.filter.pageNo=1,this.filter=g()(this.filter,e),this.tableData.data=[],this.loadData()},isFollow:function(){var e=this;return _()(y.a.mark((function t(){var a,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,(n={}).focusContactId=e.currentData.contactId,t.next=5,e.$request.post("".concat(a,"/focus"),n);case 5:t.sent,e.onRefresh(),e.showActions=!1;case 8:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return _()(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.finished=!1,e.refreshing=!0,e.filter.pageNo=1,e.tableData.data=[],e.loadData();case 5:case"end":return t.stop()}}),t)})))()},goProflie:function(){var e="".concat(window.location.origin,"/profile"),t={opaque:!1,targetContactId:this.currentData.contactId,levelCode:this.currentData.careerLevelCode,accountType:"operation",isEmployee:!0,followed:this.$route.query.targetContactId,from:"operation"};this.$go(e,t)},share:function(){var e=this;return _()(y.a.mark((function t(){var a,n,s,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,t.next=3,e.$request.post("".concat(a,"/invite/link"));case 3:n=t.sent,s="".concat(e.$ctx.baseShareUrl,"?linkKey=").concat(n.data.linkKey),i={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"",mediatype:"webpage",scene:"WXSceneSession",url:s},e.$jsBridge.shareToWechat(i);case 7:case"end":return t.stop()}}),t)})))()},setClassName:function(e){e.row;var t=e.column;return"name"===t.property?"cell-class_name":"avatar"===t.property?"cell-class_avatar":"estimateProductionAmt"===t.property?"cell-class_estimateProductionAmt":void 0}},watch:{isFullScreen:function(e){var t=this;if(!e){var a=document.documentElement.scrollTop||document.body.scrollTop;this.$nextTick((function(){var e=document.querySelector(".unit-home-content-wrap"),n=document.querySelector(".el-table__header-wrapper"),s=document.querySelector(".el-table__fixed-header-wrapper"),i=document.querySelector(".el-table__fixed-body-wrapper"),o=document.querySelector(".el-table__body-wrapper"),r=document.querySelector(".common-table");a>0&&r.clientHeight+e.clientHeight+t.navBarClientHeight>t.screenHeight?(s.style.cssText="position: fixed;top: ".concat(t.navBarClientHeight+e.clientHeight-1,"px;width: 130px;z-index: 4;overflow: hidden;"),i.style.cssText="top: ".concat(n.clientHeight+e.clientHeight-1,"px"),e.style.cssText="position: fixed;top: ".concat(t.navBarClientHeight,"px;right: 0;z-index: 5;width: 100%;"),n.style.cssText="position: fixed;top: ".concat(t.navBarClientHeight+e.clientHeight-1,"px;z-index: 3;"),o.style.cssText="padding-top: ".concat(n.clientHeight+e.clientHeight-1,"px")):(s.style.cssText="position: absolute;top: 0",i.style.cssText="padding-top:0;top: ".concat(s.clientHeight,"px;"),e.style.cssText="position: unset;",n.style.cssText="position: unset;",o.style.cssText="padding-top: 0;")}))}},showTable:function(e){var t=this;e&&(window.scrollTo(0,0),this.$nextTick((function(){t.initTableFixed(),t.fixedHeader()})))}},components:{commonTable:w.a,List:h.a,NavBar:f.a,Tab:m.a,Tabs:d.a,"van-button":u.a,"van-tabbar":p.a,"van-tabbar-item":c.a,"van-field":l.a,"van-icon":r.a,dropdowmMenu:C.a,"van-action-sheet":o.a,"van-sticky":i.a,"van-pull-refresh":s.a,"van-popup":n.a}},S=(a("./app/web/page/app/view/operation/areadiq/areadiq.vue?vue&type=style&index=0&id=370f0656&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),N=Object(S.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unit-detail",class:{isAndroid:!e.isIos,isFullScreen:e.isFullScreen}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isFullScreen,expression:"!isFullScreen"}]},[n("van-sticky",[n("NavBar",{attrs:{"left-text":"返回",title:"DIQ跟进",border:!1,"safe-area-inset-top":!0},on:{"click-left":e.back},scopedSlots:e._u([{key:"left",fn:function(){return[n("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0},{key:"title",fn:function(){return[e._v("\n          DIQ跟进\n          "),n("img",{staticClass:"icon_q",attrs:{src:a("./app/web/page/app/images/icon_q.png"),alt:""},on:{click:function(t){e.popupRule=!e.popupRule}}})]},proxy:!0},{key:"right",fn:function(){return[n("img",{staticClass:"icon-search",attrs:{src:a("./app/web/page/app/images/index/icon_search.png"),alt:""},on:{click:e.toSearch}}),e._v(" "),[n("span",{on:{click:function(t){return e.gofullscreen()}}},[n("img",{staticClass:"icon-screen",attrs:{src:a("./app/web/page/app/images/screen.png"),alt:""}})])]]},proxy:!0}])})],1)],1),e._v(" "),n("van-pull-refresh",{attrs:{"head-height":100,disabled:e.refreshDisable},on:{refresh:e.onRefresh},scopedSlots:e._u([{key:"pulling",fn:function(){return[n("div",{staticClass:"refresh-icon"},[n("img",{attrs:{src:a("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),n("p",{staticClass:"refresh-text"},[e._v("下拉刷新")])]},proxy:!0},{key:"loosing",fn:function(){return[n("div",{staticClass:"refresh-icon"},[n("img",{attrs:{src:a("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),n("p",{staticClass:"refresh-text"},[e._v("松开刷新")])]},proxy:!0},{key:"loading",fn:function(){return[n("div",{staticClass:"refresh-icon"},[n("img",{attrs:{src:a("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),n("p",{staticClass:"refresh-text"},[e._v("刷新中")])]},proxy:!0}]),model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[e._v(" "),e._v(" "),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isFullScreen,expression:"!isFullScreen"}],staticClass:"unit-home-content"},[n("div",{staticClass:"unit-home-content-wrap"},[n("Tabs",{ref:"tabs",on:{click:e.handleTabClick},model:{value:e.currentTabName,callback:function(t){e.currentTabName=t},expression:"currentTabName"}},[n("Tab",{attrs:{title:"申请期",name:"apply"}}),e._v(" "),n("Tab",{attrs:{title:"考核期",name:"assess"}})],1),e._v(" "),n("div",{staticClass:"unit-content-filter",class:{sb_class:"apply"===e.currentTabName}},[n("img",{staticClass:"icon",attrs:{src:a("./app/web/page/app/images/select.png"),alt:""}}),e._v(" "),n("dropdowm-menu",{ref:"filterAction",attrs:{filterConfig:e.filterConfig,filter:e.filter,pageName:e.pageName,filterClickEventName:"DIQDetailsFilterClick",tagEventName:"DIQDetailsFilterTagClick",resetEventName:"DIQDetailsFilterResetClick",confirmEventName:"DIQDetailsFilterConfirmClick",total:e.total},on:{filterConfirm:e.filterConfirm,filterActionIsOpen:e.filterActionIsOpen}})],1)],1)]),e._v(" "),e.showTable?n("List",{attrs:{finished:e.finished,"finished-text":e.tableData.data&&e.tableData.data.length?"没有更多了":""},on:{load:e.loadData},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("common-table",{ref:"gemPointTable",attrs:{id:"table-content",border:!1,tableData:e.tableData,isFullScreen:e.isFullScreen,setClassName:e.setClassName},on:{sortChange:e.sortChange}},[n("el-table-column",{attrs:{fixed:"left",label:"头像",width:"60px",prop:"avatar",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[n("div",{staticClass:"avatar-wrap"},[n("img",{staticClass:"avatar",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+s.contactId+"/avatar?size=60",alt:""},on:{click:function(t){return e.handleClickAvatar(s)}}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:s.setTargetIncomeAmt,expression:"row.setTargetIncomeAmt"}],staticClass:"icon_crown",attrs:{src:a("./app/web/page/app/images/crown.png"),alt:""}})])]}}],null,!1,3029215216)}),e._v(" "),n("el-table-column",{attrs:{label:"姓名",fixed:"left",width:"70px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"user"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"user_name"},[n("span",{staticClass:"climp"},[e._v(e._s(a.name))])])]),e._v(" "),n("div",{staticClass:"no-self"},[n("span",{staticClass:"level"},[e._v(e._s(a.careerLevelCode))]),e._v(" "),n("span",{staticClass:"line"}),e._v(" "),n("span",{staticClass:"status"},[e._v(e._s(a.activityStatusCode))])])])]}}],null,!1,186258874)})],1)],1):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],staticClass:"nodata"},[n("img",{attrs:{src:a("./app/web/page/app/images/nodata1.png"),alt:""}}),e._v(" "),n("div",[e._v("暂时没有数据")])])],1),e._v(" "),n("van-popup",{staticClass:"timePopup",attrs:{position:"center",round:"",closeable:""},model:{value:e.popupRule,callback:function(t){e.popupRule=t},expression:"popupRule"}},[n("div",{staticClass:"popupRule"},[n("div",{staticClass:"title"},[e._v("\n        "+e._s("apply"===e.currentTabName?"DIQ申请期规则":"DIQ考核期规则")+"\n      ")]),e._v(" "),"apply"===e.currentTabName?n("div",[n("p",[e._v("\n          连续"),n("span",{staticClass:"default-color"},[e._v("1-3")]),e._v("个月内，累计零售销售绩效需达成"),n("span",{staticClass:"default-color"},[e._v("4,800")]),e._v("，本人需培养"),n("span",{staticClass:"default-color"},[e._v("10")]),e._v("名"),n("span",{staticClass:"default-color"},[e._v("A")]),e._v("顾问，本人需通过“DIQ网上申请和自测”，且申请前"),n("span",{staticClass:"default-color"},[e._v("2")]),e._v("个月内无书面提醒，前"),n("span",{staticClass:"default-color"},[e._v("4")]),e._v("个月无书面警告及以上警告处分。\n        ")])]):n("div",[n("p",[e._v("\n          本人每月需保持"),n("span",{staticClass:"default-color"},[e._v("A")]),e._v("状态，且DIQ沙龙销售绩效需至少每月达成10,000。\n        ")]),e._v(" "),n("p",[e._v("\n          本人累计零售销售绩效最多可计入"),n("span",{staticClass:"default-color"},[e._v("10,000")]),e._v("至DIQ沙龙销售绩效。\n        ")]),e._v(" "),n("p",[e._v("\n          若考核期三个月内除DIQ沙龙"),n("span",{staticClass:"default-color"},[e._v("A")]),e._v("成员外均已达成，可顺延一个月达成该条件。\n        ")])])])]),e._v(" "),e.isFullScreen?n("img",{staticClass:"resetToPortraitScreen",attrs:{src:a("./app/web/page/app/images/portraitscreen.png"),alt:""},on:{click:e.resetToPortraitScreen}}):e._e()],1)}),[],!1,null,"370f0656",null);t.default=N.exports},"./app/web/page/app/view/operation/areadiq/areadiq.vue?vue&type=style&index=0&id=370f0656&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/operation/areadiq/areadiq.vue?vue&type=style&index=0&id=370f0656&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/filterActionSheet/dropdowmMenu.vue?vue&type=style&index=0&id=6d8bb1f7&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/operation/areadiq/areadiq.vue?vue&type=style&index=0&id=370f0656&lang=less&scoped=true&":function(e,t,a){}}]);