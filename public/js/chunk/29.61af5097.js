(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"./app/web/page/app/images/audio_on01.png":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAARxJREFUWEftlbFOAkEURe+dxQ62tzAW2tkSWuUDjKGRT7BzNYaeLzBZvgIt3FjYr52WUvgJ9NgIg+GZ3YIQgkwzwxa+aSe5Z+7JmxmiosWKuFDwzsyralUdzIAOVzC168GqGvIoET5zst/+Cel9qXp6+3xsF4uBCE4JMQDfTa2W1O/PP0IcoAR/370c2rkdARKvQkhYE+21QsBL8OQ6ewDkclMzgq/xoHPmu3UJ/kqexiLY/wM8a5wcNHjVnPuEVwueJNkQIt2Njck8Tjttn22LrO3DBc4MTaueXoyCgIvQaS87slbS8joREQRvhtFNCOiy8Wob6Rd3ODc7e0B8q3Tl6SfhMuRtX1V7U+kKUtUuQ972VbU3la6g/6f6F9kyVCnLcysdAAAAAElFTkSuQmCC"},"./app/web/page/app/images/audio_on02.png":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAAyRJREFUWEft1k1IFGEYAOD3nVnNbGe2iA5F0sGoQOoQpZeghMz+bJ2FfoQg+6EusbNpBUHYkofoz3YGOhmSeMiCdtZKi0iyg2CXRBHBDh29le6sbfs7b4y0v+zGzC6bh5zjft/3PvO+3/d+OwhL9OASubAM/7PKL5c6b6kXXEpLXIMnCDDMlVe24IPGn8Xsi6FSB9t8VbG4NkMEK3UMEUa5Cu4I3m3wF4obgv2i9xkQnMpAEL5gJRzg7zi+F4IbghdEX2McqB+IVqcjiPiGl4SmksF6YLXNuwXi+IqItmbgAK287Og1ixvKOBF0ca9jNE5Aa5MQ4rxlBVOz6p591gxuCtYD+13KIdRgkIBSaxnstHmEjpLCi2V3KU9JozOprOGbTXJUFwXTC2JhegTRXR/LF8gv+uqAtLGMvWbYPbzHPmoUT5YrdGVgc0TTZCLYi0AMAH5mLBbR2tU0kSuYKnoniGBHYowB7OBkodMU/Kt9cFMkGpkEID6zXSDCsGW1uXDV6e0mgAuJ+YhMNy81XzQF+53KcwA6kWsRAn7iZWFf9lhAVG5qRMkMEfEtLwmHTcGq6J0lgvV54DBXU8XhpV3R9HHV6TtLoPWkfsNxmyzsLDnsdyoiAHnS+nnYJgn7TcF+UdGvw5M5M0Yc4SWhPntMdXrvE8DV5B4D9vCycN4UnPdwAYYZZGqtkn0yO6BfVN4BUWPyVCPc4iTHbVOwPjl0TamOREhabCcEFgjGGGRdudDAjaF1FAzPEpEl1U5sCyfb+03DiQXk1nt4hPnbBaK6vG2kwcO0g6Xy5ZUbzHwcmL6rg9eHNkZDoSkAsKVl99gmOy4bzVafZwrWq6H+UAYB4GA6wkD5dk4+qr+M4ccwTO6PFnVuri/7SwQZ7OU9Qqth8c9EQzARYcClvCQCIR1AhCluTVkdupuCJYEXxIGGOMXfZwRHDCAwu3nJPmMWNbzHavvrbRCNTSf//BHnWQaPWx81fygENQzrE1VR6SOi04g4Aywd47scXwtFTcF6G8XCYYmrsJ4r5ns6dcUW89pFrDV0qouIn3fpMlyKquaM+f+V+jfumS04MoJEFAAAAABJRU5ErkJggg=="},"./app/web/page/app/images/audio_on03.png":function(e,a,t){e.exports=t.p+"img/audio_on03.5090200f.png"},"./app/web/page/app/images/like2_icon.png":function(e,a,t){e.exports=t.p+"img/like2_icon.c7509f2a.png"},"./app/web/page/app/images/nodata1.png":function(e,a,t){e.exports=t.p+"img/nodata1.75567d78.png"},"./app/web/page/app/images/refresh-icon.gif":function(e,a,t){e.exports=t.p+"img/refresh-icon.4584a5b2.gif"},"./app/web/page/app/view/aWeekNote/myRecognition.vue":function(e,a,t){"use strict";t.r(a);t("./node_modules/vant/es/dialog/style/index.js");var s=t("./node_modules/vant/es/dialog/index.js"),n=(t("./node_modules/vant/es/toast/style/index.js"),t("./node_modules/vant/es/toast/index.js")),o=t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=t.n(o),r=(t("./node_modules/vant/es/button/style/index.js"),t("./node_modules/vant/es/button/index.js")),c=(t("./node_modules/vant/es/swipe-cell/style/index.js"),t("./node_modules/vant/es/swipe-cell/index.js")),l=(t("./node_modules/vant/es/pull-refresh/style/index.js"),t("./node_modules/vant/es/pull-refresh/index.js")),d=(t("./node_modules/vant/es/list/style/index.js"),t("./node_modules/vant/es/list/index.js")),p=(t("./node_modules/vant/es/sticky/style/index.js"),t("./node_modules/vant/es/sticky/index.js")),u=(t("./node_modules/vant/es/nav-bar/style/index.js"),t("./node_modules/vant/es/nav-bar/index.js")),v=t("./node_modules/@babel/runtime/regenerator/index.js"),g=t.n(v),m=t("./app/web/page/app/utils/index.js"),f={components:{NavBar:u.a,"van-sticky":p.a,List:d.a,"van-pull-refresh":l.a,"van-swipe-cell":c.a,"van-button":r.a},data:function(){return{navTitle:"我的认可",isIos:Object(m.l)(),popupTime:!1,contactId:"",impersonatedContactId:"",isSelf:!0,hasNextPage:!1,refreshing:!1,finished:!1,showTable:!0,loading:!0,refreshDisable:!1,pageNo:1,listData:[],durationList:{},loop:0,audioShow:"",audioOn:1,timerInt:null}},created:function(){var e=this;return i()(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.contactId=e.$route.query.targetContactId,e.impersonatedContactId=e.$route.query.ImpersonatedContactID||e.$route.query.targetContactId,void 0!==e.$route.query.isSelf&&(e.isSelf=JSON.parse(e.$route.query.isSelf)),"unread"==e.$route.query.apiType?e.getUnreadData():"all"==e.$route.query.apiType&&e.getAllData();case 4:case"end":return a.stop()}}),a)})))()},mounted:function(){return i()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{audioLoad:function(){setTimeout((function(){var e=document.querySelectorAll(".audio");console.log(e);for(var a=0;a<e.length;a++)e[a].load()}),0)},getAllData:function(){var e=this;return i()(g.a.mark((function a(){var t,s,n,o,i;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=document.documentElement.scrollTop||document.body.scrollTop,e.loading=!0,s=e.$ctx.baseApi,n={contactId:e.contactId,pageNo:e.pageNo,pageSize:20},a.next=6,e.$request.get("".concat(s,"/weeksummary/approval/list"),{params:n});case 6:o=a.sent,i=o.data,console.log(i),e.listData=e.listData.concat(i.pageList||[]),e.pageNo=i.pageNo+1,e.hasNextPage=i.hasNextPage,e.finished=!i.hasNextPage,e.refreshing=!1,e.loading=!1,e.listData&&e.listData.length?e.showTable=!0:e.showTable=!1,e.audioLoad(),window.scrollTo(0,t);case 18:case"end":return a.stop()}}),a)})))()},getUnreadData:function(){var e=this;return i()(g.a.mark((function a(){var t,s,n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.$ctx.baseApi,a.next=3,e.$request.get("".concat(t,"/weeksummary/approval/unread/list?contactId=").concat(e.contactId));case 3:s=a.sent,n=s.data,console.log(n),e.listData=n,e.loading=!1,e.finished=!0,e.refreshDisable=!0,e.listData&&e.listData.length?e.showTable=!0:e.showTable=!1,e.read(),e.audioLoad();case 13:case"end":return a.stop()}}),a)})))()},onRefresh:function(){var e=this;return i()(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.finished=!1,e.refreshing=!0,e.pageNo=1,e.listData=[],e.getAllData();case 5:case"end":return a.stop()}}),a)})))()},onAudio:function(e,a,t){var s=this;return i()(g.a.mark((function n(){var o,i,r,c,l,d;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,a,t),o=s.$refs,(i=o[e][0]).paused){n.next=6;break}return i.pause(),n.abrupt("return",!1);case 6:for(r in o)o[r][0].pause();if(setTimeout((function(){i.play(),s.audioShow=e,s.timerInt=setInterval((function(){s.audioOn>2?s.audioOn=1:s.audioOn++}),500)}),0),0!=t||!s.isSelf){n.next=16;break}return s.listData[a].read=1,c=s.$ctx.baseApi,n.next=13,s.$request.put("".concat(c,"/weeksummary/approval?contactId=").concat(s.contactId),[e]);case 13:l=n.sent,d=l.data,console.log(d);case 16:case"end":return n.stop()}}),n)})))()},audioEnd:function(){this.audioShow="",clearInterval(this.timerInt),this.audioOn=1},getDuration:function(e){var a=this.$refs[e][0].duration;this.durationList[e]=a,this.$set(this.durationList,this.durationList[e],a)},format:function(e){return e?parseInt(e)+"″":"0″"},read:function(){var e=this;return i()(g.a.mark((function a(){var t,s,n,o;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=[],e.listData.forEach((function(e){1!=e.resourceType&&t.push(e.approvalId)})),console.log("arr",t),!t.length){a.next=10;break}return s=e.$ctx.baseApi,a.next=7,e.$request.put("".concat(s,"/weeksummary/approval?contactId=").concat(e.contactId),t);case 7:n=a.sent,o=n.data,console.log(o);case 10:case"end":return a.stop()}}),a)})))()},deleteData:function(e){var a=this;return i()(g.a.mark((function t(){var s,o,i,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=a.$ctx.baseApi,o={approvalContactId:e.approvalContactId},0!=e.approvalType){t.next=11;break}return console.log("评论"),t.next=6,a.$request.delete("".concat(s,"/weeksummary/approval/").concat(e.approvalId),{params:o});case 6:i=t.sent,i.data?(n.a.success("删除成功！"),a.listData.forEach((function(t,s){t.approvalId==e.approvalId&&a.listData.splice(s,1)})),a.listData.length||a.back()):n.a.fail("删除失败,请稍后再试！"),t.next=19;break;case 11:return console.log("点赞"),o.summaryDate=e.approvalTime,o.contactId=a.contactId,t.next=16,a.$request.delete("".concat(s,"/weeksummary/approval/like"),{params:o});case 16:r=t.sent,r.data?(n.a.success("删除成功！"),a.listData.forEach((function(t,s){t.approvalId==e.approvalId&&a.listData.splice(s,1)})),a.listData.length||a.back()):n.a.fail("删除失败,请稍后再试！");case 19:case"end":return t.stop()}}),t)})))()},beforeClose:function(e){var a=this;s.a.confirm({title:"确认要删除该条认可评论吗？",confirmButtonText:"确定"}).then((function(){a.deleteData(e)})).catch((function(){console.log("catch")}))},back:function(){Object(m.b)()}}},h=(t("./app/web/page/app/view/aWeekNote/myRecognition.vue?vue&type=style&index=0&id=76d949db&lang=less&scoped=true&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),w=Object(h.a)(f,(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"listPage",class:{isAndroid:!e.isIos}},[s("van-sticky",[s("NavBar",{attrs:{"left-text":"返回",title:e.navTitle,border:!1,"safe-area-inset-top":!0},on:{"click-left":e.back},scopedSlots:e._u([{key:"left",fn:function(){return[s("img",{staticClass:"back_btn",attrs:{src:t("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0}])})],1),e._v(" "),s("van-pull-refresh",{attrs:{"head-height":100,disabled:e.refreshDisable},on:{refresh:e.onRefresh},scopedSlots:e._u([{key:"pulling",fn:function(){return[s("div",{staticClass:"refresh-icon"},[s("img",{attrs:{src:t("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),s("p",{staticClass:"refresh-text"},[e._v("下拉刷新")])]},proxy:!0},{key:"loosing",fn:function(){return[s("div",{staticClass:"refresh-icon"},[s("img",{attrs:{src:t("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),s("p",{staticClass:"refresh-text"},[e._v("松开刷新")])]},proxy:!0},{key:"loading",fn:function(){return[s("div",{staticClass:"refresh-icon"},[s("img",{attrs:{src:t("./app/web/page/app/images/refresh-icon.gif"),alt:""}})]),e._v(" "),s("p",{staticClass:"refresh-text"},[e._v("刷新中")])]},proxy:!0}]),model:{value:e.refreshing,callback:function(a){e.refreshing=a},expression:"refreshing"}},[e._v(" "),e._v(" "),e._v(" "),e.showTable?s("List",{attrs:{finished:e.finished,"finished-text":e.listData&&e.listData.length?"无更多内容":""},on:{load:e.getAllData},model:{value:e.loading,callback:function(a){e.loading=a},expression:"loading"}},[s("div",{staticClass:"content"},e._l(e.listData,(function(a,n){return s("div",{key:a.approvalId,staticClass:"item"},[s("van-swipe-cell",{attrs:{disabled:!e.isSelf&&e.impersonatedContactId!=a.approvalContactId},scopedSlots:e._u([{key:"right",fn:function(){return[s("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(t){return e.beforeClose(a)}}})]},proxy:!0}],null,!0)},[s("div",{staticClass:"itemBox"},[s("img",{staticClass:"contactImg",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+a.approvalContactId+"/avatar?size=60",alt:""}}),e._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"top"},[s("div",{staticClass:"name"},[e._v(e._s(a.approvalName))]),e._v(" "),s("div",{staticClass:"time"},[e._v(e._s(a.approvalTime))])]),e._v(" "),1==a.approvalType?s("div",{staticClass:"msg"},[s("img",{attrs:{src:t("./app/web/page/app/images/like2_icon.png"),alt:""}}),e._v("点赞了你的一周摘要\n                ")]):e._e(),e._v(" "),0==a.resourceType?s("div",{staticClass:"msg"},[e._v("\n                  "+e._s(a.content)+"\n                ")]):e._e(),e._v(" "),1==a.resourceType?s("div",{staticClass:"msg"},[s("div",{staticClass:"audioBox",class:{read:0!=a.read||!e.isSelf},on:{click:function(t){return e.onAudio(a.approvalId,n,a.read)}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.audioShow==a.approvalId,expression:"audioShow == item.approvalId"}]},[s("img",{directives:[{name:"show",rawName:"v-show",value:1==e.audioOn,expression:"audioOn == 1"}],attrs:{src:t("./app/web/page/app/images/audio_on01.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:2==e.audioOn,expression:"audioOn == 2"}],attrs:{src:t("./app/web/page/app/images/audio_on02.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:3==e.audioOn,expression:"audioOn == 3"}],attrs:{src:t("./app/web/page/app/images/audio_on03.png"),alt:""}})]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.audioShow!=a.approvalId,expression:"audioShow != item.approvalId"}]},[s("img",{attrs:{src:t("./app/web/page/app/images/audio_on03.png"),alt:""}})])]),e._v(" "),s("div",{staticClass:"duration"},[e._v("\n                    "+e._s(e.format(e.durationList[a.approvalId]))+"\n                    "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==a.read&&e.isSelf,expression:"item.read == 0 && isSelf"}],staticClass:"circle"})]),e._v(" "),s("audio",{ref:a.approvalId,refInFor:!0,staticClass:"audio",attrs:{controls:"",src:a.content},on:{canplay:function(t){return e.getDuration(a.approvalId)},pause:e.audioEnd}})]):e._e()])])])],1)})),0)]):e._e(),e._v(" "),e.showTable?e._e():s("div",{staticClass:"nodata"},[s("img",{attrs:{src:t("./app/web/page/app/images/nodata1.png"),alt:""}}),e._v(" "),s("div",[e._v("暂时没有数据")])])],1)],1)}),[],!1,null,"76d949db",null);a.default=w.exports},"./app/web/page/app/view/aWeekNote/myRecognition.vue?vue&type=style&index=0&id=76d949db&lang=less&scoped=true&":function(e,a,t){"use strict";t("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/myRecognition.vue?vue&type=style&index=0&id=76d949db&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/myRecognition.vue?vue&type=style&index=0&id=76d949db&lang=less&scoped=true&":function(e,a,t){}}]);