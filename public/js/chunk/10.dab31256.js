(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./app/web/page/app/components/clickAvatarActionSheet/index.vue":function(e,t,a){"use strict";a("./node_modules/vant/es/action-sheet/style/index.js");var n=a("./node_modules/vant/es/action-sheet/index.js"),o=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=a.n(o),i=a("./node_modules/@babel/runtime/regenerator/index.js"),r=a.n(i),c=a("./app/web/page/app/utils/index.js"),l=[{name:"设为关注",prop:"follow"},{name:"个人详情",prop:"profile"},{name:"新人行动",prop:"nbcAction"},{name:"添加笔记",prop:"addNote"},{name:"邀请设置收入目标",prop:"setTarget"},{name:"查看目标评估",prop:"assess"},{name:"拨打电话",prop:"call"}],d={data:function(){return{show:!1,actions:[],safeareainsetBottom:!0,lockScroll:!0}},props:{pageName:{type:String,default:"UnitDetailsPage"},profileClickEventName:{type:String,default:"UnitDetailsClick"},focusEventName:{type:String,default:"UnitDetailsSetFocusClick"},unfocusEventName:{type:String,default:"UnitDetailsUnfocusClick"},setTargetEventName:{type:String,default:"UnitDetailsSetIncomeTargetClick"},callEventName:{type:String,default:"UnitDetailsPhoneCallClick"},cancelEventName:{type:String,default:"UnitDetailsCancelClick"},evaluationEventName:{type:String,default:"OffspringDetailsHeadPortraitTargetEvaluationClick"},accountType:{type:String,default:""},isFullScreen:{type:Boolean,default:!1},selectInfo:{type:String,default:""},info:{type:Object,default:function(){return{}}},targetContactId:null},methods:{onSelect:function(e){console.log(e.prop);var t="UnitDetailsClick";switch(e.prop){case"follow":t=this.info.isFocus?this.unfocusEventName:this.focusEventName;break;case"profile":t=this.profileClickEventName;break;case"setTarget":t=this.setTargetEventName;break;case"call":t=this.callEventName;break;case"assess":t=this.evaluationEventName;break;case"nbcAction":t="nbcAction",this.toActionPlan();break;case"addNote":t="addNote",this.goAddNote()}console.log(this.pageName,t),this.$track({context:this.pageName,behavior:t,item_type:this.pageName,item_id:t}),this.$emit("onSelect",e)},toActionPlan:function(){var e="".concat(window.location.origin,"/nbcActionPlan"),t={opaque:!1,targetContactId:this.info.contactId};this.$go(e,t)},goAddNote:function(){var e=this;return s()(r.a.mark((function t(){var a,n,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$request.get("".concat(e.$ctx.baseApi,"/notes/check?followContactId=").concat(e.info.contactId,"&contactId=").concat(e.targetContactId));case 2:a=t.sent,n=a.data,o="".concat(window.location.origin,"/note"),s={opaque:!1,targetContactId:e.info.contactId,name:e.info.name,levelCode:e.info.careerLevelCode,followed:e.targetContactId},n.hasNote||(o="".concat(window.location.origin,"/addNote"),s={targetContactId:e.info.contactId,name:e.info.name,opaque:!1,levelCode:e.info.careerLevelCode,from:"addNote_none",followed:e.targetContactId}),console.log("params",s),e.$go(o,s);case 9:case"end":return t.stop()}}),t)})))()},onCancel:function(){this.$track({context:this.pageName,behavior:this.cancelEventName,item_type:this.pageName,item_id:this.cancelEventName})},showActions:function(){var e=this;return s()(r.a.mark((function t(){var a,n,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.$route.path),!e.isFullScreen){t.next=4;break}return e.$toast("请返回竖屏下操作～"),t.abrupt("return");case 4:return a=e.$ctx.baseApi,t.next=7,e.$request.get("".concat(a,"/goldenweek/newconsultant?contactId=").concat(e.info.contactId));case 7:n=t.sent,o=n.data.isNew,s=Object(c.d)(l),e.info.isFocus?s[0].name="移除关注":s[0].name="设为关注",e.info.setTargetIncomeAmt?s[4].name="邀请修改收入目标":s[4].name="邀请设置收入目标","50"===e.info.careerLevelCode&&s.forEach((function(e,t,a){"follow"===e.prop&&a.splice(t,1)})),"note"==e.selectInfo&&(s.forEach((function(e,t,a){"follow"!==e.prop&&"setTarget"!==e.prop&&"assess"!==e.prop||a.splice(t,1)})),s.splice(1,0,{name:"查看笔记",prop:"goNote"})),e.info.contactId.toString()===e.targetContactId&&s.forEach((function(e,t,a){"follow"!==e.prop&&"setTarget"!==e.prop&&"call"!==e.prop||a.splice(t,1)})),"operation"!==e.accountType||e.$route.path.includes("operation")||(s.forEach((function(e,t,a){"follow"!==e.prop&&"setTarget"!==e.prop&&"nbcAction"!==e.prop||a.splice(t,1)})),Number(e.info.careerLevelCode)<50&&s.forEach((function(e,t,a){"call"===e.prop&&a.splice(t,1)}))),"operation"!==e.accountType&&s.forEach((function(e,t,a){"assess"===e.prop&&a.splice(t,1)})),o||s.forEach((function(e,t,a){"nbcAction"===e.prop&&a.splice(t,1)})),e.actions=s,e.show=!0;case 20:case"end":return t.stop()}}),t)})))()}},components:{"van-action-sheet":n.a}},p=a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(p.a)(d,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消","safe-area-inset-bottom":e.safeareainsetBottom,"lock-scroll":e.lockScroll},on:{select:e.onSelect,cancel:e.onCancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})}),[],!1,null,"533543d6",null);t.a=u.exports},"./app/web/page/app/components/commonTable.vue":function(e,t,a){"use strict";var n={name:"table-list",props:{tableData:Object,border:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1},setClassName:Function},data:function(){return{loadingText:"拼命加载中"}},mounted:function(){},methods:{sortChange:function(e){this.$emit("sortChange",e)},headerClick:function(e,t){this.$emit("headerClick",e,t)},rowClickchange:function(e){this.$emit("rowClickchange",e)},cellClick:function(e,t,a,n){this.$emit("cellClick",{row:e,column:t,event:a,cell:n})}}},o=(a("./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),s=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-table"},[a("el-table",{ref:"commonTable",attrs:{data:e.tableData.data,stripe:!0,"element-loading-text":e.loadingText,"show-header":e.tableData.showHeader,height:e.tableData.height,"header-cell-class-name":"common-table-header","cell-class-name":e.setClassName,border:e.border},on:{"sort-change":e.sortChange,"header-click":e.headerClick,"row-click":e.rowClickchange,"cell-click":e.cellClick}},[e._t("between"),e._v(" "),e._l(e.tableData.header,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,fixed:t.fixed,"min-width":t.minWidth,"max-width":t.maxWidth,sortable:t.sortable,"sort-orders":["descending","ascending",null],align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(t.formatter?t.formatter(n.row,n.$index):n.row[t.prop]))])]}}],null,!0)})})),e._v(" "),e._t("default")],2)],1)}),[],!1,null,"797892fe",null);t.a=s.exports},"./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&")},"./app/web/page/app/components/productionSheet/index.vue":function(e,t,a){"use strict";a("./node_modules/vant/es/action-sheet/style/index.js");var n=a("./node_modules/vant/es/action-sheet/index.js"),o=(a("./node_modules/vant/es/number-keyboard/style/index.js"),a("./node_modules/vant/es/number-keyboard/index.js")),s=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=a.n(s),r=(a("./node_modules/vant/es/dialog/style/index.js"),a("./node_modules/vant/es/dialog/index.js")),c=a("./node_modules/@babel/runtime/regenerator/index.js"),l=a.n(c),d=a("./app/web/page/app/utils/index.js"),p=a("./node_modules/good-storage/dist/storage.esm.js"),u={props:{contactId:"",productionName:"",queryType:"",pageName:{type:String,default:"UnitDetailsPage"},inputEventName:{type:String,default:"UnitDetailsRetailProdClick"},lastMonthEventName:{type:String,default:"UnitDetailsLastMonthProdClick"},sixMonthEventName:{type:String,default:"UnitDetailsSixMonthProdClick"},saveEventName:{type:String,default:"UnitDetailsSaveRetailProdClick"},inviteEventName:{type:String,default:"UnitDetailsInviteToSetTargetClick"}},data:function(){return{isIos:Object(d.l)(),pro:"",show:!1,lastMonth:!1,halfYear:!1,productionAmtMdata:{reference:{}},fullscreen:!1,showProductionAction:!1,zIndex:100}},methods:{onInput:function(e){this.pro+=e,this.productionAmtMdata.targetProductionAmt=Number(this.pro.split(",").join("")),this.estimateData(this.productionAmtMdata.targetProductionAmt)},onDelete:function(){console.log(this.productionAmtMdata.targetProductionAmt),this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.targetProductionAmt.toString(),""!=this.productionAmtMdata.targetProductionAmt&&(this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.targetProductionAmt.slice(0,this.productionAmtMdata.targetProductionAmt.length-1)),this.estimateData(Number(this.productionAmtMdata.targetProductionAmt))},shareToWechat:function(){var e=this;this.$track({context:this.pageName,behavior:this.inviteEventName,item_type:this.pageName,item_id:this.inviteEventName}),r.a.confirm({message:"是否邀请设置收入目标"}).then((function(){e.share()})).catch((function(){}))},share:function(){var e=this;return i()(l.a.mark((function t(){var a,n,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,t.next=3,e.$request.post("".concat(a,"/invite/link"));case 3:n=t.sent,console.log(n),o="".concat(e.$ctx.baseShareUrl,"?linkKey=").concat(n.data.linkKey),s={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"https://dev-community-s3.marykay.com.cn/DEV/MyBizIntouch_Content_Cms/LibraryResource/20210917102605_661.png",mediatype:"webpage",scene:"WXSceneSession",url:o},e.$jsBridge.shareToWechat(s);case 8:case"end":return t.stop()}}),t)})))()},addproduction:function(){var e=this;return i()(l.a.mark((function t(){var a,n,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$track({context:e.pageName,behavior:e.saveEventName,item_type:e.pageName,item_id:e.saveEventName}),!(e.productionAmtMdata.targetProductionAmt<e.productionAmtMdata.productionAmt)){t.next=4;break}return e.$toast("评估绩效请大于已达成绩效～"),t.abrupt("return");case 4:return a=e.$ctx.baseApi,n=p.a.get("ImpersonatedInfo").targetContactId,o={setByContactId:n,memberContactId:e.contactId,targetAmt:e.productionAmtMdata.targetProductionAmt},t.next=9,e.$request.post("".concat(a,"/target/production"),o);case 9:s=t.sent,i=s.data,console.log(i),e.pro="",e.show=!1,e.fullscreen=!1,e.$emit("addProduction",e.productionAmtMdata.targetProductionAmt);case 16:case"end":return t.stop()}}),t)})))()},lastMonthpro:function(){this.$track({context:this.pageName,behavior:this.lastMonthEventName,item_type:this.pageName,item_id:this.lastMonthEventName}),this.lastMonth=!0,this.halfYear=!1,this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.reference.lastMonthProductionAmt,this.estimateData(this.productionAmtMdata.targetProductionAmt)},halfYearpro:function(){this.$track({context:this.pageName,behavior:this.sixMonthEventName,item_type:this.pageName,item_id:this.sixMonthEventName}),this.lastMonth=!1,this.halfYear=!0,this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.reference.halfYearAvgProductionAmt,this.estimateData(this.productionAmtMdata.targetProductionAmt)},openNumber:function(){this.$track({context:this.pageName,behavior:this.inputEventName,item_type:this.pageName,item_id:this.inputEventName}),this.show=!0,this.lastMonth=!1,this.halfYear=!1,this.pro="",this.fullscreen=!0},estimateData:function(e){var t=this;return i()(l.a.mark((function a(){var n,o,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e,"data"),n=t.$ctx.baseApi,(o={}).memberContactId=t.contactId,o.estimateProductionAmt=e,a.next=7,t.$request.get("".concat(n,"/estimate/production"),{params:o});case 7:s=a.sent,t.productionAmtMdata.incomeDescribe=s.data.incomeDescribe;case 9:case"end":return a.stop()}}),a)})))()},close:function(){this.lastMonth=!1,this.halfYear=!1,this.show=!1,this.fullscreen=!1,this.pro="",this.zIndex=100}},components:{"van-number-keyboard":o.a,"van-action-sheet":n.a},watch:{showProductionAction:function(e){var t=this;return i()(l.a.mark((function a(){var n,o,s,i,r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=11;break}return n=Object(d.i)(),console.log(n),t.zIndex=n+5e3,o={queryType:t.queryType,memberContactId:t.contactId},s=t.$ctx.baseApi,a.next=8,t.$request.get("".concat(s,"/estimate/production"),{params:o});case 8:i=a.sent,r=i.data,t.productionAmtMdata=r;case 11:case"end":return a.stop()}}),a)})))()}}},m=(a("./app/web/page/app/components/productionSheet/index.vue?vue&type=style&index=0&id=e4ab8824&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),h=Object(m.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{isAndroid:!e.isIos}},[n("van-action-sheet",{class:{"production-action":e.fullscreen},attrs:{title:e.productionName+"绩效评估","close-on-click-overlay":!0},on:{close:e.close},model:{value:e.showProductionAction,callback:function(t){e.showProductionAction=t},expression:"showProductionAction"}},[n("div",{staticClass:"content"},[n("div",[n("p",{staticClass:"title"},[e._v("\n          零售绩效设定\n          "),n("span",[e._v(" ("+e._s(e._f("formatDate")(new Date,"YYYY-MM"))+") ")])]),e._v(" "),n("div",{staticClass:"change"},[n("div",{staticClass:"changebg",on:{click:e.openNumber}},[n("span",[e._v("\n              "+e._s(e._f("formatMoney")(e.productionAmtMdata.targetProductionAmt))+"\n            ")]),e._v(" "),n("img",{staticClass:"edit",attrs:{src:a("./app/web/page/app/images/edit.png"),alt:""}})]),e._v(" "),n("div",{staticClass:"sum"},[e._v("\n            （当月已达成绩效"+e._s(e._f("formatMoney")(e.productionAmtMdata.productionAmt))+"）\n          ")])])]),e._v(" "),n("div",[n("p",{staticClass:"title"},[e._v("目标参考")]),e._v(" "),n("div",{staticClass:"productmap"},[n("div",{class:{productionBg:e.lastMonth},on:{click:e.lastMonthpro}},[n("p",[e._v("上个月绩效")]),e._v(" "),n("p",[e._v("\n              "+e._s(e._f("formatMoney")(e.productionAmtMdata.reference&&e.productionAmtMdata.reference.lastMonthProductionAmt))+"\n            ")])]),e._v(" "),n("div",{class:{productionBg:e.halfYear},on:{click:e.halfYearpro}},[n("p",[e._v("近6个月平均绩效")]),e._v(" "),n("p",[e._v("\n              "+e._s(e._f("formatMoney")(e.productionAmtMdata.reference&&e.productionAmtMdata.reference.halfYearAvgProductionAmt))+"\n            ")])])])]),e._v(" "),n("div",[n("p",{staticClass:"title"},[e._v("收益分析")]),e._v(" "),n("div",{staticClass:"Income"},[n("p",{domProps:{innerHTML:e._s(e.productionAmtMdata.incomeDescribe)}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:Number(this.$route.query.targetContactId)!==Number(this.contactId),expression:"\n              Number(this.$route.query.targetContactId) !==\n                Number(this.contactId)\n            "}],staticClass:"active",on:{click:e.shareToWechat}},[e._v("\n            邀请她设置当月收入目标\n          ")])])]),e._v(" "),n("div",{staticClass:"btn",on:{click:e.addproduction}},[e._v("保存绩效")])])]),e._v(" "),n("van-number-keyboard",{attrs:{show:e.show,theme:"custom","close-button-text":"完成",maxlength:7,"hide-on-click-outside":!1,"z-index":e.zIndex},on:{blur:function(t){e.show=!1,e.fullscreen=!1},input:e.onInput,delete:e.onDelete},model:{value:e.pro,callback:function(t){e.pro=t},expression:"pro"}})],1)}),[],!1,null,"e4ab8824",null);t.a=h.exports},"./app/web/page/app/components/productionSheet/index.vue?vue&type=style&index=0&id=e4ab8824&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/productionSheet/index.vue?vue&type=style&index=0&id=e4ab8824&lang=less&scoped=true&")},"./app/web/page/app/images/avatar.png":function(e,t,a){e.exports=a.p+"img/avatar.fb737f4c.png"},"./app/web/page/app/images/crown.png":function(e,t,a){e.exports=a.p+"img/crown.25c5a039.png"},"./app/web/page/app/images/edit.png":function(e,t,a){e.exports=a.p+"img/edit.299796b3.png"},"./app/web/page/app/images/icon_input_search.png":function(e,t,a){e.exports=a.p+"img/icon_input_search.8351fb55.png"},"./app/web/page/app/images/nodata.png":function(e,t,a){e.exports=a.p+"img/nodata.ab62307b.png"},"./app/web/page/app/images/search_back.png":function(e,t,a){e.exports=a.p+"img/search_back.40a06b97.png"},"./app/web/page/app/mixin/tableHeaderFixed.js":function(e,t,a){"use strict";t.a={mounted:function(){var e=document.querySelector(".search-bar"),t=document.querySelector(".el-table__header-wrapper"),a=document.querySelector(".el-table__body-wrapper");window.addEventListener("scroll",(function(n){var o=document.querySelector(".el-table__fixed-header-wrapper");(document.documentElement.scrollTop||document.body.scrollTop)>=e.clientHeight?(o.style.cssText="position: fixed;top: 0;width: 130px;z-index: 4;overflow: hidden;",t.style.cssText="position: fixed;top: 0;z-index: 4;",a.style.cssText="padding-top: ".concat(t.clientHeight,"px")):(o.style.cssText="position: absolute;top: 0",t.style.cssText="position: unset;",a.style.cssText="padding-top: 0;")}))}}},"./app/web/page/app/view/unit/search.vue":function(e,t,a){"use strict";a.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticClass:"table-empty__bg",attrs:{src:a("./app/web/page/app/images/nodata.png"),alt:""}})])}],o=(a("./node_modules/vant/es/dialog/style/index.js"),a("./node_modules/vant/es/dialog/index.js")),s=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=a.n(s),r=(a("./node_modules/vant/es/popup/style/index.js"),a("./node_modules/vant/es/popup/index.js")),c=(a("./node_modules/vant/es/icon/style/index.js"),a("./node_modules/vant/es/icon/index.js")),l=(a("./node_modules/vant/es/button/style/index.js"),a("./node_modules/vant/es/button/index.js")),d=(a("./node_modules/vant/es/search/style/index.js"),a("./node_modules/vant/es/search/index.js")),p=(a("./node_modules/vant/es/list/style/index.js"),a("./node_modules/vant/es/list/index.js")),u=a("./node_modules/@babel/runtime/regenerator/index.js"),m=a.n(u),h=a("./app/web/page/app/utils/index.js"),f=a("./app/web/page/app/components/commonTable.vue"),v=a("./app/web/page/app/components/productionSheet/index.vue"),g=a("./app/web/page/app/mixin/tableHeaderFixed.js"),b=a("./app/web/page/app/components/clickAvatarActionSheet/index.vue"),_={data:function(){return{isFullScreen:!1,isIos:Object(h.l)(),loading:!0,finished:!1,tableData:{header:[{label:"绩效进度",sortable:"custom",minWidth:"90px",prop:"productionAmtRate",formatter:function(e){return"".concat(e.productionAmtRate,"%")}},{label:"当月绩效",minWidth:"90px",sortable:"custom",prop:"productionAmt",formatter:function(e){return Object(h.f)(e.productionAmt,2)}}],data:[]},filterConfig:[{prop:"dirTags",label:"分类",options:[]},{prop:"activityStatuses",label:"状态",options:[]},{prop:"careerLevels",label:"职级",options:[]},{prop:"incomeTargetStatusIds",label:"收入目标",multiple:!1,options:[{name:"已设置",value:1},{name:"未设置",value:0}]}],filter:{pageSize:50,pageNo:1,sortEnum:"ESTIMATE_PRODUCTION_AMT",orderEnum:"DESC"},currentData:{},total:1,monthKey:"",isNoData:!1,keyword:"",productionContactId:"",productionName:"",describe:"",popup:!1,accountType:"",levelCode:""}},mixins:[g.a],components:{commonTable:f.a,List:p.a,"van-search":d.a,"van-button":l.a,"van-icon":c.a,productionSheet:v.a,"van-popup":r.a,clickAvatarActionSheet:b.a},created:function(){var e=this,t=this.$route.query,a=t.monthKey,n=t.targetContactId,o=t.accountType,s=t.levelCode;this.monthKey=a,this.targetContactId=n,this.accountType=o,this.levelCode=s,console.log(a);var i=new Date(a.substr(0,4),a.substr(4,6));i.setMonth(i.getMonth()-1,1);for(var r=function(t){i.setMonth(i.getMonth()-1);var a="".concat(i.getFullYear(),"/").concat(e.addZero(i.getMonth()+1));e.tableData.header.push({label:"".concat(a),sortable:"custom",minWidth:"90px",prop:"productionAmtM".concat(t),formatter:function(e){return Object(h.f)(e["productionAmtM".concat(t)],2)}})},c=1;c<=12;c++)r(c)},methods:{getRelationship:function(e){var t=this;return i()(m.a.mark((function a(){var n,o,s,i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.$ctx.baseApi,o={contactId:e.contactId},a.next=4,t.$request.get("".concat(n,"/estimate/production/relationship"),{params:o});case 4:s=a.sent,i=s.data,console.log("data",i),t.describe=i.describe,t.popup=!0;case 9:case"end":return a.stop()}}),a)})))()},setClassName:function(e){e.row;var t=e.column;return"name"===t.property?"cell-class_name":"avatar"===t.property?"cell-class_avatar":"estimateProductionAmt"===t.property?"cell-class_estimateProductionAmt":void 0},addZero:function(e){return e<10?"0".concat(e):e},back:function(){Object(h.b)()},onCancel:function(){this.$track({context:"UnitDetailsPage",behavior:"UnitDetailsCancelClick",item_type:"UnitDetailsPage",item_id:"UnitDetailsCancelClick"}),Object(h.b)()},onSearch:function(e){this.$track({context:"UnitDetailsPage",behavior:"UnitDetailsSearchClick",item_type:"UnitDetailsPage",item_id:"UnitDetailsSearchClick",attributes:{search_content:e}}),this.filter.search=e,this.filter.pageNo=1,this.tableData.data=[],this.loadData()},loadData:function(){var e=this;return i()(m.a.mark((function t(){var a,n,o,s,i,r,c,l,d,p,u,h,f;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.documentElement.scrollTop||document.body.scrollTop,e.loading=!0,n=e.filter,o=n.pageNo,s=n.pageSize,i=n.search,r=n.sortEnum,c=n.orderEnum,l={pageNo:o,pageSize:s,search:i,sortEnum:r,orderEnum:c},d=e.$ctx.baseApi,t.next=7,e.$request.get("".concat(d,"/reports/unit/details"),{params:l});case 7:p=t.sent,u=p.data,e.loading=!1,u.hasNextPage?e.finished=!1:e.finished=!0,h=new Map,f=e.tableData.data.concat(u.members),e.tableData.data=f.filter((function(e){return!h.has(e.contactId)&&h.set(e.contactId,1)})),e.tableData.data&&e.tableData.data.length?e.isNoData=!1:(e.isNoData=!0,e.keyword=e.filter.search),window.scrollTo(0,a),e.filter.pageNo=e.filter.pageNo+1;case 17:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return i()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.finished=!1,e.filter.pageNo=1,e.tableData.data=[],e.loadData();case 4:case"end":return t.stop()}}),t)})))()},setTargetIncome:function(){var e=this;return i()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.a.confirm({message:"是否邀请设置收入目标"}).then((function(){e.share()})).catch((function(){}));case 1:case"end":return t.stop()}}),t)})))()},handleClickAvatar:function(e){var t=this;this.currentData=e,this.$nextTick((function(){t.$refs.clickAvatarActionSheet.showActions()}))},share:function(){var e=this;return i()(m.a.mark((function t(){var a,n,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,t.next=3,e.$request.post("".concat(a,"/invite/link"));case 3:n=t.sent,console.log(n),o="".concat(e.$ctx.baseShareUrl,"?linkKey=").concat(n.data.linkKey),s={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"https://dev-community-s3.marykay.com.cn/DEV/MyBizIntouch_Content_Cms/LibraryResource/20210917102605_661.png",mediatype:"webpage",scene:"WXSceneSession",url:o},e.$jsBridge.shareToWechat(s);case 8:case"end":return t.stop()}}),t)})))()},onSelect:function(e){var t=this;return i()(m.a.mark((function a(){var n,s,i,r,c,l,d,p,u;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.$ctx.baseApi,a.t0=e.prop,a.next="follow"===a.t0?4:"profile"===a.t0?11:"setTarget"===a.t0?15:"assess"===a.t0?19:"call"===a.t0?25:27;break;case 4:return a.next=6,t.$request.post("".concat(n,"/focus"),{focusContactId:t.currentData.contactId.toString()});case 6:return s=a.sent,s.data,t.currentData.isFocus=!t.currentData.isFocus,console.log(t.currentData.isFocus),a.abrupt("break",27);case 11:return i="".concat(window.location.origin,"/profile"),r={opaque:!1,targetContactId:t.currentData.contactId,levelCode:t.currentData.careerLevelCode,from:"unit",followed:t.$route.query.targetContactId},t.$go(i,r),a.abrupt("break",27);case 15:return c=t.currentData.setTargetIncomeAmt,l=c?"是否邀请修改收入目标":"是否邀请设置收入目标",o.a.confirm({message:l}).then((function(){t.share()})).catch((function(){})),a.abrupt("break",27);case 19:return d="team",Number(t.currentData.careerLevelCode)>=60&&(d="unit"),p="".concat(window.location.origin,"/").concat(d),u={opaque:!1,isSelf:!1,targetContactId:t.currentData.contactId,levelCode:t.currentData.careerLevelCode,monthKey:t.monthKey,navTitle:"收入目标评估"},t.$go(p,u),a.abrupt("break",27);case 25:return window.location.href="tel:".concat(t.currentData.mobile),a.abrupt("break",27);case 27:t.$refs.clickAvatarActionSheet.show=!1;case 28:case"end":return a.stop()}}),a)})))()},sortMap:function(e){return{estimateProductionAmt:"ESTIMATE_PRODUCTION_AMT",productionAmtRate:"PRODUCTIONAMT_RATE",productionAmt:"PRODUCTION_AMT",productionAmtM1:"PRODUCTION_AMT_M1",productionAmtM2:"PRODUCTION_AMT_M2",productionAmtM3:"PRODUCTION_AMT_M3",productionAmtM4:"PRODUCTION_AMT_M4",productionAmtM5:"PRODUCTION_AMT_M5",productionAmtM6:"PRODUCTION_AMT_M6",productionAmtM7:"PRODUCTION_AMT_M7",productionAmtM8:"PRODUCTION_AMT_M8",productionAmtM9:"PRODUCTION_AMT_M9",productionAmtM10:"PRODUCTION_AMT_M10",productionAmtM11:"PRODUCTION_AMT_M11",productionAmtM12:"PRODUCTION_AMT_M12"}[e]},sortChange:function(e){e.column;var t=e.prop,a=e.order;a?("descending"===a?a="desc":"ascending"===a&&(a="asc"),this.filter.sortEnum=this.sortMap(t),this.filter.orderEnum=a.toLocaleUpperCase()):(this.filter.sortEnum=null,this.filter.orderEnum=null),this.tableData.data=[],this.filter.pageNo=1,this.loadData()},setEstimateProduction:function(e){"operation"!==this.accountType?(this.currentData=e,this.productionContactId=e.contactId,this.productionName=e.name,this.$refs.productionAction.showProductionAction=!0):this.$toast("抱歉，暂时不支持对她进行操作～")},addProduction:function(e){var t=this;return i()(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.setproductionAmtM=!1,t.currentData.setTargetProductionAmt=!0,t.currentData.estimateProductionAmt=e,t.$refs.productionAction.showProductionAction=!1,t.currentData.setBySelf=!0;case 5:case"end":return a.stop()}}),a)})))()}}},x=(a("./app/web/page/app/view/unit/search.vue?vue&type=style&index=0&id=8f4bb8c8&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),w=Object(x.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-wrap"},[n("div",{staticClass:"search-bar"},[n("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/search_back.png"),alt:""},on:{click:e.back}}),e._v(" "),n("van-search",{staticClass:"table-search",attrs:{"show-action":"",placeholder:"请输入姓名/手机号搜索",autofocus:""},on:{search:e.onSearch,cancel:e.onCancel},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("img",{staticClass:"icon-input-search",attrs:{src:a("./app/web/page/app/images/icon_input_search.png"),alt:""}})]},proxy:!0}]),model:{value:e.filter.search,callback:function(t){e.$set(e.filter,"search","string"==typeof t?t.trim():t)},expression:"filter.search"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.data.length,expression:"tableData.data.length"}],staticClass:"search-result"},[n("List",{attrs:{finished:e.finished,"finished-text":e.tableData.data&&e.tableData.data.length?"没有更多了":""},on:{load:e.loadData},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("common-table",{ref:"unitTable",attrs:{id:"table-content",border:!1,tableData:e.tableData,isFullScreen:e.isFullScreen,setClassName:e.setClassName},on:{sortChange:e.sortChange}},[n("el-table-column",{attrs:{fixed:"left",width:"60px",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("div",{staticClass:"avatar-wrap"},[n("img",{staticClass:"avatar",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+o.contactId+"/avatar?size=60",alt:""},on:{click:function(t){return e.handleClickAvatar(o)}}}),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:o.setTargetIncomeAmt,expression:"row.setTargetIncomeAmt"}],staticClass:"icon_crown",attrs:{src:a("./app/web/page/app/images/crown.png"),alt:""}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"姓名",fixed:"left",align:"center",width:"70px","header-align":"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",{staticClass:"user"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"user_name"},[n("span",{staticClass:"climp"},[e._v(e._s(a.name))])])]),e._v(" "),e.targetContactId===a.contactId.toString()?n("div",{staticClass:"tags"},[n("span",{staticClass:"level"},[e._v(e._s(a.careerLevelCode))]),e._v(" "),n("span",{staticClass:"status"},[e._v(e._s(a.activityStatusCode))]),e._v(" "),n("span",{staticClass:"self"},[e._v("本人")])]):n("div",{staticClass:"no-self"},[n("span",{staticClass:"level"},[e._v(e._s(a.careerLevelCode))]),e._v(" "),n("span",{staticClass:"line"}),e._v(" "),n("span",{staticClass:"status"},[e._v(e._s(a.activityStatusCode))])])])]}}])}),e._v(" "),n("el-table-column",{attrs:{slot:"between",label:"评估绩效",align:"center",width:"96px",prop:"estimateProductionAmt",sortable:"custom","header-align":"center","sort-orders":["descending","ascending",null]},slot:"between",scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("div",{staticClass:"assess-performance"},[o.setTargetProductionAmt?n("van-button",{staticClass:"assess-performance-btn",on:{click:function(t){return e.setEstimateProduction(o)}}},[e._v(e._s(e._f("formatMoney")(o.estimateProductionAmt)))]):n("van-button",{staticClass:"assess-performance-btn",on:{click:function(t){return e.setEstimateProduction(o)}}},[e._v("评估绩效")]),e._v(" "),!o.setBySelf&&o.setTargetProductionAmt?n("img",{staticClass:"assess-performance-tip",attrs:{src:a("./app/web/page/app/images/avatar.png"),alt:""},on:{click:function(t){return e.getRelationship(o)}}}):e._e()],1)]}}])})],1)],1)],1),e._v(" "),e.isNoData?n("div",{staticClass:"no_data"},[e._m(0),e._v("\n    未查询到"),n("span",{staticClass:"is_active"},[e._v("“"+e._s(e.keyword)+"”")]),e._v("的数据\n  ")]):e._e(),e._v(" "),n("click-avatar-action-sheet",{ref:"clickAvatarActionSheet",attrs:{pageName:"UnitDetailsPage",profileClickEventName:"UnitDetailsClick",focusEventName:"UnitDetailsSetFocusClick",unfocusEventName:"UnitDetailsUnfocusClick",setTargetEventName:"UnitDetailsSetIncomeTargetClick",callEventName:"UnitDetailsPhoneCallClick",cancelEventName:"UnitDetailsCancelClick",info:e.currentData,isFullScreen:e.isFullScreen,accountType:e.accountType,targetContactId:e.targetContactId},on:{onSelect:e.onSelect}}),e._v(" "),n("productionSheet",{ref:"productionAction",attrs:{contactId:e.productionContactId,queryType:"unit",productionName:e.productionName},on:{addProduction:e.addProduction}}),e._v(" "),n("van-popup",{staticClass:"popupmodel",attrs:{position:"center",closeable:""},model:{value:e.popup,callback:function(t){e.popup=t},expression:"popup"}},[n("div",{staticClass:"popbox"},[n("div",{staticClass:"msg"},[n("p",{staticClass:"popbox-title"},[n("span",[n("img",{attrs:{src:a("./app/web/page/app/images/mk_title_icon.png"),alt:""}}),e._v("提示")])]),e._v(" "),n("p",{staticClass:"popbox-mes"},[e._v(e._s(e.describe))])]),e._v(" "),n("div",{staticClass:"bottom"},[n("img",{attrs:{src:a("./app/web/page/app/images/mk_bottom_icon.png"),alt:""}})])])])],1)}),n,!1,null,"8f4bb8c8",null);t.default=w.exports},"./app/web/page/app/view/unit/search.vue?vue&type=style&index=0&id=8f4bb8c8&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/unit/search.vue?vue&type=style&index=0&id=8f4bb8c8&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/commonTable.vue?vue&type=style&index=0&id=797892fe&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/components/productionSheet/index.vue?vue&type=style&index=0&id=e4ab8824&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/unit/search.vue?vue&type=style&index=0&id=8f4bb8c8&lang=less&scoped=true&":function(e,t,a){}}]);