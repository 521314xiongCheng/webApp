(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./app/web/page/app/images/add_icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAARqADAAQAAAABAAAARgAAAABuJQAYAAAB8klEQVR4Ae2cMU7DMBiFG8QIOxwALgAjQxcOQo7RA7RcgBUOwsLAWA6AOAAHKCuUZyld/vo1ojRN636WrMjPf2z/X1+TqFY6GFAgAAEIQODwCMzn81p1qjprjneHRyFkLBAT1VyZhNDDaYrGpep3jkqjX/RJ46jHyW80t5s/6am/t+IWto0FnbVMct7S32l3n2A6Tey/gwPGEAQMYAwBI+MYwBgCRsYxgDEEjIxjAGMIGBnHAMYQMDKOAYwhYGQcAxhDwMg4BjCGgJFxDGAMASPjGAPm2OgD7e2kfZ20hdHVr/VDN3ejD7WGlpC1uz915mtVVR9/GkELGjebXjoUW9Jm39iBqWKHgtPe8WPUC27Xcs5TzC8HZqqgqxhYcPtNYK5jfjkwMwWdxMCC218Ccxrzy92V3mNQ4e1svjkwD4WDiOll810C01yI7nX2TxyhsHbKb5K78KY8l64xi+R1d9rGc8ztYr7M8VnaS0bfhLTec8wmZm4bQ+BHqqvKqG2MLvuXvkpdTrZPYwPGfFqAAYwhYGQcAxhDwMg4BjCGgJFxDGAMASPjGMAYAkbGMYAxBIyMYwBjCBgZxwDGEDAyjgGMIWBkHLODYNIWxqrS1r/q3P3t077JTr933StZweFNffcJCE78b4faxaJDAAIQKIXAL3201jyqEp+gAAAAAElFTkSuQmCC"},"./app/web/page/app/images/audio_icon.png":function(e,t,a){e.exports=a.p+"img/audio_icon.22a92fc6.png"},"./app/web/page/app/images/audio_on01.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAARxJREFUWEftlbFOAkEURe+dxQ62tzAW2tkSWuUDjKGRT7BzNYaeLzBZvgIt3FjYr52WUvgJ9NgIg+GZ3YIQgkwzwxa+aSe5Z+7JmxmiosWKuFDwzsyralUdzIAOVzC168GqGvIoET5zst/+Cel9qXp6+3xsF4uBCE4JMQDfTa2W1O/PP0IcoAR/370c2rkdARKvQkhYE+21QsBL8OQ6ewDkclMzgq/xoHPmu3UJ/kqexiLY/wM8a5wcNHjVnPuEVwueJNkQIt2Njck8Tjttn22LrO3DBc4MTaueXoyCgIvQaS87slbS8joREQRvhtFNCOiy8Wob6Rd3ODc7e0B8q3Tl6SfhMuRtX1V7U+kKUtUuQ972VbU3la6g/6f6F9kyVCnLcysdAAAAAElFTkSuQmCC"},"./app/web/page/app/images/audio_on02.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAAyRJREFUWEft1k1IFGEYAOD3nVnNbGe2iA5F0sGoQOoQpZeghMz+bJ2FfoQg+6EusbNpBUHYkofoz3YGOhmSeMiCdtZKi0iyg2CXRBHBDh29le6sbfs7b4y0v+zGzC6bh5zjft/3PvO+3/d+OwhL9OASubAM/7PKL5c6b6kXXEpLXIMnCDDMlVe24IPGn8Xsi6FSB9t8VbG4NkMEK3UMEUa5Cu4I3m3wF4obgv2i9xkQnMpAEL5gJRzg7zi+F4IbghdEX2McqB+IVqcjiPiGl4SmksF6YLXNuwXi+IqItmbgAK287Og1ixvKOBF0ca9jNE5Aa5MQ4rxlBVOz6p591gxuCtYD+13KIdRgkIBSaxnstHmEjpLCi2V3KU9JozOprOGbTXJUFwXTC2JhegTRXR/LF8gv+uqAtLGMvWbYPbzHPmoUT5YrdGVgc0TTZCLYi0AMAH5mLBbR2tU0kSuYKnoniGBHYowB7OBkodMU/Kt9cFMkGpkEID6zXSDCsGW1uXDV6e0mgAuJ+YhMNy81XzQF+53KcwA6kWsRAn7iZWFf9lhAVG5qRMkMEfEtLwmHTcGq6J0lgvV54DBXU8XhpV3R9HHV6TtLoPWkfsNxmyzsLDnsdyoiAHnS+nnYJgn7TcF+UdGvw5M5M0Yc4SWhPntMdXrvE8DV5B4D9vCycN4UnPdwAYYZZGqtkn0yO6BfVN4BUWPyVCPc4iTHbVOwPjl0TamOREhabCcEFgjGGGRdudDAjaF1FAzPEpEl1U5sCyfb+03DiQXk1nt4hPnbBaK6vG2kwcO0g6Xy5ZUbzHwcmL6rg9eHNkZDoSkAsKVl99gmOy4bzVafZwrWq6H+UAYB4GA6wkD5dk4+qr+M4ccwTO6PFnVuri/7SwQZ7OU9Qqth8c9EQzARYcClvCQCIR1AhCluTVkdupuCJYEXxIGGOMXfZwRHDCAwu3nJPmMWNbzHavvrbRCNTSf//BHnWQaPWx81fygENQzrE1VR6SOi04g4Aywd47scXwtFTcF6G8XCYYmrsJ4r5ns6dcUW89pFrDV0qouIn3fpMlyKquaM+f+V+jfumS04MoJEFAAAAABJRU5ErkJggg=="},"./app/web/page/app/images/audio_on03.png":function(e,t,a){e.exports=a.p+"img/audio_on03.5090200f.png"},"./app/web/page/app/images/audio_on_icon.png":function(e,t,a){e.exports=a.p+"img/audio_on_icon.85fc17d1.png"},"./app/web/page/app/images/delete_icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAACjklEQVRYCe2YOYhTQRjHN4mFq6RI8FqP0gtEsBQtJN1WwiIrCGJhH9wgChHMARExxdoJYiUKwjayqIWNbyutrFQsLKw9whJIPCKJv9EX+PZdk3nDZiW+gWG++Y7/93/fzLxraippE16BlM31VavVMvFF+qYQnBeVSmU+lUoNQuxadRiwNtB1uDAYDHaGOUNsrlarbcf+KcxHp7cimE6nz/X7/bMkCcSB4AoVjE1OR/6fsPv2YLPZ3NrpdO7A7uAYGX4m12X29HtvTt/SdLvdk+yr817H9Z6zHV6T47o3j49gLpdzWq3WLRwP0fdD9rAKAuAJQ1/J69BUBe8F4fqWWDpxAq9yCG4qHQSnWYLv0j4OOT2OJDY5fEtsAzZqLCszy9a5hH+FVXkVFbchBCF3jX6CbbMKOXUfDW0btcTTLqPhGErQqoIszxGqcDybzT4olUrfZBZsZ5i3GZ9LvalsW8HHnPK77Xb7okxcr9ePsYRL6J5BcLe0mcq2BPe4CffKxJD7M2fMoN8lbaayLUHTfMb+CUHjknkCkgp6CmI8TSpoXDJPwMRX8Kd7wT/khXODlvOhj3QZWbZ6FvMcrpJpjv5QZszn8yu8lS+jW+VR90baTGUrgnxSLpJQ9TWtWCyqCp5eo4w5mfg9GLMuo4fpKvhLQFltB4GjxCGWxPe4/J3qCL4TUaeEHFtsNBozBB9wASR+IObwSgKN3C5eclJbjHkc7nMi1ffyB3Rx/1Zt6/V6C+BtVhj823kamFgoI7+LlR+k5hkeAar1FbhaEYK3wV7QOao33sjmOM7bQqHg4HQU0B2Mum0RiQfGRyp3BXI3Ih1do1FVAN2SyWT2jQIc5EPsl3K5/DXIluj+2wr8BtgLq6TBWX13AAAAAElFTkSuQmCC"},"./app/web/page/app/images/like2_icon.png":function(e,t,a){e.exports=a.p+"img/like2_icon.c7509f2a.png"},"./app/web/page/app/images/like_icon.png":function(e,t,a){e.exports=a.p+"img/like_icon.c400db7b.png"},"./app/web/page/app/images/noLike_icon.png":function(e,t,a){e.exports=a.p+"img/noLike_icon.5b51ac92.png"},"./app/web/page/app/images/notice.png":function(e,t,a){e.exports=a.p+"img/notice.7723a6ea.png"},"./app/web/page/app/images/pinglun_icon.png":function(e,t,a){e.exports=a.p+"img/pinglun_icon.50da5479.png"},"./app/web/page/app/images/right_icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAUCAYAAABbLMdoAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAC6ADAAQAAAABAAAAFAAAAABjDlpVAAAB50lEQVQoFX2TP0xTcRDH737vFYv0V2PYSDAmLCQOMsgGxhDjABRCoxjdnMSFIiTKQtKNOBDAxI0RBhj6B4YaHRoH6qaJkQQdTRyMgTbv0ZpK3++436/8GkgLv+Huvnefu7x3v/eQtsgp72YfE7nf5NvR73DJEV4h8zQgtaHg/+dyYrv/EhaEQPp1CkQCCnLe3E7vRQ1CLsc/CcQFDRBQJ9VqHyqzme5WDWiTfiK1qgimtebkPnTAQHQxfmDr2gsrIisTMxxvaE0AvVSBHCXzEVvXvgEjIkVv3XjGPmcAgn7vsJSm5F6bbWjAOoHP7xzL6+5DBCzUAbrvF3+sU5IMdw42DclYRV4NjSKC2TkRPPKK2XemVp/QbMuvsl21qtoFopsGdMRY02Tbxjeq+E0Dq5FUqCVMrz9eU9Xqe95Lj5kKsCZX4qkmmF4W2v1/Rzu8vtsGREjLgYkpHZ+Dea+uH/zZ5JscPJ2Ylz3hJziJ5nEaMBGhXyqtMRjTIF/jFxl2xnF6uGo0G8cGc8W+JW54oTXv+afoCA9deRMr2rr2rjZeIjXP4KyOeb+/Q27bg/bF4b9anz3oz6TvKUV5k0Q4FMK9K5fH9s5CNubPGbvqAivguCMXgZpB81sVMpPKcb9Gl2L7dkorfwJ7ALLjZ9IaHAAAAABJRU5ErkJggg=="},"./app/web/page/app/images/select.png":function(e,t,a){e.exports=a.p+"img/select.65b9fd04.png"},"./app/web/page/app/images/tips.png":function(e,t,a){e.exports=a.p+"img/tips.3301873d.png"},"./app/web/page/app/images/tipsBg_icon.png":function(e,t,a){e.exports=a.p+"img/tipsBg_icon.0688b9ea.png"},"./app/web/page/app/images/upAudio.png":function(e,t,a){e.exports=a.p+"img/upAudio.b009c11d.png"},"./app/web/page/app/images/upAudio_on.png":function(e,t,a){e.exports=a.p+"img/upAudio_on.cc4e5e5d.png"},"./app/web/page/app/view/aWeekNote/index.vue":function(e,t,a){"use strict";a.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"recongnition"},[t("img",{attrs:{src:a("./app/web/page/app/images/like2_icon.png"),alt:""}}),this._v("点赞了你的一周摘要\n                ")])}],n=(a("./node_modules/vant/es/toast/style/index.js"),a("./node_modules/vant/es/toast/index.js")),i=(a("./node_modules/vant/es/dialog/style/index.js"),a("./node_modules/vant/es/dialog/index.js")),o=a("./node_modules/@babel/runtime/helpers/slicedToArray.js"),r=a.n(o),c=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),l=a.n(c),p=(a("./node_modules/vant/es/form/style/index.js"),a("./node_modules/vant/es/form/index.js")),u=(a("./node_modules/vant/es/field/style/index.js"),a("./node_modules/vant/es/field/index.js")),d=(a("./node_modules/vant/es/calendar/style/index.js"),a("./node_modules/vant/es/calendar/index.js")),A=(a("./node_modules/vant/es/dropdown-item/style/index.js"),a("./node_modules/vant/es/dropdown-item/index.js")),g=(a("./node_modules/vant/es/dropdown-menu/style/index.js"),a("./node_modules/vant/es/dropdown-menu/index.js")),m=(a("./node_modules/vant/es/sticky/style/index.js"),a("./node_modules/vant/es/sticky/index.js")),v=(a("./node_modules/vant/es/nav-bar/style/index.js"),a("./node_modules/vant/es/nav-bar/index.js")),f=a("./node_modules/@babel/runtime/regenerator/index.js"),w=a.n(f),h=a("./app/web/page/app/utils/index.js"),b={components:{NavBar:v.a,"van-sticky":m.a,"van-dropdown-menu":g.a,"van-dropdown-item":A.a,"van-calendar":d.a,"van-field":u.a,"van-form":p.a},data:function(){return{navTitle:"一周计划表",isIos:Object(h.l)(),isIphoneX:Object(h.m)(),selectLabel:"全部",filter:"",baseApi:"",contactId:"",showTips:!1,onDate:"",messageTitle:"",messageNum:"",startDate:null,endDate:null,date:"04/01 - 04/07",minDate:new Date(2022,3,1),localeDate:"2022/3/8",weekDays:[{month:3,date:7,day:1,localeDate:"2022/3/7"}],abstractList:{morning:{title:"上午",list:[]},noon:{title:"下午",list:[]},evening:{title:"晚上",list:[]}},listData:[],durationList:{},audioShow:"",audioOn:1,timerInt:null,likeQuantity:0,currentIsLike:!1,commentQuantity:0,inpValue:"",audioFlag:!1,audioTime:0,setTime:null,showAudioBox:!1,isSelf:!1}},watch:{audioTime:function(e){e>59&&this.upStop()}},created:function(){var e=this;return l()(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.baseApi=e.$ctx.baseApi,e.contactId=e.$route.query.targetContactId,!e.$route.query.ImpersonatedContactID||!e.$route.query.loginName){t.next=7;break}e.ImpersonatedContactID=e.$route.query.ImpersonatedContactID,e.loginName=e.$route.query.loginName,t.next=15;break;case 7:if(!Object(h.o)()){t.next=15;break}return t.next=10,e.$jsBridge.getUserProfile();case 10:a="string"==typeof(a=t.sent)?JSON.parse(a):a,console.log("userProfile",a),e.loginName="".concat(a.last_name).concat(a.first_name),e.ImpersonatedContactID=a.contact_id;case 15:e.isSelf=e.contactId==e.ImpersonatedContactID,e.getNewDate(),e.getDataList(),e.getData(),e.getLikeData(),e.getMyRecognition();case 21:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return l()(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=function(t){e.getData(),e.getDataList(),e.getLikeData(),e.getMyRecognition()},e.$jsBridge.onFronted(a);case 2:case"end":return t.stop()}}),t)})))()},methods:{audioLoad:function(){setTimeout((function(){var e=document.querySelectorAll(".audio");console.log(e);for(var t=0;t<e.length;t++)e[t].load()}),0)},back:function(){Object(h.b)()},getData:function(){var e=this;return l()(w.a.mark((function t(){var a,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$request.get("".concat(e.baseApi,"/weeksummary/approval/unread/count"),{contactId:e.contactId});case 2:a=t.sent,s=a.data,e.messageTitle=s.title,e.messageNum=s.unreadQuantity;case 6:case"end":return t.stop()}}),t)})))()},getNewDate:function(){var e=new Date;this.onDate=this.formatDate(e),this.localeDate=this.formatDate(e);var t=e.getDay();t=t||7;var a=new Date(e.getTime()-864e5*(t-1)),s=new Date(e.getTime()+864e5*(7-t));this.startDate=a,this.endDate=s,this.date=Object(h.e)(a,"MM/DD")+"-"+Object(h.e)(s,"MM/DD"),this.getWeekDays(a,s)},getDataList:function(){var e=this;return l()(w.a.mark((function t(){var a,s,n,i,o,r,c,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={contactId:e.contactId,date:e.localeDate,summaryType:e.filter},t.next=3,e.$request.get("".concat(e.baseApi,"/weeksummary/list"),{params:a});case 3:s=t.sent,n=s.data,console.log(n),i=new Date("".concat(e.localeDate.replace(/-/g,"/")," 12:00:00")).getTime(),o=new Date("".concat(e.localeDate.replace(/-/g,"/")," 18:00:00")).getTime(),r=[],c=[],l=[],n.forEach((function(e){var t=new Date(e.eventTime.replace(/-/g,"/")).getTime();t<=i?r.push(e):t<=o?c.push(e):l.push(e)})),e.abstractList.morning.list=r,e.abstractList.noon.list=c,e.abstractList.evening.list=l;case 15:case"end":return t.stop()}}),t)})))()},getLikeData:function(){var e=this;return l()(w.a.mark((function t(){var a,s,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={approvalContactId:e.ImpersonatedContactID,contactId:e.contactId,date:e.onDate},t.next=3,e.$request.get("".concat(e.baseApi,"/weeksummary/approval/count"),{params:a});case 3:s=t.sent,n=s.data,console.log("点赞评论",n),e.commentQuantity=n.commentQuantity||0,e.currentIsLike=n.currentIsLike,e.likeQuantity=n.likeQuantity||0;case 9:case"end":return t.stop()}}),t)})))()},getMyRecognition:function(){var e=this;return l()(w.a.mark((function t(){var a,s,n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={contactId:e.contactId,pageNo:1,pageSize:5},t.next=3,e.$request.get("".concat(e.baseApi,"/weeksummary/approval/list"),{params:a});case 3:s=t.sent,n=s.data,console.log("认可",n),e.listData=n.pageList,e.audioLoad();case 8:case"end":return t.stop()}}),t)})))()},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return Object(h.e)(e,t)},formateDay:function(e){switch(e){case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 0:return"日"}},formateTime:function(e){e=e.replace(/-/g,"/");var t=new Date(e).getHours(),a=new Date(e).getMinutes();return a=a<10?"0"+a:a,"".concat(t=t<10?"0"+t:t,":").concat(a)},onConfirm:function(e){var t=r()(e,2),a=t[0],s=t[1];this.startDate=a,this.endDate=s,this.getWeekDays(a,s),this.date=Object(h.e)(a,"MM/DD")+"-"+Object(h.e)(s,"MM/DD"),this.$refs.dropdownMenu.toggle(),this.localeDate=this.formatDate(a),this.getDataList()},changeDay:function(e){this.localeDate=e,this.getDataList()},getWeekDays:function(e,t){e=e.getTime(),t=t.getTime(),this.weekDays=[];for(var a=e;a<=t;a+=864e5){var s=new Date(a);this.weekDays.push({month:s.getMonth()+1,date:s.getDate(),day:s.getDay(),localeDate:this.formatDate(s)})}},changeHandler:function(){this.getDataList()},deleteItem:function(e){var t=this;i.a.confirm({title:"确认要删除该条摘要吗?",confirmButtonColor:"#ED8DC3",confirmButtonText:"确定"}).then((function(){t.deleteData(e)})).catch((function(){}))},deleteData:function(e){var t=this;return l()(w.a.mark((function a(){var s,i;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={contactId:t.contactId},a.next=3,t.$request.delete("".concat(t.baseApi,"/weeksummary/").concat(e),{params:s});case 3:i=a.sent,i.data?n.a.success("删除成功！"):n.a.fail("删除失败,请稍后再试！"),t.getDataList();case 7:case"end":return a.stop()}}),a)})))()},onSubmit:function(e){var t=arguments,a=this;return l()(w.a.mark((function s(){var i,o,r,c;return w.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:0,o=t.length>2&&void 0!==t[2]?t[2]:null,!((e=e?e.trim():e)&&e.length>200)){s.next=7;break}return a.showTips=!0,setTimeout((function(){a.showTips=!1}),2e3),s.abrupt("return",!1);case 7:return r={approvalContactId:a.ImpersonatedContactID,approvalName:a.loginName,approvalType:i,resourceType:o,targetContactId:a.contactId,summaryDate:a.onDate,content:e},s.next=10,a.$request.post("".concat(a.baseApi,"/weeksummary/approval"),r);case 10:c=s.sent,c.data?(n.a.success("认可成功！"),a.getMyRecognition(),a.getLikeData(),a.inpValue="",a.$refs.fieldInp.blur()):n.a.fail("认可失败,请稍后再试！");case 13:case"end":return s.stop()}}),s)})))()},upStart:function(){var e=this;return l()(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.audioTime=0,e.audioFlag=!0,e.setTime=setInterval((function(){e.audioTime++}),1e3),t.next=5,e.$jsBridge.audioRecorder("start");case 5:a=t.sent,console.log("upStart",a);case 7:case"end":return t.stop()}}),t)})))()},upStop:function(){var e=this;return l()(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.audioFlag=!1,clearInterval(e.setTime),e.audioTime=0,t.next=5,e.$jsBridge.audioRecorder("stop");case 5:a=t.sent,console.log("upStop",a),a.result?e.onSubmit(a.url,0,1):n.a.fail("语音发送失败,请重试！"),e.showAudioBox=!1;case 9:case"end":return t.stop()}}),t)})))()},likeClick:function(){var e=this;return l()(w.a.mark((function t(){var a,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentIsLike){t.next=10;break}return a={approvalContactId:e.ImpersonatedContactID,contactId:e.contactId,summaryDate:e.onDate},t.next=4,e.$request.delete("".concat(e.baseApi,"/weeksummary/approval/like"),{params:a});case 4:s=t.sent,s.data?(n.a.success("已取消点赞！"),e.getMyRecognition()):n.a.fail("取消失败,请稍后再试！"),e.getLikeData(),t.next=11;break;case 10:e.onSubmit(null,1);case 11:case"end":return t.stop()}}),t)})))()},toList:function(){this.pauseAudio();var e="".concat(window.location.origin,"/a_week_note_list"),t={opaque:!1,targetContactId:this.contactId,startDate:this.formatDate(this.startDate).replace(/-/g,""),endDate:this.formatDate(this.endDate).replace(/-/g,"")};this.$go(e,t)},toMyRecognition:function(e){this.pauseAudio();var t="".concat(window.location.origin,"/a_week_note_myRecognition"),a={apiType:e,opaque:!1,targetContactId:this.contactId,ImpersonatedContactID:this.ImpersonatedContactID,isSelf:this.isSelf};this.$go(t,a)},toAddNote:function(e){if(!this.isSelf)return!1;this.pauseAudio();var t="".concat(window.location.origin,"/a_week_note_addNote"),a={opaque:!1,targetContactId:this.contactId};e&&(a.summaryId=e),this.$go(t,a)},formatter:function(e){return e.bottomInfo="",e},onAudio:function(e,t,a){var s=this;return l()(w.a.mark((function n(){var i,o,r,c;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e,t,a),(i=s.$refs[e][0]).paused){n.next=5;break}return i.pause(),n.abrupt("return",!1);case 5:if(s.pauseAudio(),setTimeout((function(){i.play(),s.audioShow=e,s.timerInt=setInterval((function(){s.audioOn>2?s.audioOn=1:s.audioOn++}),500)}),0),0!=a||!s.isSelf){n.next=15;break}return s.listData[t].read=1,o=s.$ctx.baseApi,n.next=12,s.$request.put("".concat(o,"/weeksummary/approval?contactId=").concat(s.contactId),[e]);case 12:r=n.sent,c=r.data,console.log(c);case 15:case"end":return n.stop()}}),n)})))()},pauseAudio:function(){for(var e=document.querySelectorAll(".audio"),t=0;t<e.length;t++)e[t].pause()},audioEnd:function(){this.audioShow="",clearInterval(this.timerInt),this.audioOn=1},getDuration:function(e){var t=this.$refs[e][0].duration;this.durationList[e]=t,this.$set(this.durationList,this.durationList[e],t)},format:function(e){return parseInt(e)+"″"},scrollEvent:function(e){var t=Math.round(this.$refs.scroll.getBoundingClientRect().right/this.$refs.scroll.children[0].offsetWidth),a=Array.from(this.$refs.scroll.children);switch(t){case a.length:t=0;break;case a.length-1:t=1;break;case a.length-2:t=2;break;case a.length-3:t=3;break;case a.length-4:t=4;break;default:return t=0,!1}a.forEach((function(e,a){e.className=a==t?"item active":"item"}))}}},_=(a("./app/web/page/app/view/aWeekNote/index.vue?vue&type=style&index=0&id=4621be3a&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),x=Object(_.a)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"indexPage",class:{isAndroid:!e.isIos,isIphoneX:e.isIphoneX}},[s("van-sticky",[s("NavBar",{attrs:{"left-text":"返回","right-text":"一周摘要",title:e.navTitle,border:!1,"safe-area-inset-top":!0},on:{"click-left":e.back,"click-right":e.toList},scopedSlots:e._u([{key:"left",fn:function(){return[s("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0}])})],1),e._v(" "),e.messageNum&&e.isSelf?s("div",{staticClass:"message",on:{click:function(t){return e.toMyRecognition("unread")}}},[s("img",{attrs:{src:a("./app/web/page/app/images/notice.png"),alt:""}}),e._v(" "),s("span",{staticClass:"msg"},[e._v(e._s(e.messageTitle))]),e._v(" "),s("span",{staticClass:"tips"},[e._v(e._s(e.messageNum))])]):e._e(),e._v(" "),s("div",{staticClass:"checkList"},[s("div",{staticClass:"checkBox"},[s("span",{staticClass:"label"},[e._v("时间选择：")]),e._v(" "),s("van-dropdown-menu",[s("van-dropdown-item",{ref:"dropdownMenu",scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{staticClass:"time"},[e._v(e._s(e.date))])]},proxy:!0}])},[e._v(" "),s("div",{staticClass:"shadowBox"},[s("van-calendar",{style:{height:"80vw"},attrs:{"show-title":!1,type:"range",poppable:!1,"min-date":e.minDate,"max-range":7,"default-date":[e.startDate,e.endDate],"allow-same-day":!0,color:"#F06EAE",formatter:e.formatter},on:{confirm:e.onConfirm}})],1)])],1)],1),e._v(" "),s("div",{staticClass:"checkBox"},[s("img",{attrs:{src:a("./app/web/page/app/images/select.png")}}),e._v(" "),s("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1},on:{change:e.changeHandler},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),s("el-option",{attrs:{label:"系统摘要",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"个人摘要",value:"1"}})],1)],1)]),e._v(" "),s("div",{staticClass:"outList"},[s("div",{staticClass:"weekList"},e._l(e.weekDays,(function(t){return s("div",{key:t.date,staticClass:"box",class:{active:t.localeDate==e.localeDate},on:{click:function(a){return e.changeDay(t.localeDate)}}},[s("div",{staticClass:"top"},[e._v(e._s(t.month)+"/"+e._s(t.date))]),e._v(" "),s("div",{staticClass:"bottom"},[e._v(e._s(e.formateDay(t.day)))])])})),0)]),e._v(" "),s("div",{staticClass:"dataList"},e._l(e.abstractList,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"item.list.length"}],key:t.title,staticClass:"itemBox"},[s("div",{staticClass:"title"},[s("span",{staticClass:"left"},[e._v(e._s(t.title))])]),e._v(" "),s("div",{staticClass:"content"},e._l(t.list,(function(t){return s("div",{key:t.summaryId,staticClass:"item"},[s("div",{staticClass:"time"},[e._v(e._s(e.formateTime(t.eventTime)))]),e._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"msg"},[s("div",{staticClass:"center",class:{selfMsg:t.summaryType},domProps:{innerHTML:e._s(t.eventContent)},on:{click:function(a){t.summaryType&&e.toAddNote(t.summaryId)}}},[e._v("\n                "+e._s(t.eventContent)+"\n              ")]),e._v(" "),t.summaryType&&e.isSelf?s("img",{attrs:{src:a("./app/web/page/app/images/delete_icon.png"),alt:""},on:{click:function(a){return e.deleteItem(t.summaryId)}}}):e._e()]),e._v(" "),s("div",{staticClass:"line"})])])})),0)])})),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.abstractList.morning.list.length&&!e.abstractList.noon.list.length&&!e.abstractList.evening.list.length,expression:"\n      !abstractList.morning.list.length &&\n      !abstractList.noon.list.length &&\n      !abstractList.evening.list.length\n    "}],staticClass:"abstractListMsg"},[s("img",{attrs:{src:a("./app/web/page/app/images/tipsBg_icon.png"),alt:""}}),e._v(" "),s("p",[e._v("当日没有计划"),e.isSelf?s("span",[e._v("，您可以点击右下角添加~")]):e._e()])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.listData&&e.listData.length||!e.isSelf,expression:"(listData && listData.length) || !isSelf"}],staticClass:"fixedBottomPart"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.listData&&e.listData.length,expression:"listData && listData.length"}],staticClass:"recognition"},[s("div",{staticClass:"title"},[s("div",{staticClass:"left"},[e._v("认可")]),e._v(" "),s("div",{staticClass:"right",on:{click:function(t){return e.toMyRecognition("all")}}},[e._v("\n          更多 "),s("img",{attrs:{src:a("./app/web/page/app/images/right_icon.png"),alt:""}})])]),e._v(" "),s("div",{staticClass:"outContent"},[s("div",{staticClass:"content",on:{scroll:function(t){return e.scrollEvent(t)}}},[s("ul",{ref:"scroll"},e._l(e.listData,(function(t,n){return s("li",{key:t.approvalId,staticClass:"item",class:{active:0==n}},[s("div",{staticClass:"top"},[s("div",{staticClass:"name"},[s("img",{staticClass:"contactImg",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+t.approvalContactId+"/avatar?size=60",alt:""}}),e._v("\n                  "+e._s(t.approvalName)+"\n                ")]),e._v(" "),s("div",{staticClass:"time"},[e._v(e._s(t.approvalTime))])]),e._v(" "),1==t.approvalType?s("div",{staticClass:"bottom"},[e._m(0,!0)]):e._e(),e._v(" "),0==t.resourceType?s("div",{staticClass:"bottom"},[s("p",{staticClass:"recText"},[e._v(e._s(t.content))])]):e._e(),e._v(" "),1==t.resourceType?s("div",{staticClass:"bottom"},[s("div",{staticClass:"recongnition"},[s("div",{staticClass:"audioBox",class:{read:0!=t.read||!e.isSelf},on:{click:function(a){return e.onAudio(t.approvalId,n,t.read)}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.audioShow==t.approvalId,expression:"audioShow == item.approvalId"}]},[s("img",{directives:[{name:"show",rawName:"v-show",value:1==e.audioOn,expression:"audioOn == 1"}],attrs:{src:a("./app/web/page/app/images/audio_on01.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:2==e.audioOn,expression:"audioOn == 2"}],attrs:{src:a("./app/web/page/app/images/audio_on02.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:3==e.audioOn,expression:"audioOn == 3"}],attrs:{src:a("./app/web/page/app/images/audio_on03.png"),alt:""}})]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.audioShow!=t.approvalId,expression:"audioShow != item.approvalId"}]},[s("img",{attrs:{src:a("./app/web/page/app/images/audio_on03.png"),alt:""}})])]),e._v(" "),s("div",{staticClass:"duration"},[e._v("\n                    "+e._s(e.format(e.durationList[t.approvalId]))+"\n                    "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.read&&e.isSelf,expression:"item.read == 0 && isSelf"}],staticClass:"circle"})]),e._v(" "),s("audio",{ref:t.approvalId,refInFor:!0,staticClass:"audio",attrs:{controls:"",src:t.content},on:{canplay:function(a){return e.getDuration(t.approvalId)},pause:e.audioEnd}})])]):e._e()])})),0)])])]),e._v(" "),e.isSelf?e._e():s("div",{staticClass:"bottomPart"},[s("div",{staticClass:"top"},[s("div",{staticClass:"inp"},[s("van-form",{on:{submit:function(t){return e.onSubmit(e.inpValue,0,0)}}},[s("van-field",{ref:"fieldInp",attrs:{placeholder:"认可她的摘要~",name:"content","right-icon":""},on:{focus:function(t){e.showAudioBox=!1}},scopedSlots:e._u([{key:"button",fn:function(){return[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.showAudioBox,expression:"!showAudioBox"}],staticClass:"audioImg",attrs:{src:a("./app/web/page/app/images/audio_icon.png"),alt:""},on:{click:function(t){e.showAudioBox=!e.showAudioBox}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:e.showAudioBox,expression:"showAudioBox"}],staticClass:"audioImg",attrs:{src:a("./app/web/page/app/images/audio_on_icon.png"),alt:""},on:{click:function(t){e.showAudioBox=!e.showAudioBox}}})]},proxy:!0}],null,!1,179127061),model:{value:e.inpValue,callback:function(t){e.inpValue=t},expression:"inpValue"}})],1)],1),e._v(" "),s("div",{staticClass:"like",on:{click:e.likeClick}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.currentIsLike,expression:"currentIsLike"}],attrs:{src:a("./app/web/page/app/images/like_icon.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.currentIsLike,expression:"!currentIsLike"}],attrs:{src:a("./app/web/page/app/images/noLike_icon.png"),alt:""}}),e._v("\n          "+e._s(e.likeQuantity)+"\n        ")]),e._v(" "),s("div",{staticClass:"msg"},[s("img",{attrs:{src:a("./app/web/page/app/images/pinglun_icon.png"),alt:""}}),e._v("\n          "+e._s(e.commentQuantity)+"\n        ")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAudioBox,expression:"showAudioBox"}],staticClass:"bottom",on:{touchstart:function(t){return t.preventDefault(),e.upStart.apply(null,arguments)},touchend:function(t){return t.preventDefault(),e.upStop.apply(null,arguments)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.audioFlag,expression:"audioFlag"}],staticClass:"audioLine"},[s("div",{staticClass:"lineBox"},[s("div",{staticClass:"line",class:{active:e.audioTime>=60}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=50}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=40}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=30}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=20}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=10}})]),e._v(" "),s("div",{staticClass:"time"},[e._v(e._s("0:"+e.audioTime))]),e._v(" "),s("div",{staticClass:"lineBox"},[s("div",{staticClass:"line",class:{active:e.audioTime>=10}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=20}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=30}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=40}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=50}}),e._v(" "),s("div",{staticClass:"line",class:{active:e.audioTime>=60}})])]),e._v(" "),s("div",[e._v("按住说话")]),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:e.audioFlag,expression:"audioFlag"}],attrs:{src:a("./app/web/page/app/images/upAudio_on.png"),alt:""}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.audioFlag,expression:"!audioFlag"}],attrs:{src:a("./app/web/page/app/images/upAudio.png"),alt:""}})])])]),e._v(" "),e.isSelf?s("div",{staticClass:"addBtn",on:{click:function(t){return e.toAddNote()}}},[s("img",{attrs:{src:a("./app/web/page/app/images/add_icon.png"),alt:""}})]):e._e(),e._v(" "),s("transition",{attrs:{name:"van-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTips,expression:"showTips"}],staticClass:"tipsBox"},[s("span",[e._v("不能超过200字")]),e._v(" "),s("img",{attrs:{src:a("./app/web/page/app/images/tips.png"),alt:""}})])])],1)}),s,!1,null,"4621be3a",null);t.default=x.exports},"./app/web/page/app/view/aWeekNote/index.vue?vue&type=style&index=0&id=4621be3a&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/index.vue?vue&type=style&index=0&id=4621be3a&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/index.vue?vue&type=style&index=0&id=4621be3a&lang=less&scoped=true&":function(e,t,a){}}]);