(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"./app/web/page/app/images/icon_q.png":function(e,t,a){e.exports=a.p+"img/icon_q.62693319.png"},"./app/web/page/app/images/nodata1.png":function(e,t,a){e.exports=a.p+"img/nodata1.75567d78.png"},"./app/web/page/app/view/aWeekNote/list.vue":function(e,t,a){"use strict";a.r(t);var o=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=a.n(o),n=(a("./node_modules/vant/es/sticky/style/index.js"),a("./node_modules/vant/es/sticky/index.js")),r=(a("./node_modules/vant/es/popup/style/index.js"),a("./node_modules/vant/es/popup/index.js")),l=(a("./node_modules/vant/es/nav-bar/style/index.js"),a("./node_modules/vant/es/nav-bar/index.js")),p=a("./node_modules/@babel/runtime/regenerator/index.js"),i=a.n(p),d=a("./app/web/page/app/utils/index.js"),c={name:"table-list",props:{tableData:Array,tableHeader:{type:Array,default:function(){return[{labelOne:"订单",labelTwo:[{top:"星期",bottom:"",prop:"weekDay"},{top:"RC顾客订单",bottom:"",prop:"orderRcCustomerAmt",formatter:function(e){return"¥"+(e.orderRcCustomerAmt||0)}},{top:"顾问BC订单",bottom:"",prop:"orderBcAmt",formatter:function(e){return"¥"+(e.orderBcAmt||0)}},{top:"顾问RC订单",bottom:"",prop:"orderBcRcAmt",formatter:function(e){return"¥"+(e.orderBcRcAmt||0)}}]},{labelOne:"事业",labelTwo:[{top:"女主人",bottom:"",prop:"addHostessCount"},{top:"新增顾客",bottom:"",prop:"addCustomerCount"},{top:"分享",bottom:"",prop:"shareCount"},{top:"肌肤分析仪",bottom:"邀约",prop:"inviteSkinTestCount"},{top:"三养健康",bottom:"邀约",prop:"inviteCareHelthCount"}]},{labelOne:"玫粉E站",labelTwo:[{top:"下载素材",bottom:"",prop:"downloadMaterialCount"},{top:"转发素材",bottom:"",prop:"fowardMaterialCount"},{top:"观看直播",bottom:"(分钟)",prop:"watchLiveShowDuration"},{top:"观看课程",bottom:"(分钟)",prop:"watchCourseDuration"},{top:"发帖(次)",bottom:"",prop:"postArticlesCount"},{top:"点赞(次)",bottom:"",prop:"likeCount"}]},{labelOne:"Intouch商城",labelTwo:[{top:"幸福小店",bottom:"素材下载",prop:"downloadHappyShopTimes"},{top:"幸福小店",bottom:"素材转发",prop:"fowardHappyShopTimes"}]}]}},border:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1}},data:function(){return{loadingText:"拼命加载中"}},mounted:function(){},methods:{callMobile:function(e){e&&(window.location.href="tel:".concat(e))}}},u=(a("./app/web/page/app/view/aWeekNote/table.vue?vue&type=style&index=0&id=5c17f81a&lang=less&scoped=true&"),a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),b={components:{commonTable:Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-table"},[a("el-table",{ref:"commonTable",attrs:{data:e.tableData,stripe:!0,"element-loading-text":e.loadingText,border:e.border}},e._l(e.tableHeader,(function(t){return a("el-table-column",{key:t.labelOne,attrs:{label:t.labelOne,align:"center",fixed:"订单"==t.labelOne,width:"订单"==t.labelOne?80:""}},e._l(t.labelTwo,(function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,fixed:"weekDay"==t.prop,align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){var s=o.row;return[a("span",[e._v("\n            "+e._s(t.formatter?t.formatter(s):s[t.prop]||0)+"\n          ")])]}}],null,!0)},[a("template",{slot:"header"},[e._v(e._s(t.top)),a("br"),e._v(e._s(t.bottom))])],2)})),1)})),1)],1)}),[],!1,null,"5c17f81a",null).exports,NavBar:l.a,"van-popup":r.a,"van-sticky":n.a},data:function(){return{navTitle:"一周摘要表",isIos:Object(d.l)(),popupTime:!1,showTable:!0,tableData:[]}},created:function(){var e=this;return s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.contactId=e.$route.query.targetContactId,e.startDate=e.$route.query.startDate,e.endDate=e.$route.query.endDate,e.getData();case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{getData:function(){var e=this;return s()(i.a.mark((function t(){var a,o,s,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$ctx.baseApi,o={contactId:e.contactId,startDate:e.startDate,endDate:e.endDate},t.next=4,e.$request.get("".concat(a,"/weeksummary/report"),{params:o});case 4:s=t.sent,n=s.data,e.tableData=n.summaryList,e.tableData&&e.tableData.length?e.showTable=!0:e.showTable=!1;case 8:case"end":return t.stop()}}),t)})))()},report:function(){var e=this;return s()(i.a.mark((function t(){var a,o,s,n,r,l,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$ctx.baseApi,(o={contactId:e.contactId,startDate:e.startDate,endDate:e.endDate}).ImpersonatedContactID=e.$route.query.ImpersonatedContactID,s="",!Object(d.o)()){t.next=10;break}return t.next=7,e.$jsBridge.getAccessToken();case 7:s=t.sent,t.next=15;break;case 10:return t.next=12,e.$request.get("/getAccessToken");case 12:n=t.sent,r=n.data,s=r.access_token;case 15:if(o.access_token=s,l="".concat(a,"/export/weeksummary/report?").concat(Object(d.c)(o)),console.log("url",l,o),!Object(d.o)()){t.next=30;break}return t.next=21,e.$jsBridge.downloadFile({url:l,overwrite:!0});case 21:if(!(p=t.sent).result){t.next=26;break}e.$jsBridge.shareLocalFile(p.filepath),t.next=28;break;case 26:return Toast("抱歉，导出失败，请重新导出"),t.abrupt("return");case 28:t.next=32;break;case 30:console.log(e.filterParams),location.href=l;case 32:case"end":return t.stop()}}),t)})))()},back:function(){Object(d.b)()}}},m=(a("./app/web/page/app/view/aWeekNote/list.vue?vue&type=style&index=0&id=729b83ba&lang=less&scoped=true&"),Object(u.a)(b,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"listPage",class:{isAndroid:!e.isIos}},[o("van-sticky",[o("NavBar",{attrs:{"left-text":"返回","right-text":"导出",title:e.navTitle,border:!1,"safe-area-inset-top":!0},on:{"click-left":e.back,"click-right":e.report},scopedSlots:e._u([{key:"left",fn:function(){return[o("img",{staticClass:"back_btn",attrs:{src:a("./app/web/page/app/images/index/icon_back.png"),alt:""}})]},proxy:!0},{key:"title",fn:function(){return[e._v("\n        "+e._s(e.navTitle)+"\n        "),o("img",{staticClass:"icon_q",attrs:{src:a("./app/web/page/app/images/icon_q.png"),alt:""},on:{click:function(t){e.popupTime=!e.popupTime}}})]},proxy:!0}])})],1),e._v(" "),e.showTable?o("common-table",{ref:"table",attrs:{id:"table-content",border:!1,tableData:e.tableData}}):e._e(),e._v(" "),e.showTable?e._e():o("div",{staticClass:"nodata"},[o("img",{attrs:{src:a("./app/web/page/app/images/nodata1.png"),alt:""}}),e._v(" "),o("div",[e._v("暂时没有数据")])]),e._v(" "),o("van-popup",{staticClass:"timePopup",attrs:{position:"center",round:"",closeable:""},model:{value:e.popupTime,callback:function(t){e.popupTime=t},expression:"popupTime"}},[o("div",{staticClass:"popupTime"},[o("div",{staticClass:"msg"},[o("span",[o("img",{attrs:{src:a("./app/web/page/app/images/mk_title_icon.png"),alt:""}}),e._v("数据规则说明")]),e._v(" "),o("div",{staticClass:"box"},[o("div",{staticClass:"title"},[e._v("事业")]),e._v(" "),o("p",[e._v("1.新增顾客:首次在玫琳凯下单的RC顾客")]),e._v(" "),o("p",[e._v("2.肌肤分析仪邀约:已经邀约完成的顾客")]),e._v(" "),o("p",[e._v("3.三养健康邀约:已经邀约完成的顾客（不含本人和儿童测试")])]),e._v(" "),o("div",{staticClass:"box"},[o("div",{staticClass:"title"},[e._v("玫粉E站")]),e._v(" "),o("p",[e._v("1.完成课程:在玫粉E站中已经学习完成的课程次数")]),e._v(" "),o("p",[e._v("2.正在学习课程:在玫粉E站中正在学习完成的课程数")]),e._v(" "),o("p",[e._v("3.发帖:在玫粉社区中的发帖次数")]),e._v(" "),o("p",[e._v("4.点赞:在玫粉E站中的点赞次数")])]),e._v(" "),o("div",{staticClass:"box"},[o("div",{staticClass:"title"},[e._v("Intouch商城")]),e._v(" "),o("p",[e._v("\n            1.幸福小店素材下载:产品图片下载、销售素材海报下载、配方海报下载\n          ")]),e._v(" "),o("p",[e._v("\n            2.幸福小店素材转发:首页-小店物料\n            幸福小店-销售物料、产品详情转发、配方转发\n          ")])])]),e._v(" "),o("div",{staticClass:"bottom"},[o("img",{attrs:{src:a("./app/web/page/app/images/mk_bottom_icon.png"),alt:""}})])])])],1)}),[],!1,null,"729b83ba",null));t.default=m.exports},"./app/web/page/app/view/aWeekNote/list.vue?vue&type=style&index=0&id=729b83ba&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/list.vue?vue&type=style&index=0&id=729b83ba&lang=less&scoped=true&")},"./app/web/page/app/view/aWeekNote/table.vue?vue&type=style&index=0&id=5c17f81a&lang=less&scoped=true&":function(e,t,a){"use strict";a("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/table.vue?vue&type=style&index=0&id=5c17f81a&lang=less&scoped=true&")},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/list.vue?vue&type=style&index=0&id=729b83ba&lang=less&scoped=true&":function(e,t,a){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/less-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./app/web/page/app/view/aWeekNote/table.vue?vue&type=style&index=0&id=5c17f81a&lang=less&scoped=true&":function(e,t,a){}}]);