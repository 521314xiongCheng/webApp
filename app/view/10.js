exports.ids=[10],exports.modules={115:function(t,e,a){var i=a(119);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(57).default;t.exports.__inject__=function(t){n("ca7aef08",i,!0,t)}},116:function(t,e,a){"use strict";var i={name:"table-list",props:{tableData:Object,border:{type:Boolean,default:!0},isFullScreen:{type:Boolean,default:!1},setClassName:Function},data:()=>({loadingText:"拼命加载中"}),mounted(){},methods:{sortChange(t){this.$emit("sortChange",t)},headerClick(t,e){this.$emit("headerClick",t,e)},rowClickchange(t){this.$emit("rowClickchange",t)},cellClick(t,e,a,i){this.$emit("cellClick",{row:t,column:e,event:a,cell:i})}}},n=a(10);var o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-table"},[a("el-table",{ref:"commonTable",attrs:{data:t.tableData.data,stripe:!0,"element-loading-text":t.loadingText,"show-header":t.tableData.showHeader,height:t.tableData.height,"header-cell-class-name":"common-table-header","cell-class-name":t.setClassName,border:t.border},on:{"sort-change":t.sortChange,"header-click":t.headerClick,"row-click":t.rowClickchange,"cell-click":t.cellClick}},[t._t("between"),t._v(" "),t._l(t.tableData.header,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,fixed:e.fixed,"min-width":e.minWidth,"max-width":e.maxWidth,sortable:e.sortable,"sort-orders":["descending","ascending",null],align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",[t._v(t._s(e.formatter?e.formatter(i.row,i.$index):i.row[e.prop]))])]}}],null,!0)})})),t._v(" "),t._t("default")],2)],1)}),[],!1,(function(t){var e=a(118);e.__inject__&&e.__inject__(t)}),"797892fe","3e91d5e2");e.a=o.exports},118:function(t,e,a){"use strict";a.r(e);var i=a(115);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},119:function(t,e,a){(e=a(56)(!1)).push([t.i,'[data-v-797892fe] .el-table,[data-v-797892fe] .el-table thead{color:#333}[data-v-797892fe] .el-table thead tr th{background-color:#fafafa}.common-table[data-v-797892fe] .cell-class_avatar .cell{overflow:unset}.common-table[data-v-797892fe] .cell-class_avatar .cell .avatar-wrap{position:relative;width:10.667vmin;height:10.667vmin;margin:0 auto;content:"viewport-units-buggyfill; width: 10.667vmin; height: 10.667vmin"}.common-table[data-v-797892fe] .cell-class_avatar .cell .avatar-wrap .avatar{width:10.667vmin;height:10.667vmin;border-radius:50%;object-fit:cover;vertical-align:middle;content:"viewport-units-buggyfill; width: 10.667vmin; height: 10.667vmin"}.common-table[data-v-797892fe] .cell-class_avatar .cell .avatar-wrap .icon_crown{position:absolute;width:5.333vmin;height:5.2vmin;right:-2vmin;top:-2vmin;-webkit-transform:rotate(4deg);transform:rotate(4deg);content:"viewport-units-buggyfill; width: 5.333vmin; height: 5.2vmin; right: -2vmin; top: -2vmin"}.common-table[data-v-797892fe] .user{white-space:nowrap}.common-table[data-v-797892fe] .user-info .user_name{position:relative;display:inline-block;color:#333;white-space:normal;font-weight:700}.common-table[data-v-797892fe] .user-info .user_name .icon{position:absolute;width:2.667vmin;height:2.667vmin;right:-3.2vmin;top:1.333vmin;content:"viewport-units-buggyfill; width: 2.667vmin; height: 2.667vmin; right: -3.2vmin; top: 1.333vmin"}.common-table[data-v-797892fe] .user .tags{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.common-table[data-v-797892fe] .user .tags span{padding:0 .8vmin;line-height:3.467vmin;display:inline-block;text-align:center;font-size:2.667vmin;content:"viewport-units-buggyfill; padding: 0 0.8vmin; line-height: 3.467vmin; font-size: 2.667vmin"}.common-table[data-v-797892fe] .user .tags .level{background-color:rgba(241,110,159,.15);color:#f16e9f}.common-table[data-v-797892fe] .user .tags .status{background-color:rgba(110,116,241,.15);color:#8288f5;margin-left:.4vmin;content:"viewport-units-buggyfill; margin-left: 0.4vmin"}.common-table[data-v-797892fe] .user .tags .self{background-color:rgba(255,107,40,.15);color:#ff783c;margin-left:.4vmin;content:"viewport-units-buggyfill; margin-left: 0.4vmin"}.common-table[data-v-797892fe] .user .no-self{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.common-table[data-v-797892fe] .user .no-self span{line-height:2.667vmin;display:inline-block;text-align:center;font-size:2.667vmin;content:"viewport-units-buggyfill; line-height: 2.667vmin; font-size: 2.667vmin"}.common-table[data-v-797892fe] .user .no-self .level,.common-table[data-v-797892fe] .user .no-self .status{color:#898989;background-color:#fff}.common-table[data-v-797892fe] .user .no-self .line{width:1px;height:2.4vmin;background:#b1b6c0;margin:0 .933vmin 0 1.333vmin;content:"viewport-units-buggyfill; height: 2.4vmin; margin: 0 0.933vmin 0 1.333vmin"}.common-table[data-v-797892fe] .el-table .descending .sort-caret.descending{border-top-color:#f16eae}.common-table[data-v-797892fe] .el-table .ascending .sort-caret.ascending{border-bottom-color:#f16eae}.common-table[data-v-797892fe] .el-table .cell{padding:0}.common-table[data-v-797892fe] .cell-class_estimateProductionAmt .cell{padding:1.6vmin 0;content:"viewport-units-buggyfill; padding: 1.6vmin 0"}.common-table[data-v-797892fe] .el-table th.el-table__cell>.cell{padding:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;white-space:pre-wrap}',""]),t.exports=e},120:function(t,e,a){t.exports=a.p+"img/search_back.40a06b97.png"},121:function(t,e,a){t.exports=a.p+"img/crown.25c5a039.png"},122:function(t,e,a){t.exports=a.p+"img/icon_input_search.8351fb55.png"},123:function(t,e,a){t.exports=a.p+"img/nodata.ab62307b.png"},134:function(t,e,a){"use strict";e.a={mounted(){let t=document.querySelector(".search-bar"),e=document.querySelector(".el-table__header-wrapper"),a=document.querySelector(".el-table__body-wrapper");window.addEventListener("scroll",i=>{let n=document.querySelector(".el-table__fixed-header-wrapper");(document.documentElement.scrollTop||document.body.scrollTop)>=t.clientHeight?(n.style.cssText="position: fixed;top: 0;width: 130px;z-index: 4;overflow: hidden;",e.style.cssText="position: fixed;top: 0;z-index: 4;",a.style.cssText=`padding-top: ${e.clientHeight}px`):(n.style.cssText="position: absolute;top: 0",e.style.cssText="position: unset;",a.style.cssText="padding-top: 0;")})}}},139:function(t,e,a){var i=a(147);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(57).default;t.exports.__inject__=function(t){n("516a3e69",i,!0,t)}},140:function(t,e,a){"use strict";var i=a(3),n=a(1),o=a(7),s=a.n(o),r={props:{contactId:"",productionName:"",queryType:"",pageName:{type:String,default:"UnitDetailsPage"},inputEventName:{type:String,default:"UnitDetailsRetailProdClick"},lastMonthEventName:{type:String,default:"UnitDetailsLastMonthProdClick"},sixMonthEventName:{type:String,default:"UnitDetailsSixMonthProdClick"},saveEventName:{type:String,default:"UnitDetailsSaveRetailProdClick"},inviteEventName:{type:String,default:"UnitDetailsInviteToSetTargetClick"}},data:()=>({isIos:Object(n.l)(),pro:"",show:!1,lastMonth:!1,halfYear:!1,productionAmtMdata:{reference:{}},fullscreen:!1,showProductionAction:!1,zIndex:100}),methods:{onInput(t){this.pro+=t,this.productionAmtMdata.targetProductionAmt=Number(this.pro.split(",").join("")),this.estimateData(this.productionAmtMdata.targetProductionAmt)},onDelete(){console.log(this.productionAmtMdata.targetProductionAmt),this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.targetProductionAmt.toString(),""!=this.productionAmtMdata.targetProductionAmt&&(this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.targetProductionAmt.slice(0,this.productionAmtMdata.targetProductionAmt.length-1)),this.estimateData(Number(this.productionAmtMdata.targetProductionAmt))},shareToWechat(){this.$track({context:this.pageName,behavior:this.inviteEventName,item_type:this.pageName,item_id:this.inviteEventName}),i.Dialog.confirm({message:"是否邀请设置收入目标"}).then(()=>{this.share()}).catch(()=>{})},async share(){let t=this.$ctx.baseApi;const e=await this.$request.post(t+"/invite/link");console.log(e);const a={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"https://dev-community-s3.marykay.com.cn/DEV/MyBizIntouch_Content_Cms/LibraryResource/20210917102605_661.png",mediatype:"webpage",scene:"WXSceneSession",url:`${this.$ctx.baseShareUrl}?linkKey=${e.data.linkKey}`};this.$jsBridge.shareToWechat(a)},async addproduction(){if(this.$track({context:this.pageName,behavior:this.saveEventName,item_type:this.pageName,item_id:this.saveEventName}),this.productionAmtMdata.targetProductionAmt<this.productionAmtMdata.productionAmt)return void this.$toast("评估绩效请大于已达成绩效～");let t=this.$ctx.baseApi;const e={setByContactId:s.a.get("ImpersonatedInfo").targetContactId,memberContactId:this.contactId,targetAmt:this.productionAmtMdata.targetProductionAmt},{data:a}=await this.$request.post(t+"/target/production",e);console.log(a),this.pro="",this.show=!1,this.fullscreen=!1,this.$emit("addProduction",this.productionAmtMdata.targetProductionAmt)},lastMonthpro(){this.$track({context:this.pageName,behavior:this.lastMonthEventName,item_type:this.pageName,item_id:this.lastMonthEventName}),this.lastMonth=!0,this.halfYear=!1,this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.reference.lastMonthProductionAmt,this.estimateData(this.productionAmtMdata.targetProductionAmt)},halfYearpro(){this.$track({context:this.pageName,behavior:this.sixMonthEventName,item_type:this.pageName,item_id:this.sixMonthEventName}),this.lastMonth=!1,this.halfYear=!0,this.productionAmtMdata.targetProductionAmt=this.productionAmtMdata.reference.halfYearAvgProductionAmt,this.estimateData(this.productionAmtMdata.targetProductionAmt)},openNumber(){this.$track({context:this.pageName,behavior:this.inputEventName,item_type:this.pageName,item_id:this.inputEventName}),this.show=!0,this.lastMonth=!1,this.halfYear=!1,this.pro="",this.fullscreen=!0},async estimateData(t){console.log(t,"data");let e=this.$ctx.baseApi;const a={};a.memberContactId=this.contactId,a.estimateProductionAmt=t;const i=await this.$request.get(e+"/estimate/production",{params:a});this.productionAmtMdata.incomeDescribe=i.data.incomeDescribe},close(){this.lastMonth=!1,this.halfYear=!1,this.show=!1,this.fullscreen=!1,this.pro="",this.zIndex=100}},components:{"van-number-keyboard":i.NumberKeyboard,"van-action-sheet":i.ActionSheet},watch:{async showProductionAction(t){if(t){let t=Object(n.i)();console.log(t),this.zIndex=t+5e3;const e={queryType:this.queryType,memberContactId:this.contactId};let a=this.$ctx.baseApi;const{data:i}=await this.$request.get(a+"/estimate/production",{params:e});this.productionAmtMdata=i}}}},c=a(10);var l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{isAndroid:!t.isIos}},[i("van-action-sheet",{class:{"production-action":t.fullscreen},attrs:{title:t.productionName+"绩效评估","close-on-click-overlay":!0},on:{close:t.close},model:{value:t.showProductionAction,callback:function(e){t.showProductionAction=e},expression:"showProductionAction"}},[i("div",{staticClass:"content"},[i("div",[i("p",{staticClass:"title"},[t._v("\n          零售绩效设定\n          "),i("span",[t._v(" ("+t._s(t._f("formatDate")(new Date,"YYYY-MM"))+") ")])]),t._v(" "),i("div",{staticClass:"change"},[i("div",{staticClass:"changebg",on:{click:t.openNumber}},[i("span",[t._v("\n              "+t._s(t._f("formatMoney")(t.productionAmtMdata.targetProductionAmt))+"\n            ")]),t._v(" "),i("img",{staticClass:"edit",attrs:{src:a(145),alt:""}})]),t._v(" "),i("div",{staticClass:"sum"},[t._v("\n            （当月已达成绩效"+t._s(t._f("formatMoney")(t.productionAmtMdata.productionAmt))+"）\n          ")])])]),t._v(" "),i("div",[i("p",{staticClass:"title"},[t._v("目标参考")]),t._v(" "),i("div",{staticClass:"productmap"},[i("div",{class:{productionBg:t.lastMonth},on:{click:t.lastMonthpro}},[i("p",[t._v("上个月绩效")]),t._v(" "),i("p",[t._v("\n              "+t._s(t._f("formatMoney")(t.productionAmtMdata.reference&&t.productionAmtMdata.reference.lastMonthProductionAmt))+"\n            ")])]),t._v(" "),i("div",{class:{productionBg:t.halfYear},on:{click:t.halfYearpro}},[i("p",[t._v("近6个月平均绩效")]),t._v(" "),i("p",[t._v("\n              "+t._s(t._f("formatMoney")(t.productionAmtMdata.reference&&t.productionAmtMdata.reference.halfYearAvgProductionAmt))+"\n            ")])])])]),t._v(" "),i("div",[i("p",{staticClass:"title"},[t._v("收益分析")]),t._v(" "),i("div",{staticClass:"Income"},[i("p",{domProps:{innerHTML:t._s(t.productionAmtMdata.incomeDescribe)}}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:Number(this.$route.query.targetContactId)!==Number(this.contactId),expression:"\n              Number(this.$route.query.targetContactId) !==\n                Number(this.contactId)\n            "}],staticClass:"active",on:{click:t.shareToWechat}},[t._v("\n            邀请她设置当月收入目标\n          ")])])]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.addproduction}},[t._v("保存绩效")])])]),t._ssrNode(" "),i("van-number-keyboard",{attrs:{show:t.show,theme:"custom","close-button-text":"完成",maxlength:7,"hide-on-click-outside":!1,"z-index":t.zIndex},on:{blur:function(e){t.show=!1,t.fullscreen=!1},input:t.onInput,delete:t.onDelete},model:{value:t.pro,callback:function(e){t.pro=e},expression:"pro"}})],2)}),[],!1,(function(t){var e=a(146);e.__inject__&&e.__inject__(t)}),"e4ab8824","350e4328");e.a=l.exports},145:function(t,e,a){t.exports=a.p+"img/edit.299796b3.png"},146:function(t,e,a){"use strict";a.r(e);var i=a(139);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},147:function(t,e,a){(e=a(56)(!1)).push([t.i,'.title[data-v-e4ab8824]{font-size:4.267vmin;color:#303133;line-height:3.733vmin;content:"viewport-units-buggyfill; font-size: 4.267vmin; line-height: 3.733vmin"}.content>div[data-v-e4ab8824]{margin-top:5.333vmin;content:"viewport-units-buggyfill; margin-top: 5.333vmin"}.content[data-v-e4ab8824]{padding:3.333vmin;content:"viewport-units-buggyfill; padding: 3.333vmin"}.change[data-v-e4ab8824]{-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline}.change[data-v-e4ab8824],.changebg[data-v-e4ab8824]{display:-webkit-box;display:-webkit-flex;display:flex}.changebg[data-v-e4ab8824]{position:relative;margin-top:3.333vmin;width:39.067vmin;height:10.8vmin;border-radius:1.333vmin;background:#fff7fa;padding:0 2vmin;line-height:10.8vmin;font-size:6.667vmin;color:#f16eae;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;content:"viewport-units-buggyfill; margin-top: 3.333vmin; width: 39.067vmin; height: 10.8vmin; border-radius: 1.333vmin; padding: 0 2vmin; line-height: 10.8vmin; font-size: 6.667vmin"}.edit[data-v-e4ab8824]{width:3.333vmin;height:3.333vmin;content:"viewport-units-buggyfill; width: 3.333vmin; height: 3.333vmin"}.sum[data-v-e4ab8824]{font-size:3.2vmin;color:#303133;margin-left:2.667vmin;content:"viewport-units-buggyfill; font-size: 3.2vmin; margin-left: 2.667vmin"}.productmap[data-v-e4ab8824]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:3.333vmin;content:"viewport-units-buggyfill; margin-top: 3.333vmin"}.productmap>div[data-v-e4ab8824]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin:.533vmin;height:13.333vmin;background:#f8f8f8;border-radius:1.067vmin;font-size:3.2vmin;text-align:center;font-weight:400;color:#484848;padding:2vmin 0;box-sizing:border-box;content:"viewport-units-buggyfill; margin: 0.533vmin; height: 13.333vmin; border-radius: 1.067vmin; font-size: 3.2vmin; padding: 2vmin 0px"}.productmap .active[data-v-e4ab8824]{background:#fff7fa}.Income[data-v-e4ab8824]{width:100%;border:1px dotted #f16eae;border-radius:1.067vmin;padding:2vmin;font-size:3.733vmin;color:#484848;line-height:4.8vmin;margin-top:3.333vmin;content:"viewport-units-buggyfill; border-radius: 1.067vmin; padding: 2vmin; font-size: 3.733vmin; line-height: 4.8vmin; margin-top: 3.333vmin"}.Income span[data-v-e4ab8824]{color:#f16eae}.Income .active[data-v-e4ab8824]{color:#f16eae;text-align:right;margin-top:1.333vmin;content:"viewport-units-buggyfill; margin-top: 1.333vmin"}.btn[data-v-e4ab8824]{width:47.467vmin;height:8.133vmin;background:#f16eae;box-shadow:0 1px .4vmin 0 hsla(0,0%,100%,.5);border-radius:4.133vmin;margin:2.667vmin auto;text-align:center;line-height:8.133vmin;color:#fff;content:"viewport-units-buggyfill; width: 47.467vmin; height: 8.133vmin; box-shadow: 0px 1px 0.4vmin 0px rgba(255, 255, 255, 0.5); border-radius: 4.133vmin; margin: 2.667vmin auto; line-height: 8.133vmin"}.productmap .productionBg[data-v-e4ab8824]{background-color:#fff7fa;color:#f16eae}.production-action[data-v-e4ab8824]{height:100vh;-webkit-transition:all .3s;transition:all .3s;max-height:100vh;content:"viewport-units-buggyfill; height: 100vh; max-height: 100vh"}.isAndroid .production-action[data-v-e4ab8824]{top:7.333vmin;content:"viewport-units-buggyfill; top: 7.333vmin"}',""]),t.exports=e},200:function(t,e,a){var i=a(291);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(57).default;t.exports.__inject__=function(t){n("7ec3d948",i,!0,t)}},290:function(t,e,a){"use strict";a.r(e);var i=a(200);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},291:function(t,e,a){(e=a(56)(!1)).push([t.i,'.search-wrap .search-bar[data-v-29e398c5]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.search-wrap .search-bar .back_btn[data-v-29e398c5]{width:2.667vmin;height:4.8vmin;margin-left:5.6vmin;content:"viewport-units-buggyfill; width: 2.667vmin; height: 4.8vmin; margin-left: 5.6vmin"}.search-wrap .search-bar .van-search__content[data-v-29e398c5]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:9.333vmin;width:75.733vmin;background-color:#f5f5f5;border-radius:4.667vmin;content:"viewport-units-buggyfill; height: 9.333vmin; width: 75.733vmin; border-radius: 4.667vmin"}.search-wrap .search-bar .van-search__content[data-v-29e398c5] .van-field__control{font-size:4vmin;content:"viewport-units-buggyfill; font-size: 4vmin"}.search-wrap .search-bar .search-bar__btn[data-v-29e398c5]{width:15.47vw;text-align:center;content:"viewport-units-buggyfill; width: 15.47vw"}.search-wrap .is_active[data-v-29e398c5]{color:#fe88a0!important}.search-wrap .no_data[data-v-29e398c5]{padding:10vw;text-align:center;color:#909399;content:"viewport-units-buggyfill; padding: 10vw"}.search-wrap .no_data .table-empty__bg[data-v-29e398c5]{width:53vw;height:32vw;background-repeat:round;background-size:cover;content:"viewport-units-buggyfill; width: 53vw; height: 32vw"}.search-wrap .avatar[data-v-29e398c5]{width:10.667vmin;height:10.667vmin;border-radius:50%;content:"viewport-units-buggyfill; width: 10.667vmin; height: 10.667vmin"}.search-wrap .icon_crown[data-v-29e398c5]{position:absolute;width:4.267vmin;right:3.467vmin;top:.933vmin;content:"viewport-units-buggyfill; width: 4.267vmin; right: 3.467vmin; top: 0.933vmin"}.search-wrap .assess-performance[data-v-29e398c5]{position:relative;display:inline-block}.search-wrap .assess-performance-btn[data-v-29e398c5]{padding:0 1.6vmin;height:5.6vmin;background-color:#fff7fd;color:#f16eae;font-size:3.2vmin;border-color:#ffa7d2;border-radius:1.2vmin;content:"viewport-units-buggyfill; padding: 0 1.6vmin; height: 5.6vmin; font-size: 3.2vmin; border-radius: 1.2vmin"}.search-wrap .assess-performance-tip[data-v-29e398c5]{position:absolute;width:3.2vmin;height:3.2vmin;right:-1.333vmin;top:0;content:"viewport-units-buggyfill; width: 3.2vmin; height: 3.2vmin; right: -1.333vmin"}',""]),t.exports=e},432:function(t,e,a){"use strict";a.r(e);var i=a(3),n=a(1),o=a(116),s=a(140),r=a(134);const c=[{name:"个人详情",prop:"profile"},{name:"新人行动",prop:"nbcAction"},{name:"添加笔记",prop:"addNote"},{name:"邀请设置收入目标",prop:"setTarget"}];var l={data(){return{isFullScreen:!1,isIos:Object(n.l)(),loading:!0,finished:!1,tableData:{header:[],data:[]},currentTableName:"apply",applyHeader:[{label:"累计零售\n绩效",width:80,prop:"totalProductionAmt",formatter:t=>Object(n.f)(t.totalProductionAmt)},{label:"零售绩效\n达成4800",width:80,prop:"productionAmtReachedStatus",formatter:t=>t.productionAmtReachedStatus?"已达成":"未达成"},{label:"培养A状态\n顾问数",width:80,prop:"trainAContactNum",formatter:t=>t.trainAContactNum+"/10"},{label:"DIQ网上申请\n和自测",width:90,prop:"onlineSelfExamStatus",formatter:t=>{switch(t.onlineSelfExamStatus){case 0:return"未自测";case 1:return"已通过";case 2:return"未通过"}}},{label:"是否有行为\n规范处理",width:90,prop:"citationStatus"}],assessHeader:[{label:"DIQ考核\n月份",prop:"assessMonthNo",formatter:t=>this.assessMonthNoMap(t.assessMonthNo)},{label:"累计零售\n绩效",prop:"productionAmt",formatter:t=>Object(n.f)(t.productionAmt)},{label:"零售绩效\n达成4800",prop:"isProductionReach",formatter:t=>t.isProductionReach?"已达成":"未达成"},{label:"累计DIQ\n沙龙绩效",prop:"diqProductionAmt",formatter:t=>Object(n.f)(t.diqProductionAmt)},{label:"DIQ沙龙绩效\n达成45000",prop:"isDiqProductionReach",minWidth:"90px",formatter:t=>t.isDiqProductionReach?"已达成":"未达成"},{label:"DIQ沙龙\nA成员",prop:"activeConsultantCount",minWidth:"90px"},{label:"DIQ沙龙成员\n达成20A",prop:"isActiveConsultantCountReach",minWidth:"90px",formatter:t=>t.isActiveConsultantCountReach?"已达成":"未达成"},{label:"每月A状态",prop:"isActiveEveryMonth",formatter:t=>{let e=Number(this.$route.query.monthKey.substr(4,6));return t.isActiveEveryMonth?"已达成":e+"月未达成"}},{label:"是否有行为\n规范处理",prop:"citationDate",formatter:t=>t.citationDate?t.citationDate:"-"},{label:"管理类别",prop:"offSpringLineNumber"},{label:"督导姓名",prop:"directorName"}],filter:{pageSize:50,pageNo:1,businessType:"AREA_ONE",sortEnum:"OFF_SPRING_LINE_NUMBER",orderEnum:"ASC"},actions:[],showActions:!1,currentData:{},total:1,monthKey:"",isNoData:!1,keyword:"",pageName:"DIQDetailsPage",levelCode:97}},mixins:[r.a],components:{commonTable:o.a,List:i.List,"van-search":i.Search,"van-button":i.Button,"van-icon":i.Icon,"van-action-sheet":i.ActionSheet,productionSheet:s.a},created(){const{monthKey:t,businessType:e,targetContactId:a,currentTabName:i,levelCode:n}=this.$route.query;this.monthKey=t,this.levelCode=Number(n),this.filter.businessType=e,this.targetContactId=a,this.currentTabName=i,this.tableData.header=this[i+"Header"]},methods:{addZero:t=>t<10?"0"+t:t,back(){Object(n.b)()},onCancel(){this.$track({context:this.pageName,behavior:"DIQDetailsCancelClick",item_type:this.pageName,item_id:"DIQDetailsCancelClick"}),Object(n.b)()},onSearch(t){console.log(t),this.$track({context:this.pageName,behavior:"DIQDetailsSearchIconClick",item_type:this.pageName,item_id:"DIQDetailsSearchIconClick",attributes:{search_content:t}}),this.filter.search=t,this.filter.pageNo=1,this.tableData.data=[],this.loadData()},async loadData(){let t=document.documentElement.scrollTop||document.body.scrollTop;this.loading=!0;const{pageNo:e,pageSize:a,search:i,sortEnum:n,orderEnum:o}=this.filter,s={pageNo:e,pageSize:a,search:i,sortEnum:n,orderEnum:o};let r=this.$ctx.baseApi,c=r+"/reports/area-diq";"apply"===this.currentTabName&&(c=r+"/reports/diq/applyperiod");const{data:l}=await this.$request.get(c,{params:s});let d=l.members||l.pageList;d.map(t=>{t.isProductionReach?t.isProductionReach="已达成":t.isProductionReach="未达成",t.isActiveConsultantCountReach?t.isActiveConsultantCountReach="已达成":t.isActiveConsultantCountReach="未达成",t.isDiqProductionReach?t.isDiqProductionReach="已达成":t.isDiqProductionReach="未达成",null!=t.notActiveMonth&&""!=t.notActiveMonth||(t.notActiveMonth="-"),null!=t.citationDate&&""!=t.citationDate||(t.citationDate="-")}),this.loading=!1,l.hasNextPage?this.finished=!1:this.finished=!0;const m=new Map;let h=this.tableData.data.concat(d);this.tableData.data=h.filter(t=>!m.has(t.contactId)&&m.set(t.contactId,1)),this.tableData.data&&this.tableData.data.length?this.isNoData=!1:(this.isNoData=!0,this.keyword=this.filter.search),window.scrollTo(0,t),this.filter.pageNo=this.filter.pageNo+1},async onRefresh(){this.finished=!1,this.filter.pageNo=1,this.tableData.data=[],this.loadData()},async setTargetIncome(){i.Dialog.confirm({message:"是否邀请设置收入目标"}).then(()=>{this.share()}).catch(()=>{})},async handleClickAvatar(t){this.currentData=t;let e=this.$ctx.baseApi;const{data:{isNew:a}}=await this.$request.get(`${e}/goldenweek/newconsultant?contactId=${t.contactId}`);let i=Object(n.d)(c);t.setTargetIncomeAmt?i[3].name="邀请修改收入目标":i[3].name="邀请设置收入目标","operation"===this.accountType&&(i.forEach((t,e,a)=>{"setTarget"!==t.prop&&"nbcAction"!==t.prop||a.splice(e,1)}),Number(t.careerLevelCode)<50&&i.forEach((t,e,a)=>{"call"===t.prop&&a.splice(e,1)})),a||i.forEach((t,e,a)=>{"nbcAction"===t.prop&&a.splice(e,1)}),this.actions=i,this.showActions=!0},async share(){let t=this.$ctx.baseApi;const e=await this.$request.post(t+"/invite/link");console.log(e);const a={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"https://dev-community-s3.marykay.com.cn/DEV/MyBizIntouch_Content_Cms/LibraryResource/20210917102605_661.png",mediatype:"webpage",scene:"WXSceneSession",url:`${this.$ctx.baseShareUrl}?linkKey=${e.data.linkKey}`};this.$jsBridge.shareToWechat(a)},async onSelect(t){let e=this.$ctx.baseApi;switch(t.prop){case"follow":const{data:t}=await this.$request.post(e+"/focus",{focusContactId:this.currentData.contactId.toString()});this.currentData.isFocus=!this.currentData.isFocus,console.log(this.currentData.isFocus);break;case"profile":this.$track({context:this.pageName,behavior:"DIQDetailsClick",item_type:this.pageName,item_id:"DIQDetailsClick"});let a=window.location.origin+"/profile";const n={opaque:!1,targetContactId:this.currentData.contactId,levelCode:this.currentData.careerLevelCode,followed:this.$route.query.targetContactId};this.$go(a,n);break;case"setTarget":this.$track({context:this.pageName,behavior:"DIQDetailsSetIncomeTargetClick",item_type:this.pageName,item_id:"DIQDetailsSetIncomeTargetClick"});let{setTargetIncomeAmt:o}=this.currentData,s=o?"是否邀请修改收入目标":"是否邀请设置收入目标";i.Dialog.confirm({message:s}).then(()=>{this.share()}).catch(()=>{});break;case"assess":let r="team";Number(this.currentData.careerLevelCode)>=60&&(r="unit");let c=`${window.location.origin}/${r}`;const l={opaque:!1,isSelf:!1,targetContactId:this.currentData.contactId,levelCode:this.currentData.careerLevelCode,monthKey:this.monthKey,navTitle:"收入目标评估"};this.$go(c,l);break;case"call":window.location.href="tel:"+this.currentData.mobile;break;case"nbcAction":this.toActionPlan();break;case"addNote":this.goAddNote()}this.showActions=!1},toActionPlan(){let t=window.location.origin+"/nbcActionPlan";const e={opaque:!1,targetContactId:this.currentData.contactId};this.$go(t,e)},async goAddNote(){const{data:t}=await this.$request.get(`${this.$ctx.baseApi}/notes/check?followContactId=${this.currentData.contactId}&contactId=${this.targetContactId}`);let e=window.location.origin+"/note",a={opaque:!1,targetContactId:this.currentData.contactId,name:this.currentData.name,levelCode:this.currentData.careerLevelCode,followed:this.targetContactId};t.hasNote||(e=window.location.origin+"/addNote",a={targetContactId:this.currentData.contactId,name:this.currentData.name,opaque:!1,levelCode:this.currentData.careerLevelCode,from:"addNote_none",followed:this.targetContactId}),console.log("params",a),this.$go(e,a)},sortMap:t=>({totalProductionAmt:"TOTAL_PRODUCTION_AMT",productionAmtReachedStatus:"PRODUCTION_AMT_REACHED_STATUS",trainAContactNum:"TRAIN_A_CONTACT_NUM",onlineSelfExamStatus:"ONLINE_SELF_EXAM_STATUS",citationStatus:"CITATION_STATUS",offSpringLineNumber:"OFF_SPRING_LINE_NUMBER"}[t]),sortChange({column:t,prop:e,order:a}){a?("descending"===a?a="desc":"ascending"===a&&(a="asc"),this.filter.sortEnum=this.sortMap(e),this.filter.orderEnum=a.toLocaleUpperCase()):(this.filter.sortEnum=null,this.filter.orderEnum=null),this.tableData.data=[],this.filter.pageNo=1,this.loadData()},assessMonthNoMap(t){switch(t){case 0:return"第一月";case 1:return"第二月";case 2:return"第三月";case 3:return"第四月";case 4:return"第五月";case 5:return"第六月";case 6:return"第七月";case 7:return"第八月";case 8:return"第九月";case 9:return"第十月"}},setClassName:({row:t,column:e})=>"name"===e.property?"cell-class_name":"avatar"===e.property?"cell-class_avatar":"estimateProductionAmt"===e.property?"cell-class_estimateProductionAmt":void 0}},d=a(10);var m=Object(d.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-wrap"},[t._ssrNode('<div class="search-bar" data-v-29e398c5>',"</div>",[t._ssrNode("<img"+t._ssrAttr("src",a(120))+' alt class="back_btn" data-v-29e398c5> '),i("van-search",{staticClass:"table-search",attrs:{"show-action":"",placeholder:"请输入姓名/手机号搜索"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left-icon",fn:function(){return[i("img",{staticClass:"icon-input-search",attrs:{src:a(122),alt:""}})]},proxy:!0}]),model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search","string"==typeof e?e.trim():e)},expression:"filter.search"}})],2),t._ssrNode(" "),t._ssrNode('<div class="search-result"'+t._ssrStyle(null,null,{display:t.tableData.data.length?"":"none"})+" data-v-29e398c5>","</div>",[i("List",{attrs:{finished:t.finished,"finished-text":t.tableData.data&&t.tableData.data.length?"没有更多了":""},on:{load:t.loadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("common-table",{ref:"unitTable",attrs:{id:"table-content",border:!1,tableData:t.tableData,isFullScreen:t.isFullScreen,setClassName:t.setClassName},on:{sortChange:t.sortChange}},[i("el-table-column",{attrs:{fixed:"left",width:"60px",label:"头像",prop:"avatar",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("div",{staticClass:"avatar-wrap"},[i("img",{staticClass:"avatar",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+n.contactId+"/avatar?size=60",alt:""},on:{click:function(e){return t.handleClickAvatar(n)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:n.setTargetIncomeAmt,expression:"row.setTargetIncomeAmt"}],staticClass:"icon_crown",attrs:{src:a(121),alt:""}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"姓名",fixed:"left",width:"70px",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"user"},[i("div",{staticClass:"user-info"},[i("div",{staticClass:"user_name"},[i("span",{staticClass:"climp"},[t._v(t._s(a.name))])])]),t._v(" "),t.targetContactId===a.contactId.toString()?i("div",{staticClass:"tags"},[i("span",{staticClass:"level"},[t._v(t._s(a.careerLevelCode))]),t._v(" "),i("span",{staticClass:"status"},[t._v(t._s(a.activityStatusCode))]),t._v(" "),i("span",{staticClass:"self"},[t._v("本人")])]):i("div",{staticClass:"no-self"},[i("span",{staticClass:"level"},[t._v(t._s(a.careerLevelCode))]),t._v(" "),i("span",{staticClass:"line"}),t._v(" "),i("span",{staticClass:"status"},[t._v(t._s(a.activityStatusCode))])])])]}}])}),t._v(" "),t.levelCode>60&&"apply"===t.currentTabName?i("el-table-column",{attrs:{prop:"offSpringLineNumber",label:"管理类别",width:"100",align:"center",sortable:"custom"}}):t._e(),t._v(" "),t.levelCode>60&&"apply"===t.currentTabName?i("el-table-column",{attrs:{prop:"directorName",align:"center",label:"督导姓名"}}):t._e()],1)],1)],1),t._ssrNode(" "+(t.isNoData?'<div class="no_data" data-v-29e398c5><div data-v-29e398c5><img'+t._ssrAttr("src",a(123))+' alt class="table-empty__bg" data-v-29e398c5></div>\n    未查询到<span class="is_active" data-v-29e398c5>'+t._ssrEscape("“"+t._s(t.keyword)+"”")+"</span>的数据\n  </div>":"\x3c!----\x3e")+" "),i("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect},model:{value:t.showActions,callback:function(e){t.showActions=e},expression:"showActions"}})],2)}),[],!1,(function(t){var e=a(290);e.__inject__&&e.__inject__(t)}),"29e398c5","29b4dda6");e.default=m.exports}};