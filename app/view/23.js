exports.ids=[23],exports.modules={117:function(t,a,i){t.exports=i.p+"img/refresh-icon.4584a5b2.gif"},125:function(t,a,i){t.exports=i.p+"img/nodata1.75567d78.png"},150:function(t,a,i){t.exports=i.p+"img/audio_on03.5090200f.png"},162:function(t,a,i){t.exports=i.p+"img/like2_icon.c7509f2a.png"},163:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAARxJREFUWEftlbFOAkEURe+dxQ62tzAW2tkSWuUDjKGRT7BzNYaeLzBZvgIt3FjYr52WUvgJ9NgIg+GZ3YIQgkwzwxa+aSe5Z+7JmxmiosWKuFDwzsyralUdzIAOVzC168GqGvIoET5zst/+Cel9qXp6+3xsF4uBCE4JMQDfTa2W1O/PP0IcoAR/370c2rkdARKvQkhYE+21QsBL8OQ6ewDkclMzgq/xoHPmu3UJ/kqexiLY/wM8a5wcNHjVnPuEVwueJNkQIt2Njck8Tjttn22LrO3DBc4MTaueXoyCgIvQaS87slbS8joREQRvhtFNCOiy8Wob6Rd3ODc7e0B8q3Tl6SfhMuRtX1V7U+kKUtUuQ972VbU3la6g/6f6F9kyVCnLcysdAAAAAElFTkSuQmCC"},164:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAAXNSR0IArs4c6QAAAyRJREFUWEft1k1IFGEYAOD3nVnNbGe2iA5F0sGoQOoQpZeghMz+bJ2FfoQg+6EusbNpBUHYkofoz3YGOhmSeMiCdtZKi0iyg2CXRBHBDh29le6sbfs7b4y0v+zGzC6bh5zjft/3PvO+3/d+OwhL9OASubAM/7PKL5c6b6kXXEpLXIMnCDDMlVe24IPGn8Xsi6FSB9t8VbG4NkMEK3UMEUa5Cu4I3m3wF4obgv2i9xkQnMpAEL5gJRzg7zi+F4IbghdEX2McqB+IVqcjiPiGl4SmksF6YLXNuwXi+IqItmbgAK287Og1ixvKOBF0ca9jNE5Aa5MQ4rxlBVOz6p591gxuCtYD+13KIdRgkIBSaxnstHmEjpLCi2V3KU9JozOprOGbTXJUFwXTC2JhegTRXR/LF8gv+uqAtLGMvWbYPbzHPmoUT5YrdGVgc0TTZCLYi0AMAH5mLBbR2tU0kSuYKnoniGBHYowB7OBkodMU/Kt9cFMkGpkEID6zXSDCsGW1uXDV6e0mgAuJ+YhMNy81XzQF+53KcwA6kWsRAn7iZWFf9lhAVG5qRMkMEfEtLwmHTcGq6J0lgvV54DBXU8XhpV3R9HHV6TtLoPWkfsNxmyzsLDnsdyoiAHnS+nnYJgn7TcF+UdGvw5M5M0Yc4SWhPntMdXrvE8DV5B4D9vCycN4UnPdwAYYZZGqtkn0yO6BfVN4BUWPyVCPc4iTHbVOwPjl0TamOREhabCcEFgjGGGRdudDAjaF1FAzPEpEl1U5sCyfb+03DiQXk1nt4hPnbBaK6vG2kwcO0g6Xy5ZUbzHwcmL6rg9eHNkZDoSkAsKVl99gmOy4bzVafZwrWq6H+UAYB4GA6wkD5dk4+qr+M4ccwTO6PFnVuri/7SwQZ7OU9Qqth8c9EQzARYcClvCQCIR1AhCluTVkdupuCJYEXxIGGOMXfZwRHDCAwu3nJPmMWNbzHavvrbRCNTSf//BHnWQaPWx81fygENQzrE1VR6SOi04g4Aywd47scXwtFTcF6G8XCYYmrsJ4r5ns6dcUW89pFrDV0qouIn3fpMlyKquaM+f+V+jfumS04MoJEFAAAAABJRU5ErkJggg=="},166:function(t,a,i){t.exports=i.p+"img/audio_bg_un.4c3f832c.png"},167:function(t,a,i){t.exports=i.p+"img/audio_bg.6137da50.png"},219:function(t,a,i){var e=i(380);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i(57).default;t.exports.__inject__=function(t){n("1c844b86",e,!0,t)}},379:function(t,a,i){"use strict";i.r(a);var e=i(219);for(var n in e)"default"!==n&&function(t){i.d(a,t,(function(){return e[t]}))}(n)},380:function(t,a,i){var e=i(56),n=i(59),s=i(166),o=i(167);a=e(!1);var r=n(s),l=n(o);a.push([t.i,'.isAndroid[data-v-76d949db] .van-nav-bar{padding-top:7.333vmin;content:"viewport-units-buggyfill; padding-top: 7.333vmin"}[data-v-76d949db] .van-nav-bar{background-color:#f16eae;z-index:4}[data-v-76d949db] .van-nav-bar .van-nav-bar__content{height:10.667vmin;content:"viewport-units-buggyfill; height: 10.667vmin"}[data-v-76d949db] .van-nav-bar .van-nav-bar__content .van-nav-bar__left .back_btn{width:2.267vmin;height:4.267vmin;content:"viewport-units-buggyfill; width: 2.267vmin; height: 4.267vmin"}[data-v-76d949db] .van-nav-bar .van-nav-bar__content .van-nav-bar__title{color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}[data-v-76d949db] .van-nav-bar .van-nav-bar__content .van-nav-bar__title .icon_q{width:4vmin;height:4vmin;margin-left:1.333vmin;content:"viewport-units-buggyfill; width: 4vmin; height: 4vmin; margin-left: 1.333vmin"}[data-v-76d949db] .van-nav-bar .van-nav-bar__content .van-nav-bar__text{color:#fff}.content .item .itemBox[data-v-76d949db]{display:-webkit-box;display:-webkit-flex;display:flex;padding:4vmin;border-bottom:.267vmin solid #ebebeb;content:"viewport-units-buggyfill; padding: 4vmin; border-bottom: 0.267vmin solid #ebebeb"}.content .item .contactImg[data-v-76d949db]{width:10.667vmin;height:10.667vmin;border-radius:50%;content:"viewport-units-buggyfill; width: 10.667vmin; height: 10.667vmin"}.content .item .right[data-v-76d949db]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;margin-left:3.2vmin;padding-top:1.2vmin;content:"viewport-units-buggyfill; margin-left: 3.2vmin; padding-top: 1.2vmin"}.content .item .right .top[data-v-76d949db]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.content .item .right .top .name[data-v-76d949db]{font-size:4vmin;font-weight:700;color:#303133;content:"viewport-units-buggyfill; font-size: 4vmin"}.content .item .right .top .time[data-v-76d949db]{font-size:3.2vmin;color:#909399;content:"viewport-units-buggyfill; font-size: 3.2vmin"}.content .item .right .msg[data-v-76d949db]{margin-top:1.333vmin;width:62.4vmin;font-size:3.467vmin;color:#909399;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;word-break:break-all;content:"viewport-units-buggyfill; margin-top: 1.333vmin; width: 62.4vmin; font-size: 3.467vmin"}.content .item .right .msg .audio[data-v-76d949db]{display:none}.content .item .right .msg img[data-v-76d949db]{width:3.733vmin;height:auto;margin-right:.8vmin;content:"viewport-units-buggyfill; width: 3.733vmin; margin-right: 0.8vmin"}.content .item .right .msg .audioBox[data-v-76d949db]{width:29.6vmin;height:6.667vmin;padding-left:3.867vmin;padding-top:1.333vmin;background:url('+r+') no-repeat;background-size:100% 100%;margin-left:-1.2vmin;content:"viewport-units-buggyfill; width: 29.6vmin; height: 6.667vmin; padding-left: 3.867vmin; padding-top: 1.333vmin; margin-left: -1.2vmin"}.content .item .right .msg .audioBox img[data-v-76d949db]{width:2vmin;content:"viewport-units-buggyfill; width: 2vmin"}.content .item .right .msg .read[data-v-76d949db]{background:url('+l+') no-repeat;background-size:100% 100%}.content .item .right .msg .duration[data-v-76d949db]{position:relative;margin-left:1.333vmin;content:"viewport-units-buggyfill; margin-left: 1.333vmin"}.content .item .right .msg .duration .circle[data-v-76d949db]{width:1.333vmin;height:1.333vmin;background:#f16eae;border-radius:50%;position:absolute;top:-2vmin;content:"viewport-units-buggyfill; width: 1.333vmin; height: 1.333vmin; top: -2vmin"}.content .delete-button[data-v-76d949db]{height:100%}',""]),t.exports=a},447:function(t,a,i){"use strict";i.r(a);var e=i(3),n=i(1),s={components:{NavBar:e.NavBar,"van-sticky":e.Sticky,List:e.List,"van-pull-refresh":e.PullRefresh,"van-swipe-cell":e.SwipeCell,"van-button":e.Button},data:()=>({navTitle:"我的认可",isIos:Object(n.l)(),popupTime:!1,contactId:"",impersonatedContactId:"",isSelf:!0,hasNextPage:!1,refreshing:!1,finished:!1,showTable:!0,loading:!0,refreshDisable:!1,pageNo:1,listData:[],durationList:{},loop:0,audioShow:"",audioOn:1,timerInt:null}),async created(){this.contactId=this.$route.query.targetContactId,this.impersonatedContactId=this.$route.query.ImpersonatedContactID||this.$route.query.targetContactId,void 0!==this.$route.query.isSelf&&(this.isSelf=JSON.parse(this.$route.query.isSelf)),"unread"==this.$route.query.apiType?this.getUnreadData():"all"==this.$route.query.apiType&&this.getAllData()},async mounted(){},methods:{audioLoad(){setTimeout(()=>{const t=document.querySelectorAll(".audio");console.log(t);for(var a=0;a<t.length;a++)t[a].load()},0)},async getAllData(){let t=document.documentElement.scrollTop||document.body.scrollTop;this.loading=!0;let a=this.$ctx.baseApi,i={contactId:this.contactId,pageNo:this.pageNo,pageSize:20};const{data:e}=await this.$request.get(a+"/weeksummary/approval/list",{params:i});console.log(e),this.listData=this.listData.concat(e.pageList||[]),this.pageNo=e.pageNo+1,this.hasNextPage=e.hasNextPage,this.finished=!e.hasNextPage,this.refreshing=!1,this.loading=!1,this.listData&&this.listData.length?this.showTable=!0:this.showTable=!1,this.audioLoad(),window.scrollTo(0,t)},async getUnreadData(){let t=this.$ctx.baseApi;const{data:a}=await this.$request.get(`${t}/weeksummary/approval/unread/list?contactId=${this.contactId}`);console.log(a),this.listData=a,this.loading=!1,this.finished=!0,this.refreshDisable=!0,this.listData&&this.listData.length?this.showTable=!0:this.showTable=!1,this.read(),this.audioLoad()},async onRefresh(){this.finished=!1,this.refreshing=!0,this.pageNo=1,this.listData=[],this.getAllData()},async onAudio(t,a,i){console.log(t,a,i);const e=this.$refs,n=e[t][0];if(!n.paused)return n.pause(),!1;for(let t in e)e[t][0].pause();if(setTimeout(()=>{n.play(),this.audioShow=t,this.timerInt=setInterval(()=>{this.audioOn>2?this.audioOn=1:this.audioOn++},500)},0),0==i&&this.isSelf){this.listData[a].read=1;let i=this.$ctx.baseApi;const{data:e}=await this.$request.put(`${i}/weeksummary/approval?contactId=${this.contactId}`,[t]);console.log(e)}},audioEnd(){this.audioShow="",clearInterval(this.timerInt),this.audioOn=1},getDuration(t){const a=this.$refs[t][0].duration;this.durationList[t]=a,this.$set(this.durationList,this.durationList[t],a)},format:t=>t?parseInt(t)+"″":"0″",async read(){let t=[];if(this.listData.forEach(a=>{1!=a.resourceType&&t.push(a.approvalId)}),console.log("arr",t),t.length){let a=this.$ctx.baseApi;const{data:i}=await this.$request.put(`${a}/weeksummary/approval?contactId=${this.contactId}`,t);console.log(i)}},async deleteData(t){let a=this.$ctx.baseApi,i={approvalContactId:t.approvalContactId};if(0==t.approvalType){console.log("评论");const{data:n}=await this.$request.delete(`${a}/weeksummary/approval/${t.approvalId}`,{params:i});n?(e.Toast.success("删除成功！"),this.listData.forEach((a,i)=>{a.approvalId==t.approvalId&&this.listData.splice(i,1)}),this.listData.length||this.back()):e.Toast.fail("删除失败,请稍后再试！")}else{console.log("点赞"),i.summaryDate=t.approvalTime,i.contactId=this.contactId;const{data:n}=await this.$request.delete(a+"/weeksummary/approval/like",{params:i});n?(e.Toast.success("删除成功！"),this.listData.forEach((a,i)=>{a.approvalId==t.approvalId&&this.listData.splice(i,1)}),this.listData.length||this.back()):e.Toast.fail("删除失败,请稍后再试！")}},beforeClose(t){e.Dialog.confirm({title:"确认要删除该条认可评论吗？",confirmButtonText:"确定"}).then(()=>{this.deleteData(t)}).catch(()=>{console.log("catch")})},back(){Object(n.b)()}}},o=i(10);var r=Object(o.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"listPage",class:{isAndroid:!t.isIos}},[e("van-sticky",[e("NavBar",{attrs:{"left-text":"返回",title:t.navTitle,border:!1,"safe-area-inset-top":!0},on:{"click-left":t.back},scopedSlots:t._u([{key:"left",fn:function(){return[e("img",{staticClass:"back_btn",attrs:{src:i(58),alt:""}})]},proxy:!0}])})],1),t._ssrNode(" "),e("van-pull-refresh",{attrs:{"head-height":100,disabled:t.refreshDisable},on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(){return[e("div",{staticClass:"refresh-icon"},[e("img",{attrs:{src:i(117),alt:""}})]),t._v(" "),e("p",{staticClass:"refresh-text"},[t._v("下拉刷新")])]},proxy:!0},{key:"loosing",fn:function(){return[e("div",{staticClass:"refresh-icon"},[e("img",{attrs:{src:i(117),alt:""}})]),t._v(" "),e("p",{staticClass:"refresh-text"},[t._v("松开刷新")])]},proxy:!0},{key:"loading",fn:function(){return[e("div",{staticClass:"refresh-icon"},[e("img",{attrs:{src:i(117),alt:""}})]),t._v(" "),e("p",{staticClass:"refresh-text"},[t._v("刷新中")])]},proxy:!0}]),model:{value:t.refreshing,callback:function(a){t.refreshing=a},expression:"refreshing"}},[t._v(" "),t._v(" "),t._v(" "),t.showTable?e("List",{attrs:{finished:t.finished,"finished-text":t.listData&&t.listData.length?"无更多内容":""},on:{load:t.getAllData},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("div",{staticClass:"content"},t._l(t.listData,(function(a,n){return e("div",{key:a.approvalId,staticClass:"item"},[e("van-swipe-cell",{attrs:{disabled:!t.isSelf&&t.impersonatedContactId!=a.approvalContactId},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(i){return t.beforeClose(a)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"itemBox"},[e("img",{staticClass:"contactImg",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+a.approvalContactId+"/avatar?size=60",alt:""}}),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"top"},[e("div",{staticClass:"name"},[t._v(t._s(a.approvalName))]),t._v(" "),e("div",{staticClass:"time"},[t._v(t._s(a.approvalTime))])]),t._v(" "),1==a.approvalType?e("div",{staticClass:"msg"},[e("img",{attrs:{src:i(162),alt:""}}),t._v("点赞了你的一周摘要\n                ")]):t._e(),t._v(" "),0==a.resourceType?e("div",{staticClass:"msg"},[t._v("\n                  "+t._s(a.content)+"\n                ")]):t._e(),t._v(" "),1==a.resourceType?e("div",{staticClass:"msg"},[e("div",{staticClass:"audioBox",class:{read:0!=a.read||!t.isSelf},on:{click:function(i){return t.onAudio(a.approvalId,n,a.read)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.audioShow==a.approvalId,expression:"audioShow == item.approvalId"}]},[e("img",{directives:[{name:"show",rawName:"v-show",value:1==t.audioOn,expression:"audioOn == 1"}],attrs:{src:i(163),alt:""}}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:2==t.audioOn,expression:"audioOn == 2"}],attrs:{src:i(164),alt:""}}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:3==t.audioOn,expression:"audioOn == 3"}],attrs:{src:i(150),alt:""}})]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.audioShow!=a.approvalId,expression:"audioShow != item.approvalId"}]},[e("img",{attrs:{src:i(150),alt:""}})])]),t._v(" "),e("div",{staticClass:"duration"},[t._v("\n                    "+t._s(t.format(t.durationList[a.approvalId]))+"\n                    "),e("div",{directives:[{name:"show",rawName:"v-show",value:0==a.read&&t.isSelf,expression:"item.read == 0 && isSelf"}],staticClass:"circle"})]),t._v(" "),e("audio",{ref:a.approvalId,refInFor:!0,staticClass:"audio",attrs:{controls:"",src:a.content},on:{canplay:function(i){return t.getDuration(a.approvalId)},pause:t.audioEnd}})]):t._e()])])])],1)})),0)]):t._e(),t._v(" "),t.showTable?t._e():e("div",{staticClass:"nodata"},[e("img",{attrs:{src:i(125),alt:""}}),t._v(" "),e("div",[t._v("暂时没有数据")])])],1)],2)}),[],!1,(function(t){var a=i(379);a.__inject__&&a.__inject__(t)}),"76d949db","f86d6c9e");a.default=r.exports}};