exports.ids=[44],exports.modules={194:function(t,a,e){var n=e(278);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e(57).default;t.exports.__inject__=function(t){i("b7ff2bec",n,!0,t)}},276:function(t,a,e){t.exports=e.p+"img/link.d532aa3e.png"},277:function(t,a,e){"use strict";e.r(a);var n=e(194);for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i)},278:function(t,a,e){(a=e(56)(!1)).push([t.i,'.my-income[data-v-0928f2aa]{background-color:#ee4d9b}.my-income-content[data-v-0928f2aa]{padding-top:env(safe-area-inset-top);margin-top:10.667vmin;width:100vw;background-color:#fff;min-height:30vh;content:"viewport-units-buggyfill; margin-top: 10.667vmin; width: 100vw; min-height: 30vh"}.my-income .income-data[data-v-0928f2aa]{border-bottom:2.66666667vw solid #f3f4f7;content:"viewport-units-buggyfill; border-bottom: 2.66666667vw solid #f3f4f7"}.my-income .income-data-year[data-v-0928f2aa]{font-size:4.26666667vw;color:#333;line-height:10.93333333vw;padding:0 4vw;font-weight:700;content:"viewport-units-buggyfill; font-size: 4.26666667vw; line-height: 10.93333333vw; padding: 0 4vw"}.my-income .table-amount[data-v-0928f2aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.my-income .table-amount img[data-v-0928f2aa]{width:1.46666667vw;height:2.4vw;margin-left:2vw;content:"viewport-units-buggyfill; width: 1.46666667vw; height: 2.4vw; margin-left: 2vw"}.my-income[data-v-0928f2aa] .van-notice-bar__content{font-size:3.2vw;line-height:4.26666667vw;content:"viewport-units-buggyfill; font-size: 3.2vw; line-height: 4.26666667vw"}.my-income[data-v-0928f2aa] .van-hairline--bottom:after{border:none}[data-v-0928f2aa] .el-table .cell,[data-v-0928f2aa] .el-table th.el-table__cell>.cell{padding:0 4vw;content:"viewport-units-buggyfill; padding: 0 4vw"}[data-v-0928f2aa] .el-table td,[data-v-0928f2aa] .el-table th.is-leaf{border:none}[data-v-0928f2aa] .el-table:before{height:0}.isAndroid .my-income-content[data-v-0928f2aa]{margin-top:18vmin;content:"viewport-units-buggyfill; margin-top: 18vmin"}.isAndroid[data-v-0928f2aa] .van-nav-bar{padding-top:7.333vmin;content:"viewport-units-buggyfill; padding-top: 7.333vmin"}[data-v-0928f2aa] .van-nav-bar{background-color:#ee4d9b}[data-v-0928f2aa] .van-nav-bar .van-nav-bar__content{height:10.667vmin;content:"viewport-units-buggyfill; height: 10.667vmin"}[data-v-0928f2aa] .van-nav-bar .van-nav-bar__content .van-nav-bar__left .back_btn{width:2.267vmin;height:4.267vmin;content:"viewport-units-buggyfill; width: 2.267vmin; height: 4.267vmin"}[data-v-0928f2aa] .van-nav-bar .van-nav-bar__content .van-nav-bar__right .customer_btn{width:5.333vmin;height:5.333vmin;content:"viewport-units-buggyfill; width: 5.333vmin; height: 5.333vmin"}[data-v-0928f2aa] .van-nav-bar .van-nav-bar__title{color:#fff;font-size:4vmin;content:"viewport-units-buggyfill; font-size: 4vmin"}',""]),t.exports=a},428:function(t,a,e){"use strict";e.r(a);var n=e(3),i=e(1),o=e(37),r={components:{"van-notice-bar":n.NoticeBar,NavBar:n.NavBar},data:()=>({isIos:Object(i.l)(),options:{useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"￥ ",suffix:"",decimalPlaces:2},tableOptions:{useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:"",decimalPlaces:2},incomeData:[],impersonatedContactId:"20002868550",monthKey:null}),async mounted(){const{monthKey:t}=this.$route.query;console.log("monthKey",t),this.monthKey=t;let a=this.$ctx.baseApiList.income;a=a.replace("v1","v2");try{this.impersonatedContactId=this.$ctx.targetContactId;let t=(await this.$request.get(a+"/prodIncome/incomeTotal",{headers:{impersonatedContactId:this.impersonatedContactId}})).data.data.sort((t,a)=>a.monthKey-t.monthKey),e=[...new Set(t.map(t=>t.monthKey.slice(0,4)))];this.incomeData=[],e.forEach(a=>{this.incomeData.push({year:a,monthDatas:t.filter(t=>t.monthKey.includes(a))})})}catch(t){console.log(t)}},methods:{back(){Object(i.b)()},async customer(){let t=await Object(o.a)()+"&title=我的客服";this.$jsBridge.openSchema(t)},format_number(t){if(null===t)return"-";t=t.toFixed(2);let a=(t+="").split("."),e=a[0],n=a.length>1?"."+a[1]:"",i=/(\d+)(\d{3})/;for(;i.test(e);)e=e.replace(i,"$1,$2");return e+n},async toDetail(t){let a=window.location.origin+"/income";const e={monthKey:t.monthKey,amount:t.amount,opaque:!1,targetContactId:this.impersonatedContactId,hiddenHistoryBtn:!0};let n=(new Date).getDate(),o=`${this.$ctx.baseApiList.income}/prodIncome/myIncomes?monthKey=${t.monthKey}`,r=!1;try{(await this.$request.get(o,{headers:{impersonatedContactId:this.impersonatedContactId}})).data.myIncome.incomeList.forEach(t=>{t.total&&0!==t.total&&(r=!0,t.dataList.forEach(t=>{t.value&&0!==t.value&&(r=!0)}))})}catch(t){}console.log(r),(1===n&&t.monthKey===this.monthKey||!r)&&(e.day=n,a=window.location.origin+"/processing"),Object(i.k)(a,e)}}},s=e(10);var c=Object(s.a)(r,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"my-income",class:{isAndroid:!t.isIos}},[n("NavBar",{attrs:{"left-text":"返回",fixed:"","right-text":"",title:"历史收入",border:!1,"safe-area-inset-top":!0},on:{"click-left":t.back,"click-right":t.customer},scopedSlots:t._u([{key:"left",fn:function(){return[n("img",{staticClass:"back_btn",attrs:{src:e(58),alt:""}})]},proxy:!0},{key:"right",fn:function(){return[n("img",{staticClass:"customer_btn",attrs:{src:e(62),alt:""}})]},proxy:!0}])}),t._ssrNode(" "),t._ssrNode('<div class="my-income-content" data-v-0928f2aa>',"</div>",[t._ssrNode("<div data-v-0928f2aa>","</div>",t._l(t.incomeData,(function(a,i){return t._ssrNode('<div class="income-data" data-v-0928f2aa>',"</div>",[t._ssrNode('<div class="income-data-year" data-v-0928f2aa>'+t._ssrEscape(t._s(a.year)+"年度")+"</div> "),n("el-table",{attrs:{data:a.monthDatas,stripe:"",border:!1},on:{"row-click":t.toDetail}},[n("el-table-column",{attrs:{prop:"monthKey",label:"月份"}}),t._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"收入",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.row;return[n("div",{staticClass:"table-amount"},[t._v("\n                "+t._s(t.format_number(i.amount))+"\n                "),n("img",{attrs:{src:e(276),alt:""}})])]}}],null,!0)})],1)],2)})),0)])],2)}),[],!1,(function(t){var a=e(277);a.__inject__&&a.__inject__(t)}),"0928f2aa","a929294a");a.default=c.exports}};