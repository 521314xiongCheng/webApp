exports.ids=[35],exports.modules={120:function(t,e,a){t.exports=a.p+"img/search_back.40a06b97.png"},122:function(t,e,a){t.exports=a.p+"img/icon_input_search.8351fb55.png"},123:function(t,e,a){t.exports=a.p+"img/nodata.ab62307b.png"},134:function(t,e,a){"use strict";e.a={mounted(){let t=document.querySelector(".search-bar"),e=document.querySelector(".el-table__header-wrapper"),a=document.querySelector(".el-table__body-wrapper");window.addEventListener("scroll",i=>{let s=document.querySelector(".el-table__fixed-header-wrapper");(document.documentElement.scrollTop||document.body.scrollTop)>=t.clientHeight?(s.style.cssText="position: fixed;top: 0;width: 130px;z-index: 4;overflow: hidden;",e.style.cssText="position: fixed;top: 0;z-index: 4;",a.style.cssText=`padding-top: ${e.clientHeight}px`):(s.style.cssText="position: absolute;top: 0",e.style.cssText="position: unset;",a.style.cssText="padding-top: 0;")})}}},198:function(t,e,a){var i=a(287);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a(57).default;t.exports.__inject__=function(t){s("46f9251d",i,!0,t)}},286:function(t,e,a){"use strict";a.r(e);var i=a(198);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},287:function(t,e,a){var i=a(56),s=a(59),n=a(133);e=i(!1);var o=s(n);e.push([t.i,'.search-wrap .search-bar[data-v-f30aa7ac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.search-wrap .search-bar .back_btn[data-v-f30aa7ac]{width:2.667vmin;height:4.8vmin;margin-left:5.6vmin;content:"viewport-units-buggyfill; width: 2.667vmin; height: 4.8vmin; margin-left: 5.6vmin"}.search-wrap .search-bar .van-search__content[data-v-f30aa7ac]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:9.333vmin;width:75.733vmin;background-color:#f5f5f5;border-radius:4.667vmin;content:"viewport-units-buggyfill; height: 9.333vmin; width: 75.733vmin; border-radius: 4.667vmin"}.search-wrap .search-bar .van-search__content[data-v-f30aa7ac] .van-field__control{font-size:4vmin;content:"viewport-units-buggyfill; font-size: 4vmin"}.search-wrap .search-bar .search-bar__btn[data-v-f30aa7ac]{width:15.47vw;text-align:center;content:"viewport-units-buggyfill; width: 15.47vw"}.search-wrap .is_active[data-v-f30aa7ac]{color:#fe88a0!important}.search-wrap .no_data[data-v-f30aa7ac]{padding:10vw;text-align:center;color:#909399;content:"viewport-units-buggyfill; padding: 10vw"}.search-wrap .no_data .table-empty__bg[data-v-f30aa7ac]{width:53vw;height:32vw;background-repeat:round;background-size:cover;content:"viewport-units-buggyfill; width: 53vw; height: 32vw"}.search-wrap .avatar[data-v-f30aa7ac]{width:10.667vmin;height:10.667vmin;border-radius:50%;content:"viewport-units-buggyfill; width: 10.667vmin; height: 10.667vmin"}.search-wrap .icon_crown[data-v-f30aa7ac]{position:absolute;width:4.267vmin;height:4vmin;right:4.8vmin;top:1.6vmin;content:"viewport-units-buggyfill; width: 4.267vmin; height: 4vmin; right: 4.8vmin; top: 1.6vmin"}.search-wrap .assess-performance[data-v-f30aa7ac]{position:relative;display:inline-block}.search-wrap .assess-performance-btn[data-v-f30aa7ac]{padding:0 1.6vmin;height:5.867vmin;background-color:#fff7fd;color:#f16eae;font-size:3.2vmin;border-color:#ffa7d2;border-radius:1.2vmin;width:20vmin;content:"viewport-units-buggyfill; padding: 0 1.6vmin; height: 5.867vmin; font-size: 3.2vmin; border-radius: 1.2vmin; width: 20vmin"}.search-wrap .assess-performance-tip[data-v-f30aa7ac]{position:absolute;width:3.2vmin;height:3.2vmin;right:-1.333vmin;top:0;content:"viewport-units-buggyfill; width: 3.2vmin; height: 3.2vmin; right: -1.333vmin"}.popupmodel[data-v-f30aa7ac]{background:none}.popupmodel[data-v-f30aa7ac] .van-popup__close-icon--top-right{right:9.333vmin;content:"viewport-units-buggyfill; right: 9.333vmin"}.popupmodel[data-v-f30aa7ac]{background-color:transparent}.popbox[data-v-f30aa7ac]{padding:0 6.667vmin;content:"viewport-units-buggyfill; padding: 0 6.667vmin"}.popbox .msg[data-v-f30aa7ac]{position:relative;width:78.667vmin;height:35.733vmin;background-image:url('+o+');background-size:100%;background-repeat:no-repeat;padding-top:6.667vmin;content:"viewport-units-buggyfill; width: 78.667vmin; height: 35.733vmin; padding-top: 6.667vmin"}.popbox .msg span[data-v-f30aa7ac]{position:relative;font-size:4.8vmin;content:"viewport-units-buggyfill; font-size: 4.8vmin"}.popbox .msg img[data-v-f30aa7ac]{width:4.8vmin;height:4.133vmin;position:absolute;left:0;top:0;-webkit-transform:translate(-60%,-60%);transform:translate(-60%,-60%);content:"viewport-units-buggyfill; width: 4.8vmin; height: 4.133vmin"}.popbox .bottom[data-v-f30aa7ac]{position:relative;height:13.2vmin;content:"viewport-units-buggyfill; height: 13.2vmin"}.popbox .bottom img[data-v-f30aa7ac]{width:17.067vmin;height:13.2vmin;position:absolute;right:0;bottom:50%;-webkit-transform:translateX(6.667vmin);transform:translateX(6.667vmin);content:"viewport-units-buggyfill; width: 17.067vmin; height: 13.2vmin; -webkit-transform: translateX(6.667vmin); transform: translateX(6.667vmin)"}.popbox-title[data-v-f30aa7ac]{font-size:4.8vmin;text-align:center;margin:0 auto;color:#541b5a;line-height:1;content:"viewport-units-buggyfill; font-size: 4.8vmin"}.popbox-mes[data-v-f30aa7ac]{font-size:3.467vmin;padding:0 4.933vmin 0 6vmin;margin-top:4.8vmin;color:#333;line-height:5.867vmin;content:"viewport-units-buggyfill; font-size: 3.467vmin; padding: 0 4.933vmin 0 6vmin; margin-top: 4.8vmin; line-height: 5.867vmin"}',""]),t.exports=e},430:function(t,e,a){"use strict";a.r(e);var i=a(3),s=a(1),n=a(116),o=a(140),r=a(134),c=a(126),l={data:()=>({isFullScreen:!1,isIos:Object(s.l)(),loading:!0,finished:!1,tableData:{header:[{label:"当月绩效",minWidth:"90px",sortable:"custom",prop:"productionAmt",formatter:t=>Object(s.f)(t.productionAmt)}],data:[]},filterConfig:[{prop:"dirTags",label:"分类",options:[]},{prop:"activityStatuses",label:"状态",options:[]},{prop:"careerLevels",label:"职级",options:[]},{prop:"incomeTargetStatusIds",label:"收入目标",multiple:!1,options:[{name:"已设置",value:1},{name:"未设置",value:0}]}],filter:{pageSize:50,pageNo:1,businessType:"AREA_ONE",sortEnum:null,orderEnum:null},currentData:{},total:1,monthKey:"",isNoData:!1,setproductionAmtM:!1,productionContactId:"",productionName:"",keyword:"",popup:!1,describe:"",levelCode:0,targetContactId:null,accountType:"",pageName:"TeamDetailsPage"}),mixins:[r.a],components:{commonTable:n.a,List:i.List,"van-search":i.Search,"van-button":i.Button,"van-icon":i.Icon,clickAvatarActionSheet:c.a,productionSheet:o.a,"van-popup":i.Popup},created(){const{monthKey:t,businessType:e,targetContactId:a,accountType:i,levelCode:n}=this.$route.query;console.log(n),this.monthKey=t,this.filter.businessType=e,this.targetContactId=a,this.accountType=i,this.levelCode=Number(n);let o=new Date(t.substr(0,4),t.substr(4,6));o.setMonth(o.getMonth()-1,1);for(let t=1;t<13;t++){o.setMonth(o.getMonth()-1);let e=`${o.getFullYear()}/${this.addZero(o.getMonth()+1)}`;this.tableData.header.push({label:""+e,minWidth:"90px",sortable:"custom",prop:"productionAmtM"+t,formatter:e=>Object(s.f)(e["productionAmtM"+t])})}},methods:{addZero:t=>t<10?"0"+t:t,back(){Object(s.b)()},onCancel(){this.$track({context:this.pageName,behavior:"TeamDetailsSearchCancelClick",item_type:this.pageName,item_id:"TeamDetailsSearchCancelClick"}),Object(s.b)()},onSearch(t){this.$track({context:this.pageName,behavior:"TeamDetailsSearchIconClick",item_type:this.pageName,item_id:"TeamDetailsSearchIconClick",attributes:{search_content:t}}),this.filter.search=t,this.filter.pageNo=1,this.tableData.data=[],this.loadData()},async setTargetIncomerow(t){"operation"!==this.accountType?t.setTargetIncomeAmt||(i.Dialog.confirm({message:"是否邀请设置收入目标"}).then(()=>{this.share()}).catch(()=>{}),this.$track({context:this.pageName,behavior:"TeamDetailsUnsetClick",item_type:this.pageName,item_id:"TeamDetailsUnsetClick"})):this.$toast("抱歉，暂时不支持对她进行操作～")},async loadData(){let t=document.documentElement.scrollTop||document.body.scrollTop;this.loading=!0;const{pageNo:e,pageSize:a,search:i,sortEnum:s,orderEnum:n}=this.filter,o={pageNo:e,pageSize:a,search:i,sortEnum:s,orderEnum:n};let r=this.$ctx.baseApi;const{data:c}=await this.$request.get(r+"/reports/team/details",{params:o});this.loading=!1,c.hasNextPage?this.finished=!1:this.finished=!0;const l=new Map;let d=this.tableData.data.concat(c.members);this.tableData.data=d.filter(t=>!l.has(t.contactId)&&l.set(t.contactId,1)),this.tableData.data&&this.tableData.data.length?this.isNoData=!1:(this.isNoData=!0,this.keyword=this.filter.search),window.scrollTo(0,t),this.filter.pageNo=this.filter.pageNo+1},async onRefresh(){this.finished=!1,this.filter.pageNo=1,this.tableData.data=[],this.loadData()},async setTargetIncome(){"operation"!==this.accountType?i.Dialog.confirm({message:"是否邀请设置收入目标"}).then(()=>{this.share()}).catch(()=>{}):this.$toast("抱歉，暂时不支持对她进行操作～")},handleClickAvatar(t){this.currentData=t,this.$nextTick(()=>{this.$refs.clickAvatarActionSheet.showActions()})},async share(){let t=this.$ctx.baseApi;const e=await this.$request.post(t+"/invite/link");console.log(e);const a={kind:"media",title:"写下你的收入愿望，我们一起实现她",description:"愿望无论大小，说不定就实现了呢？",thumbnail:"https://dev-community-s3.marykay.com.cn/DEV/MyBizIntouch_Content_Cms/LibraryResource/20210917102605_661.png",mediatype:"webpage",scene:"WXSceneSession",url:`${this.$ctx.baseShareUrl}?linkKey=${e.data.linkKey}`};this.$jsBridge.shareToWechat(a)},async onSelect(t){let e=this.$ctx.baseApi;switch(t.prop){case"follow":const{data:t}=await this.$request.post(e+"/focus",{focusContactId:this.currentData.contactId.toString()});this.currentData.isFocus=!this.currentData.isFocus,console.log(this.currentData.isFocus);break;case"profile":let a=window.location.origin+"/profile";const s={opaque:!1,targetContactId:this.currentData.contactId,levelCode:this.currentData.careerLevelCode,followed:this.$route.query.targetContactId};this.$go(a,s);break;case"setTarget":let{setTargetIncomeAmt:n}=this.currentData,o=n?"是否邀请修改收入目标":"是否邀请设置收入目标";i.Dialog.confirm({message:o}).then(()=>{this.share()}).catch(()=>{});break;case"assess":let r="team";Number(this.currentData.careerLevelCode)>=60&&(r="unit");let c=`${window.location.origin}/${r}`;const l={opaque:!1,isSelf:!1,targetContactId:this.currentData.contactId,levelCode:this.currentData.careerLevelCode,monthKey:this.monthKey,navTitle:"收入目标评估"};this.$go(c,l);break;case"call":window.location.href="tel:"+this.currentData.mobile}this.$refs.clickAvatarActionSheet.show=!1},sortMap:t=>({estimateProductionAmt:"ESTIMATE_PRODUCTION_AMT",setTargetProductionAmt:"SET_TARGET_PRODUCTION_AMT",setTargetIncomeAmt:"INCOME_TARGET_AMT",productionAmtRate:"PRODUCTIONAMT_RATE",productionAmt:"PRODUCTION_AMT",productionAmtM1:"PRODUCTION_AMT_M1",productionAmtM2:"PRODUCTION_AMT_M2",productionAmtM3:"PRODUCTION_AMT_M3",productionAmtM4:"PRODUCTION_AMT_M4",productionAmtM5:"PRODUCTION_AMT_M5",productionAmtM6:"PRODUCTION_AMT_M6",productionAmtM7:"PRODUCTION_AMT_M7",productionAmtM8:"PRODUCTION_AMT_M8",productionAmtM9:"PRODUCTION_AMT_M9",productionAmtM10:"PRODUCTION_AMT_M10",productionAmtM11:"PRODUCTION_AMT_M11",productionAmtM12:"PRODUCTION_AMT_M12"}[t]),sortChange({column:t,prop:e,order:a}){a?("descending"===a?a="desc":"ascending"===a&&(a="asc"),this.filter.sortEnum=this.sortMap(e),this.filter.orderEnum=a.toLocaleUpperCase()):(this.filter.sortEnum=null,this.filter.orderEnum=null),this.tableData.data=[],this.filter.pageNo=1,this.loadData()},cellClick(t){this.isFullScreen?this.$toast("请返回竖屏下操作～"):"operation"!==this.accountType?(this.currentData=t,this.productionContactId=t.contactId,this.productionName=t.name,this.$refs.productionAction.showProductionAction=!0):this.$toast("抱歉，暂时不支持对她进行操作～")},setEstimateProduction(t){this.currentData=t,this.productionContactId=t.contactId,this.productionName=t.name,this.$refs.productionAction.showProductionAction=!0},async addProduction(t){this.currentData.setTargetProductionAmt=!0,this.currentData.estimateProductionAmt=t,this.currentData.setBySelf=!0,this.$refs.productionAction.showProductionAction=!1},async setByself(t){console.log("row",t),this.currentData=t;let e=this.$ctx.baseApi;const a={contactId:this.currentData.contactId},{data:i}=await this.$request.get(e+"/estimate/production/relationship",{params:a});this.describe="该美容顾问的目标由她的辅导老师王云在2021-07-02日更新。",this.popup=!0,console.log("data",i)},setClassName:({row:t,column:e})=>"name"===e.property?"cell-class_name":"avatar"===e.property?"cell-class_avatar":"estimateProductionAmt"===e.property?"cell-class_estimateProductionAmt":void 0}},d=a(10);var p=Object(d.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-wrap"},[t._ssrNode('<div class="search-bar" data-v-f30aa7ac>',"</div>",[t._ssrNode("<img"+t._ssrAttr("src",a(120))+' alt class="back_btn" data-v-f30aa7ac> '),i("van-search",{staticClass:"table-search",attrs:{"show-action":"",placeholder:"请输入姓名/手机号搜索"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left-icon",fn:function(){return[i("img",{staticClass:"icon-input-search",attrs:{src:a(122),alt:""}})]},proxy:!0}]),model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search","string"==typeof e?e.trim():e)},expression:"filter.search"}})],2),t._ssrNode(" "),t._ssrNode('<div class="search-result"'+t._ssrStyle(null,null,{display:t.tableData.data.length?"":"none"})+" data-v-f30aa7ac>","</div>",[i("List",{attrs:{finished:t.finished,"finished-text":t.tableData.data&&t.tableData.data.length?"没有更多了":""},on:{load:t.loadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("common-table",{ref:"unitTable",attrs:{id:"table-content",border:!1,tableData:t.tableData,isFullScreen:t.isFullScreen,setClassName:t.setClassName},on:{sortChange:t.sortChange}},[i("el-table-column",{attrs:{fixed:"left",width:"60px",align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("div",{staticClass:"avatar-wrap"},[i("img",{staticClass:"avatar",attrs:{src:"https://consultant-ecard-api-external-latest.prod.pcf.mkc.io/v1/user/"+s.contactId+"/avatar?size=60",alt:""},on:{click:function(e){return t.handleClickAvatar(s)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:s.setTargetIncomeAmt,expression:"row.setTargetIncomeAmt"}],staticClass:"icon_crown",attrs:{src:a(121),alt:""}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"姓名",fixed:"left",width:"70px",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"user"},[i("div",{staticClass:"user-info"},[i("div",{staticClass:"user_name"},[i("span",{staticClass:"climp"},[t._v(t._s(a.name))])])]),t._v(" "),t.targetContactId===a.contactId.toString()?i("div",{staticClass:"tags"},[i("span",{staticClass:"level"},[t._v(t._s(a.careerLevelCode))]),t._v(" "),i("span",{staticClass:"status"},[t._v(t._s(a.activityStatusCode))]),t._v(" "),i("span",{staticClass:"self"},[t._v("本人")])]):i("div",{staticClass:"no-self"},[i("span",{staticClass:"level"},[t._v(t._s(a.careerLevelCode))]),t._v(" "),i("span",{staticClass:"line"}),t._v(" "),i("span",{staticClass:"status"},[t._v(t._s(a.activityStatusCode))])])])]}}])}),t._v(" "),this.levelCode<60?i("el-table-column",{attrs:{slot:"between",label:"评估绩效",prop:"estimateProductionAmt",width:"96px",align:"center","header-align":"center",sortable:"custom","sort-orders":["descending","ascending",null]},slot:"between",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("div",{staticClass:"assess-performance"},[s.setTargetProductionAmt?i("van-button",{staticClass:"assess-performance-btn",on:{click:function(e){return t.cellClick(s)}}},[t._v(t._s(t._f("formatMoney")(s.estimateProductionAmt)))]):i("van-button",{staticClass:"assess-performance-btn",on:{click:function(e){return t.cellClick(s)}}},[t._v("评估绩效")]),t._v(" "),!s.setBySelf&&s.setTargetProductionAmt?i("img",{staticClass:"assess-performance-tip",attrs:{src:a(151),alt:""},on:{click:function(e){return t.setByself(s)}}}):t._e()],1)]}}],null,!1,3559876514)}):t._e(),t._v(" "),this.levelCode>=60?i("el-table-column",{attrs:{slot:"between",label:"收入目标",prop:"targetIncomeAmt",align:"center","header-align":"center",sortable:"custom",minWidth:"90px"},slot:"between",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"assess-performance"},[a.setTargetIncomeAmt?i("van-button",{staticClass:"assess-performance-btn",on:{click:function(e){return t.setTargetIncomerow(a)}}},[t._v(t._s(t._f("formatMoney")(a.incomeTargetAmt)))]):i("van-button",{staticClass:"assess-performance-btn",on:{click:function(e){return t.setTargetIncomerow(a)}}},[t._v("未设置")])],1)]}}],null,!1,3036321410)}):t._e(),t._v(" "),this.levelCode<60?i("el-table-column",{attrs:{slot:"between",label:"绩效进度",prop:"estimateProductionAmt",minWidth:"90px",align:"center","header-align":"center",sortable:"custom"},slot:"between",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(a.productionAmtRate)+"%\n          ")]}}],null,!1,1953559139)}):t._e()],1)],1)],1),t._ssrNode(" "+(t.isNoData?'<div class="no_data" data-v-f30aa7ac><div data-v-f30aa7ac><img'+t._ssrAttr("src",a(123))+' alt class="table-empty__bg" data-v-f30aa7ac></div>\n    未查询到<span class="is_active" data-v-f30aa7ac>'+t._ssrEscape("“"+t._s(t.keyword)+"”")+"</span>的数据\n  </div>":"\x3c!----\x3e")+" "),i("click-avatar-action-sheet",{ref:"clickAvatarActionSheet",attrs:{pageName:t.pageName,profileClickEventName:"TeamDetailsClick",focusEventName:"TeamDetailsSetFocusClick  ",unfocusEventName:"TeamDetailsUnfocusClick",setTargetEventName:"TeamDetailsSetIncomeTargetClick",callEventName:"TeamDetailsPhoneCallClick",cancelEventName:"TeamDetailsUnsetClick",info:t.currentData,isFullScreen:t.isFullScreen,accountType:t.accountType,targetContactId:t.targetContactId},on:{onSelect:t.onSelect}}),t._ssrNode(" "),i("productionSheet",{ref:"productionAction",attrs:{contactId:t.productionContactId,queryType:"team",productionName:t.productionName},on:{addProduction:t.addProduction}}),t._ssrNode(" "),i("van-popup",{staticClass:"popupmodel",attrs:{position:"center",closeable:""},model:{value:t.popup,callback:function(e){t.popup=e},expression:"popup"}},[i("div",{staticClass:"popbox"},[i("div",{staticClass:"msg"},[i("p",{staticClass:"popbox-title"},[i("span",[i("img",{attrs:{src:a(29),alt:""}}),t._v("提示")])]),t._v(" "),i("p",{staticClass:"popbox-mes"},[t._v(t._s(t.describe))])]),t._v(" "),i("div",{staticClass:"bottom"},[i("img",{attrs:{src:a(30),alt:""}})])])])],2)}),[],!1,(function(t){var e=a(286);e.__inject__&&e.__inject__(t)}),"f30aa7ac","59ebee30");e.default=p.exports}};