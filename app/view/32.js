exports.ids=[32],exports.modules={165:function(t,e,i){t.exports=i.p+"img/tips.3301873d.png"},168:function(t,e,i){t.exports=i.p+"img/date.035e6622.png"},220:function(t,e,i){var a=i(385);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i(57).default;t.exports.__inject__=function(t){n("d9c3324a",a,!0,t)}},381:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAHAAAAABkvfSiAAADEklEQVRIDb1WPWiTURR998tPtTUV0ald1KEWFMRB6CJODkawSXWqYzcRG0UEa4cOtUIRjQhurk6apg51cBKXgoMgCq2DXYyLiti0atsk13Pe12e/1Pxq7IPw3vfevefk3Xf/xDQwli9PHykUNSFaOmaMdKvRLqqJkY/GaE7FexEOSbbjdv+renBSSyCfyp5V1XH8DgTlRMwqv1VNtHxf5kVkNJZOPAruB9cVCX9cebJvbbXwUI3pozAI3qjxMljOeO3R9zsmTn7m/tLI0z2l76v7jegpUU3iDxziPkBnI9Hw4PZbpxf4HRx/EOYvZY5rUR7DbLtxOGc8udaZTmaDStXWi6mphCnpTfzRXpj7i4T0TOzOwPOgfBmhT2aeQSEC0zyI7eo5L2MHrfmCSrXWOvY2mv/67j6eYQjgaxIyJ4Kkvwl9MxZf2puJd73zbmKiGvDy1emujsl+OEz1sTicHVEt3eBNI9HQUWdez6n4bwYz4ma1yPKpzEDhZzG3lJo+53QrzcQgFi9AbCdjCa03wkFw3Tma0R1WmmHuvdxXU7Qz19WGfRJgQqePHJSzhHR9qwQHafbNqpFx32IBk2vH4TGoGWd0/Ua9kQCNDmLasAIHuTxmECqvx1mjOE3JOWxyeX66svozTaE0J2yxyYU3lG7qMoM0h9G49Aa2dMu3i5k8bByNpZPb4MZwqNojPzx1oaR6D7IFeEJhs7SKFJHbRnemk2l3Bh8R6K0AfMWPQ2X6a2yE2troBK8rkdVFwIXCLDEIzh4mYih8qqfUPhn/AJnD9eSC58TG7SKw3wJuqDke2qwflGrhegNbcx6L5zp2vIUc5VAoX9wgl8dKzQ8xpQHO/2OwVhKXXB7bAnjcPIunrWctZiQmsclBLuul+Bi1PCyeqGet4rRYwCSe47CE7EEQF7PwpF4Wz1YR2kJsq7+ZdX2OH4dgYA/CYokgHWLx/FdSvwCz6rMAhwcdXlnAb2mL4f7BljZRjrTpNtGYOMPqr9pER8q5ZiOM/Mt0FZSn69MbnYMEz9y67A3d5ua5la3+LyMCp+8ghQa7AAAAAElFTkSuQmCC"},382:function(t,e,i){t.exports=i.p+"img/imgDel_icon.33e0cfb2.png"},383:function(t,e,i){t.exports=i.p+"img/addImg_icon.ee424be6.png"},384:function(t,e,i){"use strict";i.r(e);var a=i(220);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n)},385:function(t,e,i){(e=i(56)(!1)).push([t.i,'.addPage[data-v-1aed3864]{min-height:100vh;content:"viewport-units-buggyfill; min-height: 100vh"}.isAndroid[data-v-1aed3864] .van-nav-bar{padding-top:7.333vmin;content:"viewport-units-buggyfill; padding-top: 7.333vmin"}[data-v-1aed3864] .van-nav-bar{background-color:#f16eae;z-index:4}[data-v-1aed3864] .van-nav-bar .van-nav-bar__content{height:10.667vmin;content:"viewport-units-buggyfill; height: 10.667vmin"}[data-v-1aed3864] .van-nav-bar .van-nav-bar__content .van-nav-bar__left .back_btn{width:2.267vmin;height:4.267vmin;content:"viewport-units-buggyfill; width: 2.267vmin; height: 4.267vmin"}[data-v-1aed3864] .van-nav-bar .van-nav-bar__content .van-nav-bar__title{color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}[data-v-1aed3864] .van-nav-bar .van-nav-bar__content .van-nav-bar__title .icon_q{width:4vmin;height:4vmin;margin-left:1.333vmin;content:"viewport-units-buggyfill; width: 4vmin; height: 4vmin; margin-left: 1.333vmin"}[data-v-1aed3864] .van-nav-bar .van-nav-bar__content .van-nav-bar__text{color:#fff}.note .shadowBox[data-v-1aed3864]{padding:0 8vmin;content:"viewport-units-buggyfill; padding: 0 8vmin"}.note .time[data-v-1aed3864]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.note .time img[data-v-1aed3864]{width:4vmin;margin-right:2vmin;content:"viewport-units-buggyfill; width: 4vmin; margin-right: 2vmin"}.note .box[data-v-1aed3864]{padding:4vmin;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;content:"viewport-units-buggyfill; padding: 4vmin"}.note .box .imgBox[data-v-1aed3864]{width:33.33%;height:auto;text-align:center;margin-bottom:1.333vmin;position:relative;content:"viewport-units-buggyfill; margin-bottom: 1.333vmin"}.note .box .imgBox .picture[data-v-1aed3864]{width:28.533vmin;height:28.533vmin;content:"viewport-units-buggyfill; width: 28.533vmin; height: 28.533vmin"}.note .box .imgBox .icon[data-v-1aed3864]{width:5.6vmin;height:5.6vmin;position:absolute;top:1.333vmin;right:2.667vmin;content:"viewport-units-buggyfill; width: 5.6vmin; height: 5.6vmin; top: 1.333vmin; right: 2.667vmin"}.note .box .img[data-v-1aed3864]{width:28.533vmin;height:28.533vmin;background:#f3f4f8;border-radius:1.333vmin;margin:0 auto;content:"viewport-units-buggyfill; width: 28.533vmin; height: 28.533vmin; border-radius: 1.333vmin"}.note .box .img img[data-v-1aed3864]{width:11.6vmin;height:10.133vmin;margin-top:5.6vmin;content:"viewport-units-buggyfill; width: 11.6vmin; height: 10.133vmin; margin-top: 5.6vmin"}.note .box .img div[data-v-1aed3864]{font-size:3.2vmin;font-weight:700;color:#7f7f7f;margin-top:2.4vmin;content:"viewport-units-buggyfill; font-size: 3.2vmin; margin-top: 2.4vmin"}.note[data-v-1aed3864] .van-dropdown-item__content{padding:0 2.933vmin 1.6vmin;content:"viewport-units-buggyfill; padding: 0 2.933vmin 1.6vmin"}.note[data-v-1aed3864] .van-dropdown-menu__bar{box-shadow:none}.note[data-v-1aed3864] .van-cell:after{content:none}.note[data-v-1aed3864] .van-uploader__preview-image,.note[data-v-1aed3864] .van-uploader__upload{width:28.533vmin;height:28.533vmin;content:"viewport-units-buggyfill; width: 28.533vmin; height: 28.533vmin"}.note[data-v-1aed3864] .van-calendar__header-subtitle{color:#7f7f7f;font-size:2.667vmin;height:6.667vmin;line-height:6.667vmin;content:"viewport-units-buggyfill; font-size: 2.667vmin; height: 6.667vmin; line-height: 6.667vmin"}.note[data-v-1aed3864] .van-calendar__weekday{color:#f26899}.note[data-v-1aed3864] .van-calendar__day,.note[data-v-1aed3864] .van-calendar__weekday{font-size:3.733vmin;content:"viewport-units-buggyfill; font-size: 3.733vmin"}.note[data-v-1aed3864] .van-calendar__day{color:#7f7f7f}.note[data-v-1aed3864] .van-calendar__footer{padding:0!important}.note[data-v-1aed3864] .van-calendar__day--end,.note[data-v-1aed3864] .van-calendar__day--start{color:#fff}.note[data-v-1aed3864] .van-calendar__header{box-shadow:none;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.note[data-v-1aed3864] .van-calendar__day{height:9.067vmin;content:"viewport-units-buggyfill; height: 9.067vmin"}.note[data-v-1aed3864] .van-dropdown-menu__title--active{color:#484848}.note[data-v-1aed3864] .van-calendar__month-mark{color:#fff1f8;font-size:26.667vmin;content:"viewport-units-buggyfill; font-size: 26.667vmin"}.note[data-v-1aed3864] .van-calendar__selected-day{width:7.2vmin;height:7.2vmin;content:"viewport-units-buggyfill; width: 7.2vmin; height: 7.2vmin"}.note .clock[data-v-1aed3864]{margin:2vmin;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:4vmin;color:#484848;content:"viewport-units-buggyfill; margin: 2vmin; font-size: 4vmin"}.note .clock[data-v-1aed3864],.note .clock .left[data-v-1aed3864]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.note .clock .left img[data-v-1aed3864]{width:3.733vmin;height:3.733vmin;margin-right:1.6vmin;content:"viewport-units-buggyfill; width: 3.733vmin; height: 3.733vmin; margin-right: 1.6vmin"}.tipsBox[data-v-1aed3864]{width:50.533vmin;height:17.333vmin;line-height:17.333vmin;font-size:4vmin;color:#f16eae;background-color:#fff4fd;border-radius:2vmin;font-weight:700;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;content:"viewport-units-buggyfill; width: 50.533vmin; height: 17.333vmin; line-height: 17.333vmin; font-size: 4vmin; border-radius: 2vmin"}.tipsBox img[data-v-1aed3864]{width:6vmin;vertical-align:middle;content:"viewport-units-buggyfill; width: 6vmin"}[data-v-1aed3864] .van-dialog{width:73.333vmin;content:"viewport-units-buggyfill; width: 73.333vmin"}[data-v-1aed3864] .van-picker-column__item--selected{background-color:#ffe0ef;width:24.4vmin;margin:0 auto;border-radius:1.733vmin;content:"viewport-units-buggyfill; width: 24.4vmin; border-radius: 1.733vmin"}',""]),t.exports=e},448:function(t,e,i){"use strict";i.r(e);var a=i(3),n=i(1),o={components:{NavBar:a.NavBar,"van-sticky":a.Sticky,"van-dropdown-menu":a.DropdownMenu,"van-dropdown-item":a.DropdownItem,"van-calendar":a.Calendar,"van-field":a.Field,"van-datetime-picker":a.DatetimePicker,"van-icon":a.Icon,"van-dialog":a.Dialog.Component},data:()=>({navTitle:"添加计划",isIos:Object(n.l)(),minDate:new Date(2022,3,1),date:"2022-03-17",baseDate:null,currentTime:"09:00",show:!1,message:"",baseApi:"",imageList:[],summaryId:"",showTips:!1,tipsMsg:"随便记录点内容吧"}),async created(){this.baseApi=this.$ctx.baseApi,this.summaryId=this.$route.query.summaryId,this.summaryId&&(this.navTitle="编辑摘要",this.getData()),this.getNewDate()},mounted(){},methods:{back(){Object(n.b)()},getNewDate(){const t=new Date;this.summaryId||(this.baseDate=t),this.date=this.formatDate(t),this.currentTime=`${t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`},async getData(){const{data:t}=await this.$request.get(`${this.baseApi}/weeksummary/${this.summaryId}/detail`);this.imageList=t.imageList||[],this.message=t.eventContent;const e=new Date(t.eventTime.replace(/-/g,"/"));this.baseDate=e,this.date=this.formatDate(e),this.currentTime=`${e.getHours()}:${e.getMinutes()}`},onConfirm(t){console.log(this.formatDate(t)),this.date=this.formatDate(t)},checkTime(){this.show=!0},async upData(){const t=this.message.trim();if(!t)return this.tipsMsg="随便记录点内容吧",this.showTips=!0,setTimeout(()=>{this.showTips=!1},2e3),!1;if(t.length>300)return this.tipsMsg="不能超过300字",this.showTips=!0,setTimeout(()=>{this.showTips=!1},2e3),!1;console.log(t.length);const e={contactId:this.$route.query.targetContactId,eventTime:Object(n.e)(`${this.date} ${this.currentTime}:00`),eventContent:t,imageList:this.imageList};if(this.summaryId){e.summaryId=this.summaryId;const{data:t}=await this.$request.put(this.baseApi+"/weeksummary",e);t?(a.Toast.success("修改成功！"),this.back()):a.Toast.fail("修改失败,请稍后再试！")}else{const{data:t}=await this.$request.post(this.baseApi+"/weeksummary",e);t?(a.Toast.success("添加成功！"),this.back()):a.Toast.fail("添加失败,请稍后再试！")}},async s3ImagePicker(){let t=await this.$jsBridge.s3ImagePicker({takePhoto:!0,photoBroswer:!0,maxCount:1,editPhoto:!1});t&&this.imageList.push(t[0])},lookItem(t){const e=this.imageList.indexOf(t);Object(a.ImagePreview)({images:this.imageList,startPosition:e})},deleteImg(t){this.imageList.splice(t,1)},formatDate:t=>Object(n.e)(t,"YYYY-MM-DD")}},s=i(10);var d=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addPage",class:{isAndroid:!t.isIos}},[a("van-sticky",[a("NavBar",{attrs:{"left-text":"取消","right-text":"完成",title:t.navTitle,border:!1,"safe-area-inset-top":!0},on:{"click-left":t.back,"click-right":t.upData}})],1),t._ssrNode(" "),t._ssrNode('<div class="note" data-v-1aed3864>',"</div>",[a("van-dropdown-menu",[a("van-dropdown-item",{ref:"dropdownMenu",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"time"},[a("img",{attrs:{src:i(168),alt:""}}),t._v("\n            "+t._s(t.date)+" "+t._s(t.currentTime)+"\n          ")])]},proxy:!0}])},[t._v(" "),a("div",{staticClass:"shadowBox"},[a("van-calendar",{style:{height:"66.667vw"},attrs:{"show-title":!1,poppable:!1,"show-confirm":!1,"min-date":t.minDate,"default-date":t.baseDate,color:"#F06EAE"},on:{confirm:t.onConfirm}}),t._v(" "),a("div",{staticClass:"clock"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:i(381),alt:""}}),t._v("\n              时间\n            ")]),t._v(" "),a("div",{staticClass:"right",on:{click:t.checkTime}},[t._v("\n              "+t._s(t.currentTime)+" "),a("van-icon",{attrs:{name:"arrow-down",color:"#F16EAE"}})],1)])],1)])],1),t._ssrNode(" "),a("van-field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"输入计划内容"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._ssrNode(' <div class="box" data-v-1aed3864>'+t._ssrList(t.imageList,(function(e,a){return'<div class="imgBox" data-v-1aed3864><img'+t._ssrAttr("src",e)+' alt class="picture" data-v-1aed3864> <img'+t._ssrAttr("src",i(382))+' alt class="icon" data-v-1aed3864></div>'}))+' <div class="imgBox"'+t._ssrStyle(null,null,{display:t.imageList.length<6?"":"none"})+' data-v-1aed3864><div class="img" data-v-1aed3864><img'+t._ssrAttr("src",i(383))+" alt data-v-1aed3864> <div data-v-1aed3864>照片</div></div></div></div>")],2),t._ssrNode(" "),a("transition",{attrs:{name:"van-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTips,expression:"showTips"}],staticClass:"tipsBox"},[a("span",[t._v(t._s(t.tipsMsg))]),t._v(" "),a("img",{attrs:{src:i(165),alt:""}})])]),t._ssrNode(" "),a("van-dialog",{attrs:{title:null,"show-cancel-button":"","confirm-button-color":"#ED8DC3"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-datetime-picker",{attrs:{type:"time","min-hour":0,"max-hour":23,"show-toolbar":!1,"item-height":"10vw","visible-item-count":"4"},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1)],2)}),[],!1,(function(t){var e=i(384);e.__inject__&&e.__inject__(t)}),"1aed3864","76ac2df9");e.default=d.exports}};