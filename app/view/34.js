exports.ids=[34],exports.modules={168:function(t,e,n){t.exports=n.p+"img/date.035e6622.png"},223:function(t,e,n){var o=n(398);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n(57).default;t.exports.__inject__=function(t){a("da97d328",o,!0,t)}},394:function(t,e,n){t.exports=n.p+"img/info.bd8ae466.png"},395:function(t,e,n){t.exports=n.p+"img/choseinfo.c6949ae3.png"},396:function(t,e,n){t.exports=n.p+"img/loading.f82f9309.gif"},397:function(t,e,n){"use strict";n.r(e);var o=n(223);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a)},398:function(t,e,n){(e=n(56)(!1)).push([t.i,'[data-v-5d9e4b98] .van-nav-bar{background-color:#ee4d9b;z-index:4}[data-v-5d9e4b98] .van-nav-bar .van-nav-bar__content{height:10.667vmin;content:"viewport-units-buggyfill; height: 10.667vmin"}[data-v-5d9e4b98] .van-nav-bar .van-nav-bar__content .van-nav-bar__left .back_btn{width:2.267vmin;height:4.267vmin;content:"viewport-units-buggyfill; width: 2.267vmin; height: 4.267vmin"}[data-v-5d9e4b98] .van-nav-bar .van-nav-bar__title{color:#fff}.coach-home-content[data-v-5d9e4b98]{position:relative}.note[data-v-5d9e4b98]{margin-top:2.667vmin;content:"viewport-units-buggyfill; margin-top: 2.667vmin"}.note-date[data-v-5d9e4b98]{text-align:center;font-size:4vmin;font-weight:500;color:#484848;content:"viewport-units-buggyfill; font-size: 4vmin"}.note-date img[data-v-5d9e4b98]{width:4vmin;margin-right:1.333vmin;content:"viewport-units-buggyfill; width: 4vmin; margin-right: 1.333vmin"}.note-input[data-v-5d9e4b98]{margin-top:5.333vmin;width:100%;border:0;padding:0 4vmin;font-size:4vmin;font-weight:400;color:#484848;height:40vmin;line-height:5.333vmin;content:"viewport-units-buggyfill; margin-top: 5.333vmin; padding: 0px 4vmin; font-size: 4vmin; height: 40vmin; line-height: 5.333vmin"}[data-v-5d9e4b98] .van-calendar__weekdays{color:#f16eae;font-weight:500}.infopush[data-v-5d9e4b98]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 4vmin;margin-top:1.333vmin;content:"viewport-units-buggyfill; padding: 0px 4vmin; margin-top: 1.333vmin"}.push-text img[data-v-5d9e4b98]{width:5.6vmin;vertical-align:middle;content:"viewport-units-buggyfill; width: 5.6vmin"}.push-text span[data-v-5d9e4b98]{color:#7f7f7f}.push-text span[data-v-5d9e4b98],.pushActive span[data-v-5d9e4b98]{font-size:3.733vmin;font-weight:500;content:"viewport-units-buggyfill; font-size: 3.733vmin"}.pushActive span[data-v-5d9e4b98]{color:#f16eae!important}.van-nav-bar__right span[data-v-5d9e4b98]{color:#ff90c6}.van-nav-bar__right .goPush[data-v-5d9e4b98]{color:#fff}input[data-v-5d9e4b98]:disabled,textarea[data-v-5d9e4b98]:disabled{background:none;-webkit-text-fill-color:#484848;color:#484848;opacity:1}.isAndroid[data-v-5d9e4b98] .van-nav-bar{padding-top:7.333vmin;content:"viewport-units-buggyfill; padding-top: 7.333vmin"}.loading[data-v-5d9e4b98]{position:fixed;width:100%;height:100%;background:#fff;text-align:center;top:0;left:0;padding:16vmin 0;content:"viewport-units-buggyfill; padding: 16vmin 0px"}',""]),t.exports=e},450:function(t,e,n){"use strict";n.r(e);var o=n(1),a=n(28),i=(n(7),n(3)),s={mixins:[a.a],data:()=>({isIos:Object(o.l)(),showCalendar:!1,linkNote:!0,auto:!0,choseDate:"",goPush:!1,minDate:new Date(2010,0,1),loadChange:!1,from:"",note:{needPush:!1,noteContent:"",noteDate:"",needPushShow:"",showPush:!1}}),created(){this.$route.query.linkNote?this.linkNote=!this.$route.query.linkNote:this.linkNote=!0},mounted(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1),o=t.getDate()>=10?t.getDate():"0"+t.getDate();this.note.noteDate=`${e}-${n}-${o}`,this.choseDate=`${e}${n}${o}`,this.$route.query.noteId?(this.getNoteInfo(),this.auto=!1):this.auto=!0,console.log("auto",this.auto)},methods:{goshowCalendar(){this.linkNote?this.showCalendar=!0:this.showCalendar=!1},async getNoteInfo(){var t=this.$route.query.followed;if(!t){let e=await this.$jsBridge.getUserProfile();e="string"==typeof e?JSON.parse(e):e,console.log(e),t=e.contact_id}let e={contactId:t};console.log("查看");let n=this.$ctx.baseApi;const{data:o}=await this.$request.get(`${n}/notes/${this.$route.query.noteId}`,{params:e});o||i.Dialog.alert({message:"当前事件已被删除，请知晓。"}).then(()=>{let e={opaque:!1,noteId:this.$route.query.noteId,targetContactId:this.$route.query.targetContactId,name:this.$route.query.name,levelCode:this.$route.query.levelCode,from:this.from,followed:t},n=window.location.origin+"/note";this.$go(n,e)}),this.note=o,this.note.showPush=o.needPush,2==o.labelType&&(this.note.showPush=!0),console.log("data",o)},async gopush(){if(this.note.noteContent){if(this.$route.query.noteId){let t=this.$ctx.baseApi,e=this.$route.query.noteId;await this.$request.put(`${t}/notes/${e}?updateType=1&followContactId=${this.$route.query.targetContactId}&noteDate=${this.note.noteDate}&noteContent=${this.note.noteContent}&needPush=${this.note.needPush}&contactId=${this.$route.query.followed}`)&&(this.loadChange=!0)}else{let t=this.$ctx.baseApi,e=this.note;e.followContactId=Number(this.$route.query.targetContactId),console.log("params",e);const n=await this.$request.post(`${t}/notes?followContactId=${this.$route.query.targetContactId}&noteDate=${this.note.noteDate}&noteContent=${this.note.noteContent}&needPush=${this.note.needPush}&contactId=${this.$route.query.followed}`,e);console.log("res",n),n&&(this.loadChange=!0)}this.linkNote=!1;window.location.origin;const t={targetContactId:this.$route.query.targetContactId,name:this.$route.query.name,levelCode:this.$route.query.levelCode,opaque:!1,followed:this.$route.query.followed,fullscreen:!0};"addNote_none"==this.$route.query.from?this.$router.replace({name:"note",query:t}):Object(o.b)()}},back(){Object(o.b)()},formatDate(t){let e=t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1),n=t.getDate()>=10?t.getDate():"0"+t.getDate();return`${t.getFullYear()}${e}${n}`>this.choseDate?(this.note.showPush=!0,this.note.needPush=!0):(this.note.showPush=!1,this.note.needPush=!1),`${t.getFullYear()}-${e}-${n}`},onConfirm(t){console.log("date",t),this.showCalendar=!1,this.note.noteDate=this.formatDate(t),console.log(" this.choseDate",this.choseDate)}},watch:{note:{handler(t,e){""!=t.noteContent?this.goPush=!0:this.goPush=!1},deep:!0}},components:{NavBar:i.NavBar,List:i.List,"van-switch":i.Switch,"van-calendar":i.Calendar,"van-cell":i.Cell,"van-swipe-cell":i.SwipeCell,"van-popup":i.Popup,"van-sticky":i.Sticky,"van-button":i.Button}},d=n(10);var r=Object(d.a)(s,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coach-home",class:{isAndroid:!t.isIos}},[t._ssrNode('<div class="coach-home-content" data-v-5d9e4b98>',"</div>",[o("van-sticky",[o("NavBar",{attrs:{"left-text":"返回",title:"内容",border:!1,"safe-area-inset-top":!0},on:{"click-left":t.back},scopedSlots:t._u([{key:"left",fn:function(){return[o("img",{staticClass:"back_btn",attrs:{src:n(58),alt:""}})]},proxy:!0},this.linkNote?{key:"right",fn:function(){return[o("span",{class:{goPush:t.goPush},on:{click:function(e){return t.gopush()}}},[t._v("保存")])]},proxy:!0}:null],null,!0)})],1),t._ssrNode(' <div class="note" data-v-5d9e4b98><p class="note-date" data-v-5d9e4b98><img'+t._ssrAttr("src",n(168))+" alt data-v-5d9e4b98>"+t._ssrEscape("\n        "+t._s(this.note.noteDate)+"\n      ")+'</p> <textarea maxlength="256"'+t._ssrAttr("disabled",!this.linkNote)+' placeholder="请输入需要备注的内容～" id="noteinput" class="note-input" data-v-5d9e4b98>'+t._ssrEscape(t._s(t.note.noteContent))+"</textarea></div> "),this.note.showPush?t._ssrNode('<div class="infopush" data-v-5d9e4b98>',"</div>",[t._ssrNode("<div"+t._ssrClass("push-text",{pushActive:t.note.needPush})+" data-v-5d9e4b98>"+(t.note.needPush?"<img"+t._ssrAttr("src",n(395))+" alt data-v-5d9e4b98>":"<img"+t._ssrAttr("src",n(394))+" alt data-v-5d9e4b98>")+" <span data-v-5d9e4b98>需要推送提醒吗</span></div> "),t._ssrNode("<div data-v-5d9e4b98>","</div>",[o("van-switch",{attrs:{disabled:!this.linkNote,"active-color":"#F16EAE","inactive-color":"#dcdee0",size:"24px"},model:{value:t.note.needPush,callback:function(e){t.$set(t.note,"needPush",e)},expression:"note.needPush"}})],1)],2):t._e(),t._ssrNode(" "+(this.loadChange?'<div class="loading" data-v-5d9e4b98><img'+t._ssrAttr("src",n(396))+" alt data-v-5d9e4b98></div>":"\x3c!----\x3e"))],2),t._ssrNode(" "),o("van-calendar",{attrs:{"min-date":t.minDate,color:"#F16EAE"},on:{confirm:t.onConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}})],2)}),[],!1,(function(t){var e=n(397);e.__inject__&&e.__inject__(t)}),"5d9e4b98","5dac0bb8");e.default=r.exports}};